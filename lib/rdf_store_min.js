(function(){function oa(){function a(){}a.prototype=oa.prototype;var d=new a,c;for(c in Ea)d[c]=Ea[c];return d}function U(a){function d(){}a=a||{};d.prototype=U.prototype;var c=new d;c._lexer=a.lexer||new oa;c._blankNodes=Object.create(null);c._blankNodeCount=0;c._tripleStack=[];a.documentURI?(c._baseURI=c._documentURI=a.documentURI,c._baseURIRoot=c._documentURIRoot=a.documentURI.replace(Fa,"")):(c._baseURI=c._documentURI=null,c._baseURIROOT=c._documentURIRoot=null);return c}typeof console=="undefined"&&
(console={log:function(){}});window.process={};process.nextTick=function(a){setTimeout(a,0)};var w={"extends":function(a,d){d.prototype=new a},stackCounterLimit:1E3,stackCounter:0};w.recur=function(a){w.stackCounter===w.stackCounterLimit?(w.stackCounter=0,setTimeout(a,0)):(w.stackCounter++,a())};w.clone=function(a){return JSON.parse(JSON.stringify(a))};w.shuffle=function(a){for(var d,c,e=a.length;e;d=parseInt(Math.random()*e),c=a[--e],a[e]=a[d],a[d]=c);return a};w.include=function(a,d,c){for(var e=
a.length-1;e>=0;e--){var f=!1,f=c==null?a[e]===d:c(a[e],d)===0;if(f===!0)return!0}return!1};w.remove=function(a,d){for(var c=[],e=0;e<a.length;e++)a[e]!==d&&c.push(a[e]);return c};w.repeat=function(a,d,c,e,f){arguments.length===4&&(f={});a<d?(f._i=a,c(function(c,f){w.recur(function(){w.repeat(a+1,d,c,e,f)})},f)):e(f)};w.meanwhile=function(a,d,c,e){arguments.length===3&&(e={});e._stack_counter==null&&(e._stack_counter=0);a===!0?d(function(a,d,e){e._stack_counter%40==39?(e._stack_counter+=1,setTimeout(function(){w.neanwhile(a,
d,c,e)},0)):(e._stack_counter+=1,w.meanwhile(a,d,c,e))},e):c(e)};w.seq=function(){var a=arguments;return function(d){w.repeat(0,a.length,function(c,d){var f=arguments.callee;a[d._i](function(){c(f,d)})},function(){d()})}};w.partition=function(a,d){for(var c=a.length%d,e=[],f=0;f<c;f++)e.push(null);c=[];for(f=0;f<a.length;f++)e.push(a[f]),e.length%d==0&&(c.push(e),e=[]);return c};w.keys=function(a){var d=[],c;for(c in a)d.push(c);return d};w.iso8601=function(a){function d(a){return a<10?"0"+a:a}return a.getUTCFullYear()+
"-"+d(a.getUTCMonth()+1)+"-"+d(a.getUTCDate())+"T"+d(a.getUTCHours())+":"+d(a.getUTCMinutes())+":"+d(a.getUTCSeconds())+"Z"};w.parseStrictISO8601=function(a){var d=a.match(RegExp("([0-9]{4})(-([0-9]{2})(-([0-9]{2})(T([0-9]{2}):([0-9]{2})(:([0-9]{2})(.([0-9]+))?)?(Z|(([-+])([0-9]{2}):([0-9]{2})))?)?)?)?")),a=0,c=new Date(d[1],0,1);if(d[3])c.setMonth(d[3]-1);else throw"missing ISO8061 component";if(d[5])c.setDate(d[5]);else throw"missing ISO8061 component";if(d[7])c.setHours(d[7]);else throw"missing ISO8061 component";
if(d[8])c.setMinutes(d[8]);else throw"missing ISO8061 component";if(d[10])c.setSeconds(d[10]);else throw"missing ISO8061 component";d[12]&&c.setMilliseconds(Number("0."+d[12])*1E3);d[14]&&(a=Number(d[16])*60+Number(d[17]),a*=d[15]=="-"?1:-1);a-=c.getTimezoneOffset();d=new Date;d.setTime(Number(Number(c)+a*6E4));return d};w.parseISO8601=function(a){var d=a.match(RegExp("([0-9]{4})(-([0-9]{2})(-([0-9]{2})(T([0-9]{2}):([0-9]{2})(:([0-9]{2})(.([0-9]+))?)?(Z|(([-+])([0-9]{2}):([0-9]{2})))?)?)?)?")),a=
0,c=new Date(d[1],0,1);d[3]&&c.setMonth(d[3]-1);d[5]&&c.setDate(d[5]);d[7]&&c.setHours(d[7]);d[8]&&c.setMinutes(d[8]);d[10]&&c.setSeconds(d[10]);d[12]&&c.setMilliseconds(Number("0."+d[12])*1E3);d[14]&&(a=Number(d[16])*60+Number(d[17]),a*=d[15]=="-"?1:-1);a-=c.getTimezoneOffset();d=new Date;d.setTime(Number(Number(c)+a*6E4));return d};w.parseISO8601Components=function(a){var a=a.match(RegExp("([0-9]{4})(-([0-9]{2}))(-([0-9]{2}))(T([0-9]{2}):([0-9]{2})(:([0-9]{2}))?(.([0-9]+))?)?(Z|([-+])([0-9]{2})(:([0-9]{2}))?)?")),
d,c,e,f,i,g,h,n;d=Number(a[1]);c=a[3]-1;e=Number(a[5]);f=Number(a[7]);i=Number(a[8]);g=Number(a[10]);a[12]&&(h=Number("0."+a[12])*1E3);a[13]==="Z"?n=0:a[14]?(n=0,a[17]&&(n=Number(a[17])),n+=Number(a[15])*60,n*=a[14]=="-"?-1:1):a[14]==null&&a[11]&&(n=Number(a[12])*60);return{year:isNaN(d)?null:d,month:isNaN(c)?null:c,date:isNaN(e)?null:e,hours:isNaN(f)?null:f,minutes:isNaN(i)?null:i,seconds:isNaN(g)?null:g,millisecs:isNaN(h)?null:h,timezone:isNaN(n)?null:n}};w.compareDateComponents=function(a,d){var c=
w.parseISO8601Components(a),e=w.parseISO8601Components(d);if(c.timezone==null&&e.timezone==null||c.timezone!=null&&e.timezone!=null)return c=w.parseISO8601(a),e=w.parseISO8601(d),c.getTime()==e.getTime()?0:c.getTime()<e.getTime()?-1:1;else if(c.timezone!=null&&e.timezone==null){var c=w.parseISO8601(a),e=w.parseISO8601(d),c=c.getTime(),e=e.getTime(),f=50400;return c<e&&c<e+f?-1:c>e&&c>e-f?1:null}else return c=w.parseISO8601(a),e=w.parseISO8601(d),c=c.getTime(),e=e.getTime(),f=50400,c<e&&c+f<e?-1:c>
e&&c+f>e?1:null};w.lexicalFormLiteral=function(a,d){var c=a.value,e=a.lang,f=a.type,i=null;if(c!=null&&f!=null&&typeof f!="string"){c=f.value;if(c==null)c=f.suffix,f=d.namespaces[f.prefix],a.type=f+c,c=f+c;i=c.indexOf("hexBinary")!=-1?'"'+a.value.toLowerCase()+'"^^<'+c+">":'"'+a.value+'"^^<'+c+">"}else i=e==null&&f==null?'"'+c+'"':f==null?'"'+c+'"@'+e:f.indexOf("hexBinary")!=-1?'"'+a.value.toLowerCase()+'"^^<'+f+">":'"'+a.value+'"^^<'+f+">";return i};w.lexicalFormBaseUri=function(a,d){var c=null,
d=d||{};if(a.value==null)var c=a.prefix,e=a.suffix,f=d.namespaces[c],c=f!=null?f+e:c+":"+e;else c=a.value;if(c===null)return null;else c.indexOf(":")==-1&&(c=(d.base||"")+c);return c};w.lexicalFormTerm=function(a,d){if(a.token==="uri")return{uri:w.lexicalFormBaseUri(a,d)};else if(a.token==="literal")return{literal:w.lexicalFormLiteral(a,d)};else if(a.token==="blank")return{blank:"_:"+a.value};else throw"Error, cannot get lexical form of unknown token: "+a.token;};w.normalizeUnicodeLiterals=function(a){for(var d=
a.match(/\\u[0-9abcdefABCDEF]{4,4}/g)||[],c={},e=0;e<d.length;e++)c[d[e]]==null&&(c[d[e]]=!0,a=a.replace(RegExp("\\"+d[e],"g"),eval("'"+d[e]+"'")));return a};w.hashTerm=function(a){try{if(a==null)return"";if(a.token==="uri")return"u"+a.value;else if(a.token==="blank")return"b"+a.value;else if(a.token==="literal"){var d="l"+a.value;d+=a.type||"";d+=a.lang||"";return d}}catch(c){if(typeof a==="object"){d="";for(p in a)d=d+p+a[p];return d}return a}};var M={Tree:function(a){if(arguments.length!=0)this.order=
a,this.root=this._allocateNode(),this.root.isLeaf=!0,this.root.level=0,this._diskWrite(this.root),this._updateRootNode(this.root),this.comparator=function(a,c){return a<c?-1:a>c?1:0},this.merger=null}};M.Tree.prototype._allocateNode=function(){return new M.Node};M.Tree.prototype._diskWrite=function(){};M.Tree.prototype._diskRead=function(a){return a};M.Tree.prototype._diskDelete=function(){};M.Tree.prototype._updateRootNode=function(a){return a};M.Tree.prototype.clear=function(){this.root=this._allocateNode();
this.root.isLeaf=!0;this.root.level=0;this._updateRootNode(this.root)};M.Tree.prototype.search=function(a,d){for(var c=!0,e=this.root;c;){for(var f=0;f<e.numberActives&&this.comparator(a,e.keys[f].key)===1;)f++;if(f<e.numberActives&&this.comparator(e.keys[f].key,a)===0)return d!=null&&d==!0?!0:e.keys[f].data;else e.isLeaf===!0?c=!1:e=this._diskRead(e.children[f])}return null};M.Tree.prototype.walk=function(a){this._walk(a,this.root)};M.Tree.prototype._walk=function(a,d){if(d.isLeaf)for(var c=0;c<
d.numberActives;c++)a(d.keys[c]);else{for(c=0;c<d.numberActives;c++)this._walk(a,this._diskRead(d.children[c])),a(d.keys[c]);this._walk(a,this._diskRead(d.children[d.numberActives]))}};M.Tree.prototype.walkNodes=function(a){this._walkNodes(a,this.root)};M.Tree.prototype._walkNodes=function(a,d){if(d.isLeaf)a(d);else{a(d);for(var c=0;c<d.numberActives;c++)this._walkNodes(a,this._diskRead(d.children[c]));this._walkNodes(a,this._diskRead(d.children[d.numberActives]))}};M.Tree.prototype._splitChild=function(a,
d,c){var e=this._allocateNode();e.isLeaf=c.isLeaf;e.level=c.level;e.numberActives=this.order-1;var f=c.keys[this.order-1];c.keys[this.order-1]=null;for(var i=0;i<this.order-1;i++)e.keys[i]=c.keys[i+this.order],c.keys[i+this.order]=null,c.isLeaf||(e.children[i]=c.children[i+this.order],c.children[i+this.order]=null);c.isLeaf||(e.children[i]=c.children[i+this.order],c.children[i+this.order]=null);c.numberActives=this.order-1;for(i=a.numberActives+1;i>d+1;i--)a.children[i]=a.children[i-1];a.children[d+
1]=e;for(i=a.numberActives;i>d;i--)a.keys[i]=a.keys[i-1];a.keys[d]=f;a.numberActives++;this._diskWrite(e);this._diskWrite(a);this._diskWrite(c)};M.Tree.prototype.insert=function(a,d){if(this.root.numberActives===2*this.order-1){var c=this._allocateNode();c.isLeaf=!1;c.level=this.root.level+1;c.numberActives=0;c.children[0]=this.root;this._splitChild(c,0,this.root);this.root=c;this._updateRootNode(this.root);this._insertNonFull(c,a,d)}else this._insertNonFull(this.root,a,d)};M.Tree.prototype._insertNonFull=
function(a,d,c){for(var e=a.numberActives-1;!a.isLeaf;){for(;e>=0&&this.comparator(d,a.keys[e].key)===-1;)e--;e++;var f=this._diskRead(a.children[e]);f.numberActives===2*this.order-1&&(this._splitChild(a,e,f),this.comparator(d,a.keys[e].key)===1&&e++);a=this._diskRead(a.children[e]);e=a.numberActives-1}for(;e>=0&&this.comparator(d,a.keys[e].key)===-1;)a.keys[e+1]=a.keys[e],e--;a.keys[e+1]={key:d,data:c};a.numberActives++;this._diskWrite(a)};M.Tree.prototype["delete"]=function(a){for(var d=this.root,
c=null,e=!0,f=null,i=null,g=null,h=!0;h===!0;){for(h=!1;e===!0;){n=0;if(d.numberActives===0)return!1;for(;n<d.numberActives&&this.comparator(a,d.keys[n].key)===1;)n++;f=n;n<d.numberActives&&this.comparator(a,d.keys[n].key)===0&&(e=!1);if(e===!0){if(d.isLeaf===!0)return!1;c=d;d=this._diskRead(d.children[n]);if(d===null)return!1;f===c.numberActives?(i=this._diskRead(c.children[f-1]),g=null):f===0?(i=null,g=this._diskRead(c.children[1])):(i=this._diskRead(c.children[f-1]),g=this._diskRead(c.children[f+
1]));d.numberActives===this.order-1&&c!=null&&(g!=null&&g.numberActives>this.order-1?this._moveKey(c,n,-1):i!=null&&i.numberActives>this.order-1?this._moveKey(c,n,1):i!=null&&i.numberActives===this.order-1?d=this._mergeSiblings(c,n,-1):g!=null&&g.numberActives===this.order-1&&(d=this._mergeSiblings(c,n,1)))}}if(d.isLeaf&&d.numberActives>this.order-1)return this._deleteKeyFromNode(d,f),!0;if(d.isLeaf&&d===this.root)return this._deleteKeyFromNode(d,f),!0;if(d.isLeaf===!1)if(c=n=null,(n=this._diskRead(d.children[f])).numberActives>
this.order-1)a=this._getMaxKeyPos(n),a=a.node.keys[a.index],d.keys[f]=a,this._diskWrite(d),d=n,a=a.key,e=h=!0;else if((n=this._diskRead(d.children[f+1])).numberActives>this.order-1)a=this._getMinKeyPos(n),a=a.node.keys[a.index],d.keys[f]=a,this._diskWrite(d),d=n,a=a.key,e=h=!0;else if((n=this._diskRead(d.children[f])).numberActives===this.order-1&&(c=this._diskRead(d.children[f+1])).numberActives===this.order-1){e=this._mergeNodes(n,d.keys[f],c);d.children[f]=e;f++;for(var n=f;n<d.numberActives;n++)d.children[n]=
d.children[n+1],d.keys[n-1]=d.keys[n];d.children[n]=null;d.keys[n-1]=null;d.numberActives--;if(d.numberActives===0&&this.root===d)this.root=e;this._diskWrite(d);d=e;e=h=!0}d.isLeaf&&d.numberActives>this.order-1&&e===!1&&this._deleteKeyFromNode(d,f);if(h===!1)return!0}};M.Tree.prototype._moveKey=function(a,d,c){c===1&&d--;var e=this._diskRead(a.children[d]),f=this._diskRead(a.children[d+1]);if(c==-1){e.keys[e.numberActives]=a.keys[d];e.children[e.numberActives+1]=f.children[0];f.children[0]=null;e.numberActives++;
a.keys[d]=f.keys[0];for(c=1;c<f.numberActives;c++)f.keys[c-1]=f.keys[c],f.children[c-1]=f.children[c];f.children[f.numberActives-1]=f.children[f.numberActives];f.numberActives--}else{f.children[f.numberActives+1]=f.children[f.numberActives];for(c=f.numberActives;c>0;c--)f.children[c]=f.children[c-1],f.keys[c]=f.keys[c-1];f.keys[0]=null;f.children[0]=null;f.children[0]=e.children[e.numberActives];f.keys[0]=a.keys[d];f.numberActives++;e.children[e.numberActives]=null;a.keys[d]=e.keys[e.numberActives-
1];e.keys[e.numberActives-1]=null;e.numberActives--}this._diskWrite(e);this._diskWrite(f);this._diskWrite(a)};M.Tree.prototype._mergeSiblings=function(a,d){var c,e,f;d===a.numberActives?(d--,e=this._diskRead(a.children[a.numberActives-1]),f=this._diskRead(a.children[a.numberActives])):(e=this._diskRead(a.children[d]),f=this._diskRead(a.children[d+1]));var i=this._allocateNode();i.isLeaf=e.isLeaf;i.level=e.level;for(c=0;c<this.order-1;c++)i.keys[c]=e.keys[c],i.children[c]=e.children[c];i.keys[this.order-
1]=a.keys[d];i.children[this.order-1]=e.children[this.order-1];for(c=0;c<this.order-1;c++)i.keys[c+this.order]=f.keys[c],i.children[c+this.order]=f.children[c];i.children[2*this.order-1]=f.children[this.order-1];a.children[d]=i;for(c=d;c<a.numberActives;c++)a.keys[c]=a.keys[c+1],a.children[c+1]=a.children[c+2];i.numberActives=e.numberActives+f.numberActives+1;a.numberActives--;for(c=a.numberActives;c<2*this.order-1;c++)a.keys[c]=null;if(a.numberActives===0&&this.root===a)this.root=i,i.isLeaf=i.level?
!1:!0;this._diskWrite(i);this.root===i&&this._updateRootNode(this.root);this._diskWrite(a);this._diskDelete(e);this._diskDelete(f);return i};M.Tree.prototype._deleteKeyFromNode=function(a,d){var c=2*this.order-1;if(a.numberActives<c)c=a.numberActives;var e;if(a.isLeaf===!1)return!1;for(e=d;e<c-1;e++)a.keys[e]=a.keys[e+1];a.keys.pop();a.numberActives--;this._diskWrite(a);return!0};M.Tree.prototype._mergeNodes=function(a,d,c){var e,f;e=this._allocateNode();e.isLeaf=!0;for(f=0;f<a.numberActives;f++)e.keys[f]=
a.keys[f],e.children[f]=a.children[f];e.children[a.numberActives]=a.children[a.numberActives];e.keys[a.numberActives]=d;for(f=0;f<c.numberActives;f++)e.keys[f+a.numberActives+1]=c.keys[f],e.children[f+a.numberActives+1]=c.children[f];e.children[2*this.order-1]=c.children[c.numberActives];e.numberActives=a.numberActives+c.numberActives+1;e.isLeaf=a.isLeaf;e.level=a.level;this._diskWrite(e);return e};M.Tree.prototype.audit=function(a){var d=[],c=[],e=this,f=function(f){for(var i=0;i<c.length;i++)if(e.comparator(c[i],
f)===0){var h=" !!! duplicated key "+f;a===!0&&console.log(h);d.push(h)}},i=null,e=this;this.walkNodes(function(g){a===!0&&(console.log("--- Node at "+g.level+" level"),console.log(" - leaf? "+g.isLeaf),console.log(" - num actives? "+g.numberActives),console.log(" - keys: "));for(var h=g.numberActives;h<g.keys.length;h++)g.keys[h]!=null&&a===!0&&(console.log(" * warning : redundant key data"),d.push(" * warning : redundant key data"));for(h=g.numberActives+1;h<g.children.length;h++)g.children[h]!=
null&&a===!0&&(console.log(" * warning : redundant children data"),d.push(" * warning : redundant key data"));if(g.isLeaf===!1)for(h=0;h<g.numberActives;h++){var n=e._diskRead(g.children[h]).keys[e._diskRead(g.children[h]).numberActives-1].key,q=e._diskRead(g.children[h+1]).keys[0].key;a===!0&&console.log("   "+g.keys[h].key+"("+n+","+q+")");if(e.comparator(g.keys[h].key,n)===-1){var m=" !!! value max left "+n+" > key "+g.keys[h].key;a===!0&&console.log(m);d.push(m)}e.comparator(g.keys[h].key,q)===
1&&(m=" !!! value min right "+q+" < key "+g.keys[h].key,a===!0&&console.log(m),d.push(m));f(g.keys[h].key);c.push(g.keys[h].key)}else{i===null?i=g.level:i!=g.level&&(m=" !!! Leaf node with wrong level value",a===!0&&console.log(m),d.push(m));for(h=0;h<g.numberActives;h++)a===!0&&console.log(" "+g.keys[h].key),f(g.keys[h].key),c.push(g.keys[h].key)}g!=e.root&&(g.numberActives>2*e.order-1&&(a===!0&&(m=" !!!! MAX num keys restriction violated "),console.log(m),d.push(m)),g.numberActives<e.order-1&&(a===
!0&&(m=" !!!! MIN num keys restriction violated "),console.log(m),d.push(m)))});return d};M.Tree.prototype._getMaxKeyPos=function(a){for(var d={};;){if(a===null)break;if(a.isLeaf===!0){d.node=a;d.index=a.numberActives-1;break}else d.node=a,d.index=a.numberActives-1,a=this._diskRead(a.children[a.numberActives])}return d};M.Tree.prototype._getMinKeyPos=function(a){for(var d={};;){if(a===null)break;if(a.isLeaf===!0){d.node=a;d.index=0;break}else d.node=a,d.index=0,a=this._diskRead(a.children[0])}return d};
M.Node=function(){this.numberActives=0;this.isLeaf=null;this.keys=[];this.children=[];this.level=0};var Z={NodeKey:function(a,d){this.subject=a.subject;this.predicate=a.predicate;this.object=a.object;this.graph=a.graph;this.order=d}};Z.NodeKey.prototype.comparator=function(a){for(var d=0;d<this.order.length;d++){var c=this.order[d];if(a[c]==null)break;else if(this[c]<a[c])return-1;else if(this[c]>a[c])return 1}return 0};Z.Pattern=function(a){this.subject=a.subject;this.predicate=a.predicate;this.object=
a.object;this.graph=a.graph;this.indexKey=[];this.keyComponents={};for(var d=[],c=[],a=["subject","predicate","object","graph"],e=0;e<a.length;e++)typeof this[a[e]]==="string"?(c.push(a[e]),this.keyComponents[a[e]]=null):(d.push(a[e]),this.keyComponents[a[e]]=this[a[e]],this.indexKey.push(a[e]));this.order=d.concat(c);this.key=new Z.NodeKey(this.keyComponents,this.order)};var ca={Tree:function(a,d){if(arguments!=0)this.componentOrder=a.componentOrder,M.Tree.call(this,a.order,a.name,a.persistent,a.cacheMaxSize),
this.comparator=function(a,d){for(var f=0;f<this.componentOrder.length;f++){var i=this.componentOrder[f],g=a[i],i=d[i];if(g<i)return-1;else if(g>i)return 1}return 0},this.rangeComparator=function(a,d){for(var f=0;f<this.componentOrder.length;f++){var i=this.componentOrder[f];if(d[i]==null||a[i]==null)break;else if(a[i]<d[i])return-1;else if(a[i]>d[i])return 1}return 0},d!=null&&d(this)}};w["extends"](M.Tree,ca.Tree);ca.Tree.prototype.insert=function(a,d){M.Tree.prototype.insert.call(this,a,null);
d&&d(!0);return!0};ca.Tree.prototype.search=function(a,d){var c=M.Tree.prototype.search.call(this,a,!0);d&&d(c);return c};ca.Tree.prototype.range=function(a,d){var c=null,c=typeof this.root==="string"?this._rangeTraverse(this,this._diskRead(this.root),a):this._rangeTraverse(this,this.root,a);d&&d(c);return c};ca.Tree.prototype._rangeTraverse=function(a,d,c){for(var c=c.key,e=[],f=[d],i;f.length>0;){d=f.shift();for(i=0;i<d.numberActives&&a.rangeComparator(d.keys[i].key,c)===-1;)i++;if(d.isLeaf===!0)for(;i<
d.numberActives&&a.rangeComparator(d.keys[i].key,c)===0;)e.push(d.keys[i].key),i++;else{var g=a._diskRead(d.children[i]);for(f.push(g);;)if(i<d.numberActives&&a.rangeComparator(d.keys[i].key,c)===0)e.push(d.keys[i].key),i++,g=a._diskRead(d.children[i]),f.push(g);else break}}return e};var aa={QuadBackend:function(a,d){if(arguments!=0){this.indexMap={};this.treeOrder=a.treeOrder;this.indices=["SPOG","GP","OGS","POG","GSP","OS"];this.componentOrders={SPOG:["subject","predicate","object","graph"],GP:["graph",
"predicate","subject","object"],OGS:["object","graph","subject","predicate"],POG:["predicate","object","graph","subject"],GSP:["graph","subject","predicate","object"],OS:["object","subject","predicate","graph"]};for(var c=0;c<this.indices.length;c++){var e=this.indices[c];this.indexMap[e]=new ca.Tree({order:this.treeOrder,componentOrder:this.componentOrders[e],persistent:a.persistent,name:(a.name||"")+e,cacheMaxSize:a.cacheMaxSize})}d&&d(this)}}};aa.QuadBackend.prototype.clear=function(){for(var a=
0;a<this.indices.length;a++)this.indexMap[this.indices[a]].clear()};aa.QuadBackend.prototype._indexForPattern=function(a){for(var a=a.indexKey,d=this.indices,c=0;c<d.length;c++)for(var e=d[c],f=this.componentOrders[e],i=0;i<f.length;i++){if(w.include(a,f[i])===!1)break;if(i==a.length-1)return e}return"SPOG"};aa.QuadBackend.prototype.index=function(a,d){for(var c=0;c<this.indices.length;c++)this.indexMap[this.indices[c]].insert(a);d&&d(!0);return!0};aa.QuadBackend.prototype.range=function(a,d){var c=
this.indexMap[this._indexForPattern(a)].range(a);d&&d(c);return c};aa.QuadBackend.prototype.search=function(a,d){var c=this.indexMap[this.indices[0]].search(a);d&&d(c!=null);return c!=null};aa.QuadBackend.prototype["delete"]=function(a,d){for(var c,e=0;e<this.indices.length;e++)c=this.indices[e],c=this.indexMap[c],c["delete"](a);d&&d(!0);return!0};var S={Lexicon:function(a){this.uriToOID={};this.OIDToUri={};this.literalToOID={};this.OIDToLiteral={};this.blankToOID={};this.OIDToBlank={};this.defaultGraphOid=
0;this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph";this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri,oid:this.defaultGraphOid};this.oidCounter=1;this.knownGraphs={};a!=null&&a(this)}};S.Lexicon.prototype.registerGraph=function(a){a!=this.defaultGraphOid&&(this.knownGraphs[a]=!0);return!0};S.Lexicon.prototype.registeredGraphs=function(a){var d=[],c;for(c in this.knownGraphs)a===!0?d.push(this.OIDToUri["u"+c]):d.push(c);return d};
S.Lexicon.prototype.registerUri=function(a){if(a===this.defaultGraphUri)return this.defaultGraphOid;else{if(this.uriToOID[a]==null){var d=this.oidCounter;this.oidCounter++;this.uriToOID[a]=[d,0];this.OIDToUri["u"+d]=a}else{var c=this.uriToOID[a],d=c[0];this.uriToOID[a]=[d,c[1]+1]}return d}};S.Lexicon.prototype.resolveUri=function(a){return a===this.defaultGraphUri?this.defaultGraphOid:(a=this.uriToOID[a],a!=null?a[0]:-1)};S.Lexicon.prototype.resolveUriCost=function(a){return a===this.defaultGraphUri?
this.defaultGraphOid:(a=this.uriToOID[a],a!=null?a[1]:-1)};S.Lexicon.prototype.registerBlank=function(){var a=this.oidCounter;this.oidCounter++;a=""+a;this.OIDToBlank[a]=!0;return a};S.Lexicon.prototype.resolveBlank=function(){var a=this.oidCounter;this.oidCounter++;return""+a};S.Lexicon.prototype.resolveBlankCost=function(){return 0};S.Lexicon.prototype.registerLiteral=function(a){if(this.literalToOID[a]==null){var d=this.oidCounter;this.oidCounter++;this.literalToOID[a]=[d,0];this.OIDToLiteral["l"+
d]=a}else{var c=this.literalToOID[a],d=c[0];this.literalToOID[a]=[d,c[1]+1]}return d};S.Lexicon.prototype.resolveLiteral=function(a){a=this.literalToOID[a];return a!=null?a[0]:-1};S.Lexicon.prototype.resolveLiteralCost=function(a){a=this.literalToOID[a];return a!=null?a[1]:0};S.Lexicon.prototype.parseLiteral=function(a){var d=a.lastIndexOf("@");if(d!=-1&&a[d-1]==='"'&&a.substring(d,a.length).match(/^@[a-zA-Z\-]+$/g)!=null){var c=a.substring(1,d-1),a=a.substring(d+1,a.length);return{token:"literal",
value:c,lang:a}}d=a.lastIndexOf("^^");if(d!=-1&&a[d-1]==='"'&&a[d+2]==="<"&&a[a.length-1]===">")return c=a.substring(1,d-1),a=a.substring(d+3,a.length-1),{token:"literal",value:c,type:a};c=a.substring(1,a.length-1);return{token:"literal",value:c}};S.Lexicon.prototype.parseUri=function(a){return{token:"uri",value:a}};S.Lexicon.prototype.retrieve=function(a){try{if(a===this.defaultGraphOid)return{token:"uri",value:this.defaultGraphUri,prefix:null,suffix:null,defaultGraph:!0};else{var d=this.OIDToUri["u"+
a];if(d!=null)return this.parseUri(d);else{var c=this.OIDToLiteral["l"+a];if(c!=null)return this.parseLiteral(c);else if(this.OIDToBlank[""+a]!=null)return{token:"blank",value:"_:"+a};else throw"Null value for OID";}}}catch(e){throw console.log("error in lexicon retrieving OID:"),console.log(a),e.message||e.stack?(e.message&&console.log(e.message),e.stack&&console.log(e.stack)):console.log(e),Error("Unknown retrieving OID in lexicon:"+a);}};S.Lexicon.prototype.clear=function(){this.uriToOID={};this.OIDToUri=
{};this.literalToOID={};this.OIDToLiteral={};this.blankToOID={};this.OIDToBlank={}};S.Lexicon.prototype.unregister=function(a,d){try{return this.unregisterTerm(a.subject.token,d.subject),this.unregisterTerm(a.predicate.token,d.predicate),this.unregisterTerm(a.object.token,d.object),a.graph!=null&&this.unregisterTerm(a.graph.token,d.graph),!0}catch(c){return console.log("Error unregistering quad"),console.log(c.message),!1}};S.Lexicon.prototype.unregisterTerm=function(a,d){if(a==="uri"){if(d!=this.defaultGraphOid){var c=
"u"+d,e=this.OIDToUri[c],f=this.uriToOID[e],i=f[1];if(""+f[0]===""+d)i===0?(delete this.OIDToUri[c],delete this.uriToOID[e],delete this.knownGraphs[d]):this.uriToOID[e]=[d,i-1];else throw"Not matching OID : "+d+" vs "+f[0];}}else if(a==="literal")if(this.oidCounter++,c="l"+d,e=this.OIDToLiteral[c],f=this.literalToOID[e],i=f[1],""+f[0]===""+d)i===0?(delete this.OIDToLiteral[c],delete this.literalToOID[e]):this.literalToOID[e]=[d,i-1];else throw"Not matching OID : "+d+" vs "+f[0];else a==="blank"&&
delete this.OIDToBlank[""+d]};var T={};T.load=function(a,d,c){jQuery.ajax({url:a,headers:{Accept:d},success:function(a,f,d){if((""+d.status)[0]=="2"){for(var f=d.getAllResponseHeaders().split("\n"),d={},g=0;g<f.length;g++){var h=f[g].split(":");d[h[0]]=h[1]}c(!0,{headers:d,data:a})}},error:function(a){(""+a.status)[0]=="3"?redirection==0?c(!1,500):(a=a.getAllResponseHeaders().Location||a.getAllResponseHeaders().location,a!=null?T.load(a,d,c,redirection-1):c(!1,500)):c(!1,a.statusCode())}})};var Ga=
null;(function(){var a=function(a,c){a.stack="";for(var f in c)a[f]=c[f]};if(typeof window!=="undefined"){var d=window.jsonld=window.jsonld||{};Exception=function(c){a(this,c)};if(!Object.keys)Object.keys=function(a){if(a!==Object(a))throw new TypeError("Object.keys called on non-object");var c=[],f;for(f in a)Object.prototype.hasOwnProperty.call(a,f)&&c.push(f);return c};if(!Array.prototype.filter)Array.prototype.filter=function(a,c){if(this==null)throw new TypeError;var f=Object(this),d=f.length>>>
0;if(typeof a!="function")throw new TypeError;for(var e=[],g=0;g<d;g++)if(g in f){var i=f[g];a.call(c,i,g,f)&&e.push(i)}return e}}else typeof module!=="undefined"&&module.exports&&(d={},Exception=function(c){a(this,c);this.stack=Error().stack});Ga=d;var c={rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",owl:"http://www.w3.org/2002/07/owl#",xsd:"http://www.w3.org/2001/XMLSchema#",dcterms:"http://purl.org/dc/terms/",foaf:"http://xmlns.com/foaf/0.1/",cal:"http://www.w3.org/2002/12/cal/ical#",
vcard:"http://www.w3.org/2006/vcard/ns# ",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",cc:"http://creativecommons.org/ns#",sioc:"http://rdfs.org/sioc/ns#",doap:"http://usefulinc.com/ns/doap#",com:"http://purl.org/commerce#",ps:"http://purl.org/payswarm#",gr:"http://purl.org/goodrelations/v1#",sig:"http://purl.org/signature#",ccard:"http://purl.org/commerce/creditcard#"},e={xsd:"http://www.w3.org/2001/XMLSchema#"},f={"boolean":e.xsd+"boolean","double":e.xsd+"double",integer:e.xsd+"integer"},i=function(a,
c,f){c in a?a[c].constructor===Array?a[c].push(f):a[c]=[a[c],f]:a[c]=f},g=function(a){var c;if(a.constructor===Object){c={};var f=Object.keys(a).sort(),d;for(d in f){var e=f[d];c[e]=g(a[e])}}else if(a.constructor===Array)for(d in c=[],a)c[d]=g(a[d]);else c=a;return c},h=function(a){var c={"@id":"@id","@language":"@language","@literal":"@literal","@type":"@type"};if(a){var f={},d;for(d in a)a[d].constructor===String&&a[d]in c&&(f[a[d]]=d);for(d in f)c[d]=f[d]}return c},n=function(a,c){var f=null;c in
a&&(a[c].constructor===String?f=a[c]:a[c].constructor===Object&&"@id"in a[c]&&(f=a[c]["@id"]));return f},q=function(a,c,f){var d=null,e;for(e in a)if(e.length>0&&e[0]!=="@"&&c===n(a,e)){d=e;f!==null&&(f[e]=g(a[e]));break}d===null&&c==="@type"&&(d=h(a)["@type"]);if(d===null)for(e in a)if(e.length>0&&e[0]!=="@"){var i=n(a,e);if(i!==null&&c.indexOf(i)===0&&c.length>i.length){d=e+":"+c.substr(i.length);f!==null&&(f[e]=g(a[e]));break}}d===null&&(d=c);return d},m=function(a,c,f){var d=c,e=h(a),i=c.indexOf(":");
if(i!==-1)e=c.substr(0,i),e in a&&(d=n(a,e)+c.substr(i+1),f!==null&&(f[e]=g(a[e])));else if(c in a)d=n(a,c),f!==null&&(f[c]=g(a[c]));else for(var m in e)if(c===e[m]){d=m;break}return d},r=function(a){var c=!1;a!==null&&a.constructor===Object&&!("@literal"in a)&&(c=Object.keys(a).length>1||!("@id"in a));return c};d.normalize=function(a){return(new t).normalize(a)};d.expand=function(a){return(new t).expand({},null,a)};d.compact=function(a,c){var f=null;if(c!==null){var c=d.expand(c),e;c.constructor===
Array?(f=[],e=c):e=[c];a.constructor===Array&&(a=d.mergeContexts({},a));for(var i in e){var h={},l=(new t).compact(g(a),null,e[i],h);if(Object.keys(h).length>0){var n=h,h={},m=Object.keys(n).sort(),q=void 0;for(q in m){var r=m[q];h[r]=n[r]}n=Object.keys(l);n.sort();n.unshift("@context");l["@context"]=h;var h={},F;for(F in n)m=n[F],h[m]=l[m];l=h}f===null?f=l:f.push(l)}}return f};d.mergeContexts=function(a,c){a.constructor===Array&&(a=d.mergeContexts({},a));var f=g(a);if(c.constructor===Array)for(var e in c)f=
d.mergeContexts(f,c[e]);else{for(var i in c)if(i.indexOf("@")!==0)for(var h in f)if(f[h]===c[i]){delete f[h];break}for(i in c)f[i]=g(c[i])}return f};d.expandTerm=m;d.compactIri=function(a,c){return q(a,c,null)};d.frame=function(a,c,f){return(new t).frame(a,c,f)};d.toTriples=function(a,c,f){var e=null,a=d.normalize(a),f=f||null;f===null&&(e=[],f=function(a,f,d){e.push({subject:w.lexicalFormTerm(a),predicate:w.lexicalFormTerm(f),object:w.lexicalFormTerm(d),graph:c})});var g=!1,i;for(i in a){var h=a[i],
l=h["@id"],l=l[0]=="_"?{token:"blank",value:l.split(":")[1]}:{token:"uri",value:l},n;for(n in h)if(n!=="@id"){var m=h[n];m.constructor!==Array&&(m=[m]);for(var q in m)if(g=m[q],n==="@type"||n==="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"?(n="http://www.w3.org/1999/02/22-rdf-syntax-ns#type",g={token:"uri",value:g}):typeof g==="string"?g={token:"literal",value:g}:g["@id"]!=null?g=g["@id"][0]=="_"?{token:"blank",value:g["@id"].split(":")[1]}:{token:"uri",value:g["@id"]}:g["@type"]!=null?g={token:"literal",
value:g["@literal"],type:g["@type"]}:g["@language"]!=null&&(g={token:"literal",value:g["@literal"],lang:g["@language"]}),g=f(l,{token:"uri",value:n},g)===!1)break;if(g)break}if(g)break}return e};d.resolve=function(a,c,f){var d={},e=function(a,c){if(a.constructor===Array)for(var f in a)e(a[f]);else if(a.constructor===Object)for(var g in a)if(g==="@context")if(a[g].constructor===Array){var i=a[g];for(f in i)i[f].constructor===String&&(c?i[f]=d[i[f]]:d[i[f]]={})}else a[g].constructor===String&&(c?a[g]=
d[a[g]]:d[a[g]]={})};e(a,!1);var g=Object.keys(d).length,i=null;if(g===0)f(a,i);else for(var h in d)c(h,function(c,l){--g;if(c===null)i=i||[],i.push({url:h,error:l});else try{d[h]=c.constructor===String?JSON.parse(c)["@context"]:c["@context"]}catch(n){i=i||[],i.push({url:h,error:n})}g===0&&(i===null&&e(a,!0),f(a,i))})};var t=function(){};t.prototype.compact=function(a,c,d,e){var i,n=h(a);if(d===null)i=null,this.getCoerceType(a,c,e);else if(d.constructor===Array){i=[];for(var m in d)i.push(this.compact(a,
c,d[m],e))}else if(d.constructor===Object&&"@id"in d&&d["@id"].constructor===Array)i={},i[n["@id"]]=this.compact(a,c,d["@id"],e);else if(r(d)){i={};for(var t in d)if(d[t]!=="@context"&&(n=q(a,t,e),n!==t||!(n in i)))i[n]=this.compact(a,t,d[t],e)}else{c=this.getCoerceType(a,c,e);m=null;d.constructor===Object?"@language"in d||(m="@type"in d?d["@type"]:"@id"in d?"@id":c):d.constructor===String&&(m=c);if(c===null&&(m===f["boolean"]||m===f.integer||m===f["double"]))c=m;if(c!==null)if(m===null)throw{message:"Cannot coerce type when a language is specified. The language information would be lost."};
else if(m!==c)throw new Exception({message:"Cannot coerce type because the type does not match.",type:m,expected:c});else d.constructor===Object?"@id"in d?i=d["@id"]:"@literal"in d&&(i=d["@literal"]):i=d,c===f["boolean"]?i=i==="true"||i!=0:c===f["double"]?i=parseFloat(i):c===f.integer&&(i=parseInt(i));else if(d.constructor===Object)for(t in i={},d)i[n[t]]=d[t];else i=g(d);m==="@id"&&(i.constructor===Object?i[n["@id"]]=q(a,i[n["@id"]],e):i=q(a,i,e))}return i};t.prototype.expand=function(a,c,e){var n;
if(e===null)n=null;else if(c===null&&e.constructor===String)n=m(a,e,null);else if(e.constructor===Array){n=[];for(var q in e)n.push(this.expand(a,c,e[q]))}else if(e.constructor===Object){"@context"in e&&(a=d.mergeContexts(a,e["@context"]));n={};for(var r in e)r==="@embed"||r==="@explicit"||r==="@default"||r==="@omitDefault"?i(n,r,g(e[r])):r!=="@context"&&i(n,m(a,r,null),this.expand(a,r,e[r]))}else{q=this.getCoerceType(a,c,null);n=h(a);if(q===null&&(e.constructor===Number||e.constructor===Boolean))q=
e.constructor===Boolean?f["boolean"]:(""+e).indexOf(".")==-1?f.integer:f["double"];c===n["@id"]||c===n["@type"]?n=m(a,e,null):q!==null?(n={},q==="@id"?n["@id"]=m(a,e,null):(n["@type"]=q,q===f["double"]&&(e=e.toExponential(6).replace(/(e(?:\+|-))([0-9])$/,"$10$2")),n["@literal"]=""+e)):n=""+e}return n};t.prototype.normalize=function(a){var f=[];if(a!==null){this.ng={tmp:null,c14n:null};var d=this.expand(c,null,a);this.nameBlankNodes(d);a={};O(null,null,d,a);for(var e in a){var d=a[e],g={},i=Object.keys(d).sort(),
h;for(h in i){var l=i[h];g[l]=d[l]}f.push(g)}this.canonicalizeBlankNodes(f);f.sort(function(a,c){return G(a["@id"],c["@id"])})}return f};t.prototype.getCoerceType=function(a,c,f){var d=null,c=m(a,c,null);c==="@id"||c==="@type"?d="@id":(c=q(a,c,null),c in a&&a[c].constructor===Object&&"@type"in a[c]&&(d=m(a,a[c]["@type"],f),f!==null&&(f[c]=g(a[c]))));return d};var y=function(a){return a.indexOf("_:")===0},C=function(a){return a.constructor===Object&&"@id"in a&&y(a["@id"])},G=function(a,c){var f=0;
if(a.constructor===Array&&c.constructor===Array)for(var d=0;d<a.length&&f===0;++d)f=G(a[d],c[d]);else f=a<c?-1:a>c?1:0;return f},E=function(a,c,f){var d=0;f in a?d=f in c?G(a[f],c[f]):-1:f in c&&(d=1);return d},I=function(a,c){var f=0;a.constructor===String?f=c.constructor!==String?-1:G(a,c):c.constructor===String?f=1:(f=E(a,c,"@literal"),f===0&&("@literal"in a?(f=E(a,c,"@type"),f===0&&(f=E(a,c,"@language"))):f=G(a["@id"],c["@id"])));return f},H=function(a,c){var f=0,d;for(d in a)if(d!=="@id"){f=
G(a[d].constructor===Array?a[d].length:1,c[d].constructor===Array?c[d].length:1);if(f===0){var e=a[d],g=c[d];e.constructor!==Array&&(e=[e],g=[g]);e=e.filter(function(a){return!C(a)});g=g.filter(function(a){return!C(a)});f=G(e.length,g.length)}if(f===0){e.sort(I);g.sort(I);for(var i=0;i<e.length&&f===0;++i)f=I(e[i],g[i])}if(f!==0)break}return f},M=function(a){var c=-1,f={next:function(){++c;return f.current()},current:function(){return"_:"+a+c},inNamespace:function(c){return c.indexOf("_:"+a)===0}};
return f},L=function(a,c,f){if(a!==null)if(a.constructor===Array)for(var d in a)L(a[d],c,f);else if(a.constructor===Object){"@id"in a?a["@id"].constructor==Array?L(a["@id"],c,f):r(a)&&(c[a["@id"]]=a):r(a)&&(!("@id"in a)||C(a))&&f.push(a);for(var e in a)L(a[e],c,f)}},O=function(a,c,f,d){var e=null;if(f!==null)if(f.constructor===Array)for(var i in f)O(a,c,f[i],d);else if(f.constructor===Object)if("@literal"in f||c==="@type")e=g(f);else if(f["@id"].constructor===Array){if(a!==null)throw{message:"Embedded graph literals cannot be flattened."};
for(var h in f["@id"])O(a,c,f["@id"][h],d)}else{f["@id"]in d?i=d[f["@id"]]:(i={"@id":f["@id"]},d[f["@id"]]=i);var e={"@id":i["@id"]},l;for(l in f)h=f[l],h!==null&&l!=="@id"&&(l in i?i[l].constructor!==Array&&(i[l]=[i[l]]):i[l]=[],O(i[l],l,h,d),i[l].length===1&&(i[l]=i[l][0]))}else e=f;e!==null&&a!==null&&(a.constructor===Array?(c=!1,e.constructor===Object&&"@id"in e&&(c=a.filter(function(a){return a.constructor===Object&&"@id"in a&&a["@id"]===e["@id"]}).length>0),c||a.push(e)):a[c]=e)};t.prototype.nameBlankNodes=
function(a){var c=this.ng.tmp=M("tmp"),f={},d=[];L(a,f,d);for(var e in d)if(a=d[e],!("@id"in a)){for(;c.next()in f;);a["@id"]=c.current();f[c.current()]=a}};t.prototype.renameBlankNode=function(a,c){var f=a["@id"];a["@id"]=c;var d=this.subjects;d[c]=d[f];delete d[f];this.edges.refs[c]=this.edges.refs[f];this.edges.props[c]=this.edges.props[f];delete this.edges.refs[f];delete this.edges.props[f];var e=this.edges.refs[c].all,g;for(g in e){var i=e[g].s;i===f&&(i=c);var h=d[i],l=this.edges.props[i].all,
n;for(n in l)if(l[n].s===f){l[n].s=c;var i=l[n].p,i=h[i].constructor===Object?[h[i]]:h[i].constructor===Array?h[i]:[],m;for(m in i)i[m].constructor===Object&&"@id"in i[m]&&i[m]["@id"]===f&&(i[m]["@id"]=c)}}l=this.edges.props[c].all;for(g in l){var i=l[g].s,e=this.edges.refs[i].all,q;for(q in e)if(e[q].s===f)e[q].s=c}};t.prototype.canonicalizeBlankNodes=function(a){this.renamed={};this.mappings={};this.serializations={};var c=this.edges={refs:{},props:{}},f=this.subjects={},d=[],e;for(e in a){var g=
a[e]["@id"];f[g]=a[e];c.refs[g]={all:[],bnodes:[]};c.props[g]={all:[],bnodes:[]};y(g)&&d.push(a[e])}this.collectEdges();var a=this.ng.c14n=M("c14n"),i=this.ng.tmp;for(e in d){var h=d[e],g=h["@id"];if(a.inNamespace(g)){for(;i.next()in f;);this.renameBlankNode(h,i.current());g=h["@id"]}this.serializations[g]={props:null,refs:null}}for(var i=!0,l=this;d.length>0;){i&&(i=!1,d.sort(function(a,c){return l.deepCompareBlankNodes(a,c)}));var h=d.shift(),g=h["@id"],h=["props","refs"],n;for(n in h){var m=h[n];
if(this.serializations[g][m]===null){var q={};q[g]="s1"}else q=this.serializations[g][m].m;var r=Object.keys(q);r.sort(function(a,c){return G(q[a],q[c])});var t=[];for(e in r){var F=r[e];!a.inNamespace(g)&&F in f&&(this.renameBlankNode(f[F],a.next()),t.push(F))}r=d;d=[];for(e in r){var F=r[e],w=F["@id"];if(!a.inNamespace(w)){for(var C in t)this.markSerializationDirty(w,t[C],m)&&(i=!0);d.push(F)}}}}for(var E in c.props)if(c.props[E].bnodes.length>0){var h=f[E],H;for(H in h)H.indexOf("@")!==0&&h[H].constructor===
Array&&h[H].sort(I)}};MappingBuilder=function(){this.count=1;this.processed={};this.mapping={};this.adj={};this.keyStack=[{keys:["s1"],idx:0}];this.done={};this.s=""};MappingBuilder.prototype.copy=function(){var a=new MappingBuilder;a.count=this.count;a.processed=g(this.processed);a.mapping=g(this.mapping);a.adj=g(this.adj);a.keyStack=g(this.keyStack);a.done=g(this.done);a.s=this.s;return a};MappingBuilder.prototype.mapNode=function(a){a in this.mapping||(this.mapping[a]=a.indexOf("_:c14n")===0?"c"+
a.substr(6):"s"+this.count++);return this.mapping[a]};MappingBuilder.prototype.serialize=function(a,c){if(this.keyStack.length>0)for(var f=this.keyStack.pop();f.idx<f.keys.length;++f.idx){var d=f.keys[f.idx];if(!(d in this.adj)){this.keyStack.push(f);break}if(d in this.done)this.s+="_"+d;else{this.done[d]=!0;var e=d,d=this.adj[d],g=d.i;if(g in a){var i=a[g],h="",l=!0,n=void 0;for(n in i)if(n!=="@id"){l?l=!1:h+="|";h+="<"+n+">";var m=i[n].constructor===Array?i[n]:[i[n]],q;for(q in m){var r=m[q];r.constructor===
Object?"@id"in r?h+=y(r["@id"])?"_:":"<"+r["@id"]+">":(h+='"'+r["@literal"]+'"',"@type"in r?h+="^^<"+r["@type"]+">":"@language"in r&&(h+="@"+r["@language"])):h+='"'+r+'"'}}e+="["+h+"]";i=!0;e+="[";var g=c.refs[g].all,t;for(t in g)i?i=!1:e+="|",e+="<"+g[t].p+">",e+=y(g[t].s)?"_:":"<"+g[t].s+">";e+="]"}e+=d.k.join("");this.s+=e;this.keyStack.push({keys:d.k,idx:0});this.serialize(a,c)}}};t.prototype.markSerializationDirty=function(a,c,f){var d=!1,a=this.serializations[a];a[f]!==null&&c in a[f].m&&(a[f]=
null,d=!0);return d};var P=function(a,c){var f=0;return f=a.length==c.length?G(a,c):a.length>c.length?G(a.substr(0,c.length),c):G(a,c.substr(0,a.length))};t.prototype.serializeCombos=function(a,c,f,d,e,i,h){if(h.length>0){i=g(i);i[d.mapNode(h[0].s)]=h[0].s;for(var l=d.copy(),h=h.slice(1),n=Math.max(1,h.length),m=0;m<n;++m){var q=m===0?d:l.copy();this.serializeCombos(a,c,f,q,e,i,h);h.unshift.apply(h,h.splice(1,h.length))}}else if(h=Object.keys(i).sort(),d.adj[f]={i:c,k:h,m:i},d.serialize(this.subjects,
this.edges),a[e]===null||P(d.s,a[e].s)<=0){for(l in h)this.serializeBlankNode(a,i[h[l]],d,e);d.serialize(this.subjects,this.edges);if(a[e]===null||P(d.s,a[e].s)<=0&&d.s.length>=a[e].s.length)a[e]={s:d.s,m:d.mapping}}};t.prototype.serializeBlankNode=function(a,c,f,d){if(!(c in f.processed)){f.processed[c]=!0;var e=f.mapNode(c),g=f.copy(),i=this.edges[d][c].bnodes,h={},l=[],n;for(n in i)i[n].s in f.mapping?h[f.mapping[i[n].s]]=i[n].s:l.push(i[n]);i=Math.max(1,l.length);for(n=0;n<i;++n){var m=n===0?
f:g.copy();this.serializeCombos(a,c,e,m,d,h,l)}}};t.prototype.deepCompareBlankNodes=function(a,c){var f=0,d=a["@id"],e=c["@id"];if(d===e)f=0;else if(f=this.shallowCompareBlankNodes(a,c),f===0)for(var i=["props","refs"],h=0;f===0&&h<i.length;++h){var f=i[h],l=this.serializations[d],n=this.serializations[e];if(l[f]===null){var m=new MappingBuilder;if(f==="refs")m.mapping=g(l.props.m),m.count=Object.keys(m.mapping).length+1;this.serializeBlankNode(l,d,m,f)}if(n[f]===null){m=new MappingBuilder;if(f===
"refs")m.mapping=g(n.props.m),m.count=Object.keys(m.mapping).length+1;this.serializeBlankNode(n,e,m,f)}f=G(l[f].s,n[f].s)}return f};t.prototype.shallowCompareBlankNodes=function(a,c){var f=0,d=Object.keys(a),e=Object.keys(c),f=G(d.length,e.length);f===0&&(f=G(d.sort(),e.sort()));f===0&&(f=H(a,c));if(f===0)var g=this.edges.refs[a["@id"]].all,i=this.edges.refs[c["@id"]].all,f=G(g.length,i.length);if(f===0)for(d=0;d<g.length&&f===0;++d)f=this.compareEdges(g[d],i[d]);return f};t.prototype.compareEdges=
function(a,c){var f=0,d=y(a.s),e=y(c.s),g=this.ng.c14n;d!=e?f=d?1:-1:(d||(f=G(a.s,c.s)),f===0&&(f=G(a.p,c.p)),f===0&&g!==null&&(d=g.inNamespace(a.s),g=g.inNamespace(c.s),d!=g?f=d?1:-1:d&&(f=G(a.s,c.s))));return f};t.prototype.collectEdges=function(){var a=this.edges.refs,c=this.edges.props,f;for(f in this.subjects){var d=this.subjects[f],e;for(e in d)if(e!=="@id"){var g=d[e],g=g.constructor!==Array?[g]:g,i;for(i in g){var h=g[i];h.constructor===Object&&"@id"in h&&h["@id"]in this.subjects&&(h=h["@id"],
a[h].all.push({s:f,p:e}),c[f].all.push({s:h,p:e}))}}}var l=this;for(f in a)a[f].all.sort(function(a,c){return l.compareEdges(a,c)}),a[f].bnodes=a[f].all.filter(function(a){return y(a.s)});for(f in c)c[f].all.sort(function(a,c){return l.compareEdges(a,c)}),c[f].bnodes=c[f].all.filter(function(a){return y(a.s)})};var S=function(a,c){var f=!1;if(!("@type"in c)){var d=Object.keys(c).filter(function(a){return a.indexOf("@")!==0});if(d.length===0)f=!0;else if(a.constructor===Object&&"@id"in a){var f=!0,
e;for(e in d)if(!(d[e]in a)){f=!1;break}}}return f},U=function(a,c,f,d,e,g,i,h){var l=c["@id"],n=l in d?d[l]:null;if(("@embed"in f&&f["@embed"]||!("@embed"in f)&&h.defaults.embedOn)&&(n===null||n.autoembed&&!e)){if(n===null)n={},d[l]=n;else if(n.parent!==null){if(n.parent[n.key].constructor===Array){var m=n.parent[n.key],q;for(q in m)if(m[q].constructor===Object&&"@id"in m[q]&&m[q]["@id"]===l){m[q]={"@id":c["@id"]};break}}else n.parent[n.key]={"@id":c["@id"]};var r=function(a){var c=Object.keys(d),
f;for(f in c)f=c[f],f in d&&d[f].parent!==null&&d[f].parent["@id"]===a&&(delete d[f],r(f))};r(l)}n.autoembed=e;n.parent=g;n.key=i;if(f["@explicit"]===!0||h.defaults.explicitOn)for(t in c)t!=="@id"&&!(t in f)&&delete c[t];e=Object.keys(c);for(q in e){var t=e[q];if(t.indexOf("@")!==0){t in f?(g=f[t],i=!1):(g=c[t].constructor===Array?[]:{},i=!0);var l=c[t],l=l.constructor===Array?l:[l],F;for(F in l)l[F].constructor===Object&&"@id"in l[F]&&l[F]["@id"]in a&&(l[F]=a[l[F]["@id"]]);c[t]=T(a,l,g,d,i,c,t,h)}}for(t in f)if(t.indexOf("@")!==
0&&(!(t in c)||c[t]===null))g=f[t],g.constructor===Array?c[t]=[]:(g.constructor===Array&&(g=g.length>0?g[0]:{}),g["@omitDefault"]===!0||h.defaults.omitDefaultOn||(c[t]="@default"in g?g["@default"]:null))}else c={"@id":c["@id"]};return c},T=function(a,c,f,d,e,g,i,h){var l=null,n=-1,m;f.constructor===Array?(l=[],m=f,m.length===0&&m.push({})):(m=[f],n=1);for(var q=[],t=0;t<m.length&&n!==0;++t){f=m[t];if(f.constructor!==Object)throw{message:"Invalid JSON-LD frame. Frame must be an object or an array.",
frame:f};q[t]=[];for(var w=0;w<c.length&&n!==0;++w){var y=c[w],G=!1,C="@type";if("@type"in f&&y.constructor===Object&&C in y)for(var E=y[C].constructor===Array?y[C]:[y[C]],H=f[C].constructor===Array?f[C]:[f[C]],I=0;I<H.length&&!G;++I){var C=H[I],Bb;for(Bb in E)if(E[Bb]===C){G=!0;break}}if(G||S(y,f))q[t].push(y),--n}}for(var M in q)for(var O in q[M])f=m[M],c=q[M][O],r(c)&&(c=U(a,c,f,d,e,g,i,h)),l===null?l=c:(f=c!==null&&c.constructor===Object&&"@id"in c&&Object.keys(c).length===1&&c["@id"]in d,g===
null&&f||l.push(c));return l};t.prototype.frame=function(a,c,f){var a=d.normalize(a),e=null;if("@context"in c)e=g(c["@context"]),c=d.expand(c);else if(c.constructor===Array){c.length>0&&"@context"in c[0]&&(e=g(c[0]["@context"]));var f=[],i;for(i in c)f.push(d.expand(c[i]));c=f}var f={defaults:{embedOn:!0,explicitOn:!1,omitDefaultOn:!1}},h={};for(i in a)h[a[i]["@id"]]=a[i];a=T(h,a,c,{},!1,null,null,f);e!==null&&a!==null&&(a=d.compact(e,a));return a}})();var ta={parser:{}};ta.parser.parse=function(a,
d){typeof a==="string"&&(a=JSON.parse(a));return Ga.toTriples(a,d)};var Ea={_explicituri:/^<((?:[^\x00-\x20<>\\"\{\}\|\^\`]|\\[uU])*)>/,_string:/^"[^"\\]*(?:\\.[^"\\]*)*"(?=[^"\\])|^'[^'\\]*(?:\\.[^'\\]*)*'(?=[^'\\])/,_tripleQuotedString:/^""("[^"\\]*(?:(?:\\.|"(?!""))[^"\\]*)*")""|^''('[^'\\]*(?:(?:\\.|'(?!''))[^'\\]*)*')''/,_langcode:/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,_prefix:/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\.\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=\s)/,
_qname:/^((?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\.\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?=[\s\.;,)])/,
_number:/^[\-+]?(?:\d+\.?\d*([eE](?:[\-\+])?\d+)|\d+\.\d+|\.\d+|\d+)(?=\s*[\s\.;,)])/,_boolean:/^(?:true|false)(?=\s+)/,_punctuation:/^\.(?!\d)|^;|^,|^\[|^\]|^\(|^\)/,_fastString:/^"[^"\\]+"(?=[^"\\])/,_keyword:/^(?:@[a-z]+|[Pp][Rr][Ee][Ff][Ii][Xx]|[Bb][Aa][Ss][Ee])(?=\s)/,_type:/^\^\^(?:<([^>]*)>|([A-Z_a-z\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd][\-0-9A-Z_a-z\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]*)?:([A-Z_a-z\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd][\-0-9A-Z_a-z\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]*)(?=[\s\.;,)]))/,
_shortPredicates:/^a(?=\s+|<)/,_newline:/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,_whitespace:/^[ \t]+|^#[^\n\r]*/,_nonwhitespace:/^\S*/},ib=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\[uU]|\\(.)/g,jb={"\\":"\\","'":"'",'"':'"',n:"\n",r:"\r",t:"\t",f:"\u000c",b:"\u0008",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},kb=/[\x00-\x20<>\\"\{\}\|\^\`]/,Ac={".":"dot",";":"semicolon",",":"comma","[":"bracketopen",
"]":"bracketclose","(":"liststart",")":"listend"},Bc={a:"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"};oa.prototype={constructor:oa,_next:function(a){function d(f){c=f._nonwhitespace.exec(f._input);delete f._input;a('Syntax error: unexpected "'+c[0]+'" on line '+f._line+".");return!1}if(this._input===void 0)return!1;for(var c;c=this._newline.exec(this._input);)this._line++,this._input=this._input.substr(c[0].length);if(c=this._whitespace.exec(this._input))this._input=this._input.substr(c[0].length);
var e={line:this._line,type:"",value:"",prefix:""},f;if(!this._input.length){if(!this._inputComplete)return!1;delete this._input;e.type="eof";a(null,e);return!0}if(c=this._explicituri.exec(this._input)){f=this._unescape(c[1]);if(f===null||kb.test(f))return d(this);e.type="explicituri";e.value=f}else if(c=this._punctuation.exec(this._input))e.type=Ac[c[0]];else if(this._prevTokenType==="literal"&&(c=this._langcode.exec(this._input)))e.type="langcode",e.value=c[1];else if(c=this._fastString.exec(this._input))e.type=
"literal",e.value=c[0];else if(c=this._string.exec(this._input)){f=this._unescape(c[0]);if(f===null)return d(this);e.type="literal";e.value=f.replace(/^'|'$/g,'"')}else if(c=this._tripleQuotedString.exec(this._input)){f=c[1]||c[2];this._line+=f.split(/\r\n|\r|\n/).length-1;f=this._unescape(f);if(f===null)return d(this);e.type="literal";e.value=f.replace(/^'|'$/g,'"')}else if(c=this._number.exec(this._input))e.type="literal",e.value='"'+c[0]+'"^^<http://www.w3.org/2001/XMLSchema#'+(c[1]?"double>":
/^[+\-]?\d+$/.test(c[0])?"integer>":"decimal>");else if(c=this._boolean.exec(this._input))e.type="literal",e.value='"'+c[0]+'"^^<http://www.w3.org/2001/XMLSchema#boolean>';else if(this._prevTokenType==="literal"&&(c=this._type.exec(this._input)))e.type="type",c[2]?(e.prefix=c[2],e.value=c[3]):e.value=c[1];else if(c=this._keyword.exec(this._input))f=c[0],e.type=f[0]==="@"?f:f.toUpperCase();else if((this._prevTokenType==="@prefix"||this._prevTokenType==="PREFIX")&&(c=this._prefix.exec(this._input)))e.type=
"prefix",e.value=c[1]||"";else if(c=this._qname.exec(this._input)){f=this._unescape(c[2]);if(f===null)return d(this);e.type="qname";e.prefix=c[1]||"";e.value=f}else if(c=this._shortPredicates.exec(this._input))e.type="abbreviation",e.value=Bc[c[0]];else return this._inputComplete&&d(this),!1;this._prevTokenType=e.type;this._input=this._input.substr(c[0].length);a(null,e);return!0},_unescape:function(a){try{return a.replace(ib,function(a,d,f,i){if(d){a=parseInt(d,16);if(isNaN(a))throw"invalid character code";
return String.fromCharCode(a)}else if(f){a=parseInt(f,16);if(isNaN(a))throw"invalid character code";return a<65535?String.fromCharCode(a):String.fromCharCode(Math.floor((a-65536)/1024)+55296)+String.fromCharCode((a-65536)%1024+56320)}else{a=jb[i];if(!a)throw"invalid escape sequence";return a}})}catch(d){return null}},tokenize:function(a,d){var c=this;this._line=1;typeof a==="string"?(this._input=a,this._inputComplete=!0,process.nextTick(function(){for(;c._next(d););})):(this._input="",this._inputComplete=
!1,a.setEncoding("utf8"),a.on("data",function(a){for(c._input+=a;c._next(d););}),a.on("end",function(){for(c._inputComplete=!0;c._next(d););}))}};var da={token:"uri",value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil",prefix:null,suffix:null},ua={token:"uri",value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#first",prefix:null,suffix:null},Cc={token:"uri",value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest",prefix:null,suffix:null},ga=/^[a-z]+:/,ha=/^#/,Fa=/[^\/]*$/;U.prototype={defaultGraph:null,
constructor:U,_readInTopContext:function(a){switch(a.type){case "eof":return this._callback(null,null);case "@prefix":return this._sparqlStyle=!1,this._readPrefix;case "PREFIX":return this._sparqlStyle=!0,this._readPrefix;case "@base":return this._sparqlStyle=!1,this._readBaseURI;case "BASE":return this._sparqlStyle=!0,this._readBaseURI;default:return this._readSubject(a)}},_readSubject:function(a){switch(a.type){case "explicituri":this._subject=this._baseURI===null||ga.test(a.value)?{token:"uri",
value:a.value,prefix:null,suffix:null}:{token:"uri",value:(ha.test(a.value)?this._baseURI:this._baseURIRoot)+a.value,prefix:null,suffix:null};break;case "qname":if(a.prefix==="_")this._subject=this._blankNodes[a.value]!==void 0?{blank:this._blankNodes[a.value]}:{blank:this._blankNodes[a.value]="_:"+this._blankNodeCount++};else{var d=this._prefixes[a.prefix];if(d===void 0)return this._error('Undefined prefix "'+a.prefix+':"',a);this._subject={token:"uri",value:d+a.value,prefix:null,suffix:null}}break;
case "bracketopen":return this._subject={blank:"_:"+this._blankNodeCount++},this._tripleStack.push({subject:this._subject,predicate:null,object:null,type:"blank"}),this._readBlankNodeHead;case "liststart":return this._tripleStack.push({subject:da,predicate:null,object:null,type:"list"}),this._subject=null,this._readListItem;default:return this._error('Unexpected token type "'+a.type,a)}this._subjectHasPredicate=!1;return this._readPredicate},_readPredicate:function(a){switch(a.type){case "explicituri":case "abbreviation":this._predicate=
this._baseURI===null||ga.test(a.value)?{token:"uri",value:a.value,prefix:null,suffix:null}:{token:"uri",value:(ha.test(a.value)?this._baseURI:this._baseURIRoot)+a.value,prefix:null,suffix:null};break;case "qname":if(a.prefix==="_")return this._error("Disallowed blank node as predicate",a);else{var d=this._prefixes[a.prefix];if(d===void 0)return this._error('Undefined prefix "'+a.prefix+':"',a);this._predicate={token:"uri",value:d+a.value,prefix:null,suffix:null}}break;case "bracketclose":return this._readBlankNodeTail(a,
!0);case "dot":return!this._subjectHasPredicate?this._error("Unexpected dot",a):this._readPunctuation(a,!0);case "semicolon":return this._readPredicate;default:return this._error('Expected predicate to follow "'+this._subject+'"',a)}this._subjectHasPredicate=!0;return this._readObject},_readObject:function(a){switch(a.type){case "explicituri":this._object=this._baseURI===null||ga.test(a.value)?{token:"uri",value:a.value,prefix:null,suffix:null}:{token:"uri",value:(ha.test(a.value)?this._baseURI:this._baseURIRoot)+
a.value,prefix:null,suffix:null};break;case "qname":if(a.prefix==="_")this._object=this._blankNodes[a.value]!==void 0?{blank:this._blankNodes[a.value]}:{blank:this._blankNodes[a.value]="_:"+this._blankNodeCount++};else{var d=this._prefixes[a.prefix];if(d===void 0)return this._error('Undefined prefix "'+a.prefix+':"',a);this._object={token:"uri",value:d+a.value,prefix:null,suffix:null}}break;case "literal":return this._object={literal:a.value},this._readDataTypeOrLang;case "bracketopen":return a={blank:"_:"+
this._blankNodeCount++},this._tripleStack.push({subject:this._subject,predicate:this._predicate,object:a,type:"blank"}),this._subject=a,this._readBlankNodeHead;case "liststart":return this._tripleStack.push({subject:this._subject,predicate:this._predicate,object:da,type:"list"}),this._subject=null,this._readListItem;default:return this._error('Expected object to follow "'+this._predicate+'"',a)}return this._getNextReader()},_readBlankNodeHead:function(a){return a.type==="bracketclose"?this._readBlankNodeTail(a,
!0):this._readPredicate(a)},_readBlankNodeTail:function(a,d){if(a.type!=="bracketclose")return this._readPunctuation(a);d!==!0&&this._callback(null,{subject:this._subject,predicate:this._predicate,object:this._object,graph:U.prototype.defaultGraph});var c=this._tripleStack.pop();this._subject=c.subject;return c.object!==null?(this._predicate=c.predicate,this._object=c.object,this._getNextReader()):this._readPredicate},_readDataTypeOrLang:function(a){switch(a.type){case "type":if(a.prefix==="")a=a.value;
else{var d=this._prefixes[a.prefix];if(d===void 0)return this._error('Undefined prefix "'+a.prefix+':"',a);a=d+a.value}this._object.literal?this._object.literal+="^^<"+a+">":(this._object+="^^<"+a+">",this._object={literal:this._object});return this._readPunctuation;case "langcode":return this._object.literal?this._object.literal+="@"+a.value.toLowerCase():(this._object+="@"+a.value.toLowerCase(),this._object={literal:this._object}),this._getNextReader();default:return this._getNextReader().call(this,
a)}},_readListItem:function(a){var d=null,c=null,e=this._subject,f=this._tripleStack,i=f[f.length-1],g=this._readListItem;switch(a.type){case "explicituri":d={token:"uri",value:a.value,prefix:null,suffix:null};break;case "qname":if(a.prefix==="_")d=this._blankNodes[a.value]||(this._blankNodes[a.value]={blank:"_:"+this._blankNodeCount++});else{d=this._prefixes[a.prefix];if(d===void 0)return this._error('Undefined prefix "'+a.prefix+':"',a);d={token:"uri",value:d+a.value,prefix:null,suffix:null}}break;
case "literal":d={literal:a.value};g=this._readDataTypeOrLang;break;case "bracketopen":c={blank:"_:"+this._blankNodeCount++};d={blank:"_:"+this._blankNodeCount++};f.push({subject:c,predicate:ua,object:d,type:"blank"});this._subject=d;g=this._readBlankNodeHead;break;case "liststart":c={blank:"_:"+this._blankNodeCount++};f.push({subject:c,predicate:ua,object:da,type:"list"});this._subject=null;g=this._readListItem;break;case "listend":f.pop();f.length!==0&&f[f.length-1].type==="list"&&this._callback(null,
{subject:i.subject,predicate:i.predicate,object:i.object,graph:U.prototype.defaultGraph});this._subject=typeof i.subject==="string"?{token:"uri",value:i.subject,prefix:null,suffix:null}:i.subject;if(i.predicate===null){if(g=this._readPredicate,i.subject===da)return g}else if(this._predicate=typeof i.predicate==="string"?{token:"uri",value:i.predicate,prefix:null,suffix:null}:i.predicate,this._object=typeof i.object==="string"?{token:"uri",value:i.object,prefix:null,suffix:null}:i.object,g=this._getNextReader(),
i.object===da)return g;c=da;break;default:return this._error('Expected list item instead of "'+a.type+'"',a)}if(c===null)this._subject=c={blank:"_:"+this._blankNodeCount++};e===null?i.object===da?i.object=c:i.subject=c:this._callback(null,{subject:e,predicate:Cc,object:c,graph:U.prototype.defaultGraph});d!==null&&this._callback(null,{subject:c,predicate:ua,object:d,graph:U.prototype.defaultGraph});return g},_readPunctuation:function(a,d){var c;switch(a.type){case "dot":c=this._readInTopContext;break;
case "semicolon":c=this._readPredicate;break;case "comma":c=this._readObject;break;default:return this._error('Expected punctuation to follow "'+this._object+'"',a)}d||this._callback(null,{subject:this._subject,predicate:this._predicate,object:this._object,graph:U.prototype.defaultGraph});return c},_readPrefix:function(a){if(a.type!=="prefix")return this._error("Expected prefix to follow @prefix",a);this._prefix=a.value;return this._readPrefixURI},_readPrefixURI:function(a){if(a.type!=="explicituri")return this._error('Expected explicituri to follow prefix "'+
this.prefix+'"',a);this._prefixes[this._prefix]=this._baseURI===null||ga.test(a.value)?a.value:(ha.test(a.value)?this._baseURI:this._baseURIRoot)+a.value;return this._readDeclarationPunctuation},_readBaseURI:function(a){if(a.type!=="explicituri")return this._error("Expected explicituri to follow base declaration",a);this._baseURI=this._baseURI===null||ga.test(a.value)?a.value:(ha.test(a.value)?this._baseURI:this._baseURIRoot)+a.value;this._baseURIRoot=this._baseURI.replace(Fa,"");return this._readDeclarationPunctuation},
_readDeclarationPunctuation:function(a){return this._sparqlStyle?this._readInTopContext(a):a.type!=="dot"?this._error("Expected declaration to end with a dot",a):this._readInTopContext},_getNextReader:function(){var a=this._tripleStack;if(a.length===0)return this._readPunctuation;switch(a[a.length-1].type){case "blank":return this._readBlankNodeTail;case "list":return this._readListItem}},_error:function(a,d){this._callback(a+" at line "+d.line+".")},parse:function(a,d){var c=this;this._prefixes=
Object.create(null);this._callback=d;this._readCallback=this._readInTopContext;this._lexer.tokenize(a,function(a,f){if(a!==null&&c._readCallback===void 0)c._callback(a);else if(c._readCallback!==void 0)a!==null?c._callback(a):c._readCallback=c._readCallback(f)})}};var na={parser:{}};na.parser.async=!0;na.parser.parse=function(){var a=new U,d=arguments[0],c=arguments[1],e=arguments[2];arguments.length===2?(c=null,e=arguments[1]):arguments.length!==3&&e(!1,"Wrong number of arguments, 2, 3 args required");
c&&typeof c==="string"&&(c={token:"uri",value:c,prefix:null,suffix:null});U.prototype.defaultGraph=c;var f=[];a.parse(d,function(a,c){a?e(!1,a):c?f.push(c):e(!0,f)})};var Dc=function(){var a=function(a,c){var d=c.indexOf("#");d>0&&(c=c.slice(0,d));if(a.length==0)return c;if(a.indexOf("#")==0)return c+a;if(a.indexOf(":")>=0)return a;var g=c.indexOf(":");if(c=="")return a;if(g<0)throw"Invalid Base URI";d=c.slice(0,g+1);if(a.indexOf("//")==0)return d+a;if(c.indexOf("//",g)==g+1){var h=c.indexOf("/",
g+3);if(h<0)return c.length-g-3>0?c+"/"+a:d+a}else if(h=c.indexOf("/",g+1),h<0)return c.length-g-1>0?c+"/"+a:d+a;if(a.indexOf("/")==0)return c.slice(0,h)+a;var g=c.slice(h),n=g.lastIndexOf("/");if(n<0)return d+a;n>=0&&n<g.length-1&&(g=g.slice(0,n+1));for(g+=a;g.match(/[^\/]*\/\.\.\//);)g=g.replace(/[^\/]*\/\.\.\//,"");g=g.replace(/\.\//g,"");g=g.replace(/\/\.$/,"/");return c.slice(0,h)+g},d=function(c){var f={ns:{RDF:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",RDFS:"http://www.w3.org/2000/01/rdf-schema#"},
nodeType:{ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12}};this.frameFactory=function(c,d,e){return{NODE:1,ARC:2,parent:d,parser:c,store:c.store,element:e,lastChild:0,base:null,lang:null,node:null,nodeType:null,listIndex:1,rdfid:null,datatype:null,collection:!1,terminateFrame:function(){this.collection&&this.node.close()},addSymbol:function(c,f){f=a(f,this.base);this.node=this.store.sym(f);
this.nodeType=c},loadTriple:function(){this.parent.parent.collection?this.parent.parent.node.append(this.node):this.store.add(this.parent.parent.node,this.parent.node,this.node,this.parser.why);if(this.parent.rdfid!=null){var c=this.store.sym(a("#"+this.parent.rdfid,this.base));this.store.add(c,this.store.sym(f.ns.RDF+"type"),this.store.sym(f.ns.RDF+"Statement"),this.parser.why);this.store.add(c,this.store.sym(f.ns.RDF+"subject"),this.parent.parent.node,this.parser.why);this.store.add(c,this.store.sym(f.ns.RDF+
"predicate"),this.parent.node,this.parser.why);this.store.add(c,this.store.sym(f.ns.RDF+"object"),this.node,this.parser.why)}},isTripleToLoad:function(){return this.parent!=null&&this.parent.parent!=null&&this.nodeType==this.NODE&&this.parent.nodeType==this.ARC&&this.parent.parent.nodeType==this.NODE},addNode:function(a){this.addSymbol(this.NODE,a);this.isTripleToLoad()&&this.loadTriple()},addCollection:function(){this.nodeType=this.NODE;this.node=this.store.collection();this.collection=!0;this.isTripleToLoad()&&
this.loadTriple()},addCollectionArc:function(){this.nodeType=this.ARC},addBNode:function(a){this.node=a!=null?this.parser.bnodes[a]!=null?this.parser.bnodes[a]:this.parser.bnodes[a]=this.store.bnode():this.store.bnode();this.nodeType=this.NODE;this.isTripleToLoad()&&this.loadTriple()},addArc:function(a){a==f.ns.RDF+"li"&&(a=f.ns.RDF+"_"+this.parent.listIndex++);this.addSymbol(this.ARC,a)},addLiteral:function(a){this.node=this.parent.datatype?this.store.literal(a,"",this.store.sym(this.parent.datatype)):
this.store.literal(a,this.lang);this.nodeType=this.NODE;this.isTripleToLoad()&&this.loadTriple()}}};this.getAttributeNodeNS=function(a,c,f){var d=null;if(a.getAttributeNodeNS)d=a.getAttributeNodeNS(c,f);else for(var a=a.attributes,e,h,r=0;r<a.length;++r)if(e=a[r],e.namespaceURI==c&&(h=e.prefix?e.prefix+":"+f:f,h==e.nodeName)){d=e;break}return d};this.store=c;this.bnodes={};this.why=null;this.reify=!1;this.parse=function(a,c,d){var e=a.childNodes;this.cleanParser();if(a.nodeType==f.nodeType.DOCUMENT)for(a=
0;a<e.length;a++){if(e[a].nodeType==f.nodeType.ELEMENT){var h=e[a];break}}else if(a.nodeType==f.nodeType.ELEMENT)h=a;else throw Error("RDFParser: can't find root in "+c+". Halting. ");this.why=d;d=this.frameFactory(this);this.base=c;d.base=c;d.lang="";this.parseDOM(this.buildFrame(d,h));return!0};this.parseDOM=function(c){for(var d=function(a){var c="";a.namespaceURI&&(c+=a.namespaceURI);a.localName?c+=a.localName:a.nodeName&&(c+=a.nodeName.indexOf(":")>=0?a.nodeName.split(":")[1]:a.nodeName);return c},
e=!0;c.parent;){var h=c.element,q=h.attributes;if(h.nodeType==f.nodeType.TEXT||h.nodeType==f.nodeType.CDATA_SECTION)c.addLiteral(h.nodeValue);else if(d(h)!=f.ns.RDF+"RDF"){if(c.parent&&c.parent.collection)c.addCollectionArc(),c=this.buildFrame(c,c.element),c.parent.element=null;if(!c.parent||!c.parent.nodeType||c.parent.nodeType==c.ARC){var m=this.getAttributeNodeNS(h,f.ns.RDF,"about"),r=this.getAttributeNodeNS(h,f.ns.RDF,"ID");if(m&&r)throw Error("RDFParser: "+h.nodeName+" has both rdf:id and rdf:about. Halting. Only one of these properties may be specified on a node.");
m==null&&r?(c.addNode("#"+r.nodeValue),h.removeAttributeNode(r)):m==null&&r==null?(m=this.getAttributeNodeNS(h,f.ns.RDF,"nodeID"))?(c.addBNode(m.nodeValue),h.removeAttributeNode(m)):c.addBNode():(c.addNode(m.nodeValue),h.removeAttributeNode(m));m=this.getAttributeNodeNS(h,f.ns.RDF,"type");f.ns.RDF+"Description"!=d(h)&&(m={nodeValue:d(h)});m!=null&&(this.store.add(c.node,this.store.sym(f.ns.RDF+"type"),this.store.sym(a(m.nodeValue,c.base)),this.why),m.nodeName&&h.removeAttributeNode(m));for(h=q.length-
1;h>=0;h--)this.store.add(c.node,this.store.sym(d(q[h])),this.store.literal(q[h].nodeValue,c.lang),this.why)}else{c.addArc(d(h));if(this.reify&&(r=this.getAttributeNodeNS(h,f.ns.RDF,"ID")))c.rdfid=r.nodeValue,h.removeAttributeNode(r);m=this.getAttributeNodeNS(h,f.ns.RDF,"parseType");if(r=this.getAttributeNodeNS(h,f.ns.RDF,"datatype"))c.datatype=r.nodeValue,h.removeAttributeNode(r);if(m){r=m.nodeValue;if(r=="Literal")c.datatype=f.ns.RDF+"XMLLiteral",c=this.buildFrame(c),c.addLiteral(h),e=!1;else if(r==
"Resource")c=this.buildFrame(c,c.element),c.parent.element=null,c.addBNode();else if(r=="Collection")c=this.buildFrame(c,c.element),c.parent.element=null,c.addCollection();h.removeAttributeNode(m)}if(q.length!=0){r=this.getAttributeNodeNS(h,f.ns.RDF,"resource");m=this.getAttributeNodeNS(h,f.ns.RDF,"nodeID");c=this.buildFrame(c);r?(c.addNode(r.nodeValue),h.removeAttributeNode(r)):m?(c.addBNode(m.nodeValue),h.removeAttributeNode(m)):c.addBNode();for(h=q.length-1;h>=0;h--)m=this.buildFrame(c),m.addArc(d(q[h])),
d(q[h])==f.ns.RDF+"type"?this.buildFrame(m).addNode(q[h].nodeValue):this.buildFrame(m).addLiteral(q[h].nodeValue)}else h.childNodes.length==0&&this.buildFrame(c).addLiteral("")}}for(h=c.element;c.parent;){for(q=c;h==null;)c=c.parent,h=c.element;m=h.childNodes[c.lastChild];if(m==null||!e){c.terminateFrame();if(!(c=c.parent))break;h=c.element;e=!0}else if(m.nodeType!=f.nodeType.ELEMENT&&m.nodeType!=f.nodeType.TEXT&&m.nodeType!=f.nodeType.CDATA_SECTION||(m.nodeType==f.nodeType.TEXT||m.nodeType==f.nodeType.CDATA_SECTION)&&
h.childNodes.length!=1)c.lastChild++;else{c.lastChild++;c=this.buildFrame(q,h.childNodes[c.lastChild-1]);break}}}};this.cleanParser=function(){this.bnodes={};this.why=null};this.buildFrame=function(c,d){var e=this.frameFactory(this,c,d);if(c)e.base=c.base,e.lang=c.lang;if(d==null||d.nodeType==f.nodeType.TEXT||d.nodeType==f.nodeType.CDATA_SECTION)return e;var h=d.attributes,q=d.getAttributeNode("xml:base");if(q!=null)e.base=q.nodeValue,d.removeAttribute("xml:base");q=d.getAttributeNode("xml:lang");
if(q!=null)e.lang=q.nodeValue,d.removeAttribute("xml:lang");for(q=h.length-1;q>=0;q--)if(h[q].nodeName.substr(0,3)=="xml"){if(h[q].name.slice(0,6)=="xmlns:"){var m=h[q].nodeValue;this.base&&(m=a(m,this.base));this.store.setPrefixForURI(h[q].name.slice(6),m)}d.removeAttributeNode(h[q])}return e}},c=function(a){this.statements=[];this.namespaces={};this.add=function(c,f,d){this.statements.push({subject:c,predicate:f,object:d,graph:a})};this.sym=function(a){return{token:"uri",value:a}};this.literal=
function(a,c,f){a=a.replace(/\\/g,"\\\\");a=a.replace(/\"/g,'\\"');a=a.replace(/\n/g,"\\n");a='"'+a+'"';f&&(a=a+"^^"+f);c&&(a=a+"@"+c);return{literal:a}};var c=0;this.bnode=function(a){a=a||"_:bnid"+c++;return{blank:a}};this.setPrefixForURI=function(a,c){if(this.namespaces[a]||c!==c)throw"Can't redefine prefix "+a;this.namespaces[a]=c}};return{parse:function(a,f){var i=a;if(typeof a==="string"||Object.prototype.toString.call(a)==="[object String]"){var g;if(typeof module!="undefined")throw"rdfxml parsing not supported in nodejs.";
else if(window.DOMParser)i=new DOMParser,g=i.parseFromString(a,"text/xml");else if(window.ActiveXObject)g=new ActiveXObject("Microsoft.XMLDOM"),g.async="false",g.loadXML(a);i=g}g=new c(f);(new d(g)).parse(i,"http://nobase");return g.statements}}}(),pa={parser:{}};pa.parser.parse=function(a,d){try{return Dc.parse(a,d)}catch(c){throw c;}};var ea={RDFLoader:function(a){this.precedences=["text/turtle","text/n3","application/ld+json","application/json","application/rdf+xml"];this.parsers={"text/turtle":na.parser,
"text/n3":na.parser,"application/ld+json":ta.parser,"application/json":ta.parser,"application/rdf+xml":pa.parser,"text/xml":pa.parser,"application/xml":pa.parser};if(a!=null)for(var d in a.parsers)this.parsers[d]=a.parsers[d];if(a&&a.precedences!=null)for(d in this.precedences=a.precedences,a.parsers)w.include(this.precedences,d)||this.precedences.push(d);this.acceptHeaderValue="";for(a=0;a<this.precedences.length;a++)a!=0?this.acceptHeaderValue=this.acceptHeaderValue+","+this.precedences[a]:this.acceptHeaderValue+=
this.precedences[a]}};ea.RDFLoader.prototype.registerParser=function(a,d){this.parsers[a]=d;this.precedences.push(a)};ea.RDFLoader.prototype.unregisterParser=function(a){delete this.parsers[a];for(var d=[],c=0;c<this.precedences.length;c++)this.precedences[c]!=a&&d.push(this.precedences[c]);this.precedences=d};ea.RDFLoader.prototype.setAcceptHeaderPrecedence=function(a){this.precedences=a};ea.RDFLoader.prototype.load=function(a,d,c){var e=this;T.load(a,this.acceptHeaderValue,function(f,i){if(f==!0){var g=
i.headers["Content-Type"]||i.headers["content-type"],h=i.data;if(g!=null){var g=g.split(";")[0],n;for(n in e.parsers)if(n.indexOf("/")!=-1){var q=n.split("/");if(q[1]==="*"){if(g.indexOf(q[0])!=-1)return e.tryToParse(e.parsers[n],d,h,c)}else if(g.indexOf(n)!=-1)return e.tryToParse(e.parsers[n],d,h,c);else if(g.indexOf(q[1])!=-1)return e.tryToParse(e.parsers[n],d,h,c)}else if(g.indexOf(n)!=-1)return e.tryToParse(e.parsers[n],a,d,c);c(!1,"Unknown media type : "+g)}else console.log("Unknown media type"),
console.log(i.headers),c(!1,"Uknown media type")}else c(!1,"Network error: "+i)})};ea.RDFLoader.prototype.loadFromFile=function(a,d,c,e){try{var f=this;require("fs").readFile(c.split("file:/")[1],function(c,i){if(c)throw c;i=i.toString("utf8");f.tryToParse(a,d,i,e)})}catch(i){e(!1,i)}};ea.RDFLoader.prototype.tryToParse=function(a,d,c,e){try{if(typeof c==="string"&&(c=w.normalizeUnicodeLiterals(c)),a.async)a.parse(c,d,e);else{var f=a.parse(c,d);f!=null?e(!0,f):e(!1,"parsing error")}}catch(i){console.log(i.message),
console.log(i.stack),e(!1,"parsing error with mime type : "+i)}};var P={AbstractQueryTree:function(){}};P.AbstractQueryTree.prototype.parseQueryString=function(a){return va.parser.parse(a)};P.AbstractQueryTree.prototype.parseExecutableUnit=function(a){if(a.kind==="select")return this.parseSelect(a);else if(a.kind==="ask")return this.parseSelect(a);else if(a.kind==="modify")return this.parseSelect(a);else if(a.kind==="construct")return this.parseSelect(a);else if(a.kind==="insertdata")return this.parseInsertData(a);
else if(a.kind==="deletedata")return this.parseInsertData(a);else if(a.kind==="load")return a;else if(a.kind==="clear")return a;else if(a.kind==="drop")return a;else if(a.kind==="create")return a;else throw Error("unknown executable unit: "+a.kind);};P.AbstractQueryTree.prototype.parseSelect=function(a){return a==null?(console.log("error parsing query"),null):(a.pattern=this.build(a.pattern,{freshCounter:0}),a)};P.AbstractQueryTree.prototype.parseInsertData=function(a){return a==null?(console.log("error parsing query"),
null):a};P.AbstractQueryTree.prototype.build=function(a,d){if(a.token==="groupgraphpattern")return this._buildGroupGraphPattern(a,d);else if(a.token==="basicgraphpattern"){var c={kind:"BGP",value:a.triplesContext};return c=P.translatePathExpressionsInBGP(c,d)}else if(a.token==="graphunionpattern"){var c=this.build(a.value[0],d),e=this.build(a.value[1],d);return{kind:"UNION",value:[c,e]}}else if(a.token==="graphgraphpattern")return{kind:"GRAPH",value:this.build(a.value,d),graph:a.graph};else throw Error("not supported token in query:"+
a.token);};P.translatePathExpressionsInBGP=function(a,d){var c,e=[],f,i;for(i=0;i<a.value.length;i++)if(a.value[i].predicate&&a.value[i].predicate.token==="path"){c=a.value[i];f=a.value.slice(i+1);var g=P.translatePathExpression(c,d);c=null;if(g.kind==="BGP")e=e.concat(g.value);else if(g.kind==="ZERO_OR_MORE_PATH"||g.kind==="ONE_OR_MORE_PATH"){i=e.length>0?{kind:"JOIN",lvalue:{kind:"BGP",value:e},rvalue:g}:g;if(g.kind==="ZERO_OR_MORE_PATH")if(g.y.token==="var"&&g.y.value.indexOf("fresh:")===0&&g.x.token===
"var"&&g.x.value.indexOf("fresh:")===0)for(var h=0;h<a.value.length;h++){if(a.value[h].object&&a.value[h].object.token==="var"&&a.value[h].object.value===g.x.value)c=w.clone(a.value[h]),c.object=g.y}else if(g.y.token==="var"&&g.y.value.indexOf("fresh:")===0)for(h=0;h<a.value.length;h++)if(a.value[h].subject&&a.value[h].subject.token==="var"&&a.value[h].subject.value===g.y.value)c=w.clone(a.value[h]),c.subject=g.x;return f.length>0?(g=P.translatePathExpressionsInBGP({kind:"BGP",value:f},d),c!=null?
(e=e.concat([c]).concat(f),{kind:"UNION",value:[{kind:"JOIN",lvalue:i,rvalue:g},{kind:"BGP",value:e}]}):{kind:"JOIN",lvalue:i,rvalue:g}):i}else return g}else e.push(a.value[i]);a.value=e;return a};P.translatePathExpression=function(a,d){if(a.predicate.kind==="element")if(a.predicate.modifier==="+"){a.predicate.modifier=null;var c=P.translatePathExpression(a,d);return{kind:"ONE_OR_MORE_PATH",path:c,x:a.subject,y:a.object}}else return a.predicate.modifier==="*"?(a.predicate.modifier=null,c=P.translatePathExpression(a,
d),{kind:"ZERO_OR_MORE_PATH",path:c,x:a.subject,y:a.object}):(a.predicate=a.predicate.value,{kind:"BGP",value:[a]});else if(a.predicate.kind==="sequence"){for(var c=a.subject,e=a.object,f=a.graph,i,g,h=[],n=0;n<a.predicate.value.length;n++){n!=a.predicate.value.length-1?(i={token:"var",value:"fresh:"+d.freshCounter},d.freshCounter++):i=e;g={subject:c,predicate:a.predicate.value[n],object:i};if(f!=null)g.graph=w.clone(f);h.push(g);n!=a.predicate.value.length-1&&(c=w.clone(i))}return P.translatePathExpressionsInBGP({kind:"BGP",
value:h},d)}};P.AbstractQueryTree.prototype._buildGroupGraphPattern=function(a,d){for(var c=a.filters||[],e={kind:"EMPTY_PATTERN"},f=0;f<a.patterns.length;f++){var i=a.patterns[f];i.token==="optionalgraphpattern"?(i=this.build(i.value,d),e=i.kind==="FILTER"?{kind:"LEFT_JOIN",lvalue:e,rvalue:i.value,filter:i.filter}:{kind:"LEFT_JOIN",lvalue:e,rvalue:i,filter:!0}):(i=this.build(i,d),e=e.kind=="EMPTY_PATTERN"?i:{kind:"JOIN",lvalue:e,rvalue:i})}if(c.length!=0)if(e.kind==="EMPTY_PATTERN")return{kind:"FILTER",
filter:c,value:e};else if(e.kind==="LEFT_JOIN"&&e.filter===!0)return{kind:"FILTER",filter:c,value:e};else if(e.kind==="LEFT_JOIN")return{kind:"FILTER",filter:c,value:e};else if(e.kind==="JOIN")return{kind:"FILTER",filter:c,value:e};else if(e.kind==="UNION")return{kind:"FILTER",filter:c,value:e};else if(e.kind==="GRAPH")return{kind:"FILTER",filter:c,value:e};else if(e.kind==="BGP")return{kind:"FILTER",filter:c,value:e};else throw Error("Unknow kind of algebra expression: "+e.kind);else return e};P.AbstractQueryTree.prototype.collectBasicTriples=
function(a,d){d==null&&(d=[]);if(a.kind==="select")d=this.collectBasicTriples(a.pattern,d);else if(a.kind==="BGP")d=d.concat(a.value);else if(a.kind==="ZERO_OR_MORE_PATH")d=this.collectBasicTriples(a.path);else if(a.kind==="UNION")d=this.collectBasicTriples(a.value[0],d),d=this.collectBasicTriples(a.value[1],d);else if(a.kind==="GRAPH")d=this.collectBasicTriples(a.value,d);else if(a.kind==="LEFT_JOIN"||a.kind==="JOIN")d=this.collectBasicTriples(a.lvalue,d),d=this.collectBasicTriples(a.rvalue,d);else if(a.kind===
"FILTER")d=this.collectBasicTriples(a.value,d);else if(a.kind==="construct")d=this.collectBasicTriples(a.pattern,d);else if(a.kind!=="EMPTY_PATTERN")throw"Unknown pattern: "+a.kind;return d};P.AbstractQueryTree.prototype.bind=function(a,d){if(a.graph!=null&&a.graph.token&&a.graph.token==="var"&&d[a.graph.value]!=null)a.graph=d[a.graph.value];if(a.filter!=null){for(var c=[],e=0;e<a.filter.length;e++)a.filter[e].value=this._bindFilter(a.filter[e].value,d),c.push(a.filter[e]);a.filter=c}if(a.kind===
"select")a.pattern=this.bind(a.pattern,d);else if(a.kind==="BGP")a.value=this._bindTripleContext(a.value,d);else if(a.kind==="ZERO_OR_MORE_PATH"){a.path=this._bindTripleContext(a.path,d);if(a.x&&a.x.token==="var"&&d[a.x.value]!=null)a.x=d[a.x.value];if(a.y&&a.y.token==="var"&&d[a.y.value]!=null)a.y=d[a.y.value]}else if(a.kind==="UNION")a.value[0]=this.bind(a.value[0],d),a.value[1]=this.bind(a.value[1],d);else if(a.kind==="GRAPH")a.value=this.bind(a.value,d);else if(a.kind==="LEFT_JOIN"||a.kind===
"JOIN")a.lvalue=this.bind(a.lvalue,d),a.rvalue=this.bind(a.rvalue,d);else if(a.kind==="FILTER")a.filter=this._bindFilter(a.filter[e].value,d);else if(a.kind!=="EMPTY_PATTERN")throw"Unknown pattern: "+a.kind;return a};P.AbstractQueryTree.prototype._bindTripleContext=function(a,d){for(var c=0;c<a.length;c++){delete a[c].graph;delete a[c].variables;for(var e in a[c]){var f=a[c][e];f.token==="var"&&d[f.value]!=null&&(a[c][e]=d[f.value])}}return a};P.AbstractQueryTree.prototype._bindFilter=function(a,
d){if(a.expressionType!=null){var c=a.expressionType;if(c=="relationalexpression")a.op1=this._bindFilter(a.op1,d),a.op2=this._bindFilter(a.op2,d);else if(c=="conditionalor"||c=="conditionaland")for(c=0;c<a.operands.length;c++)a.operands[c]=this._bindFilter(a.operands[c],d);else if(c=="additiveexpression"){a.summand=this._bindFilter(a.summand,d);for(c=0;c<a.summands.length;c++)a.summands[c].expression=this._bindFilter(a.summands[c].expression,d)}else if(c=="builtincall")for(c=0;c<a.args.length;c++)a.args[c]=
this._bindFilter(a.args[c],d);else if(c=="multiplicativeexpression"){a.factor=this._bindFilter(a.factor,d);for(c=0;c<a.factors.length;c++)a.factors[c].expression=this._bindFilter(a.factors[c].expression,d)}else if(c=="unaryexpression")a.expression=this._bindFilter(a.expression,d);else if(c=="irireforfunction")for(c=0;c<a.factors.args;c++)a.args[c]=this._bindFilter(a.args[c],d);else if(c=="atomic"&&a.primaryexpression=="var"&&d[a.value.value]!=null)c=d[a.value.value],a.primaryexpression=c.token===
"uri"?"iri":"literal",a.value=c}return a};P.AbstractQueryTree.prototype.replace=function(a,d,c,e){if(a.graph!=null&&a.graph.token&&a.graph.token===d.token&&a.graph.value==d.value)a.graph=w.clone(c);if(a.filter!=null){for(var f=[],i=0;i<a.filter.length;i++)a.filter[i].value=this._replaceFilter(a.filter[i].value,d,c,e),f.push(a.filter[i]);a.filter=f}if(a.kind==="select")a.pattern=this.replace(a.pattern,d,c,e);else if(a.kind==="BGP")a.value=this._replaceTripleContext(a.value,d,c,e);else if(a.kind===
"ZERO_OR_MORE_PATH"){a.path=this._replaceTripleContext(a.path,d,c,e);if(a.x&&a.x.token===d.token&&a.value===d.value)a.x=w.clone(c);if(a.y&&a.y.token===d.token&&a.value===d.value)a.y=w.clone(c)}else if(a.kind==="UNION")a.value[0]=this.replace(a.value[0],d,c,e),a.value[1]=this.replace(a.value[1],d,c,e);else if(a.kind==="GRAPH")a.value=this.replace(a.value,d,c);else if(a.kind==="LEFT_JOIN"||a.kind==="JOIN")a.lvalue=this.replace(a.lvalue,d,c,e),a.rvalue=this.replace(a.rvalue,d,c,e);else if(a.kind==="FILTER")a.value=
this._replaceFilter(a.value,d,c,e);else if(a.kind!=="EMPTY_PATTERN")throw"Unknown pattern: "+a.kind;return a};P.AbstractQueryTree.prototype._replaceTripleContext=function(a,d,c,e){for(var f=0;f<a.length;f++)for(var i in a[f]){var g=a[f][i];if(g.token==="var"&&d.token==="var"&&g.value===d.value)a[f][i]=c;else if(g.token==="blank"&&d.token==="blank"&&g.value===d.value)a[f][i]=c;else if((g.token==="literal"||g.token==="uri")&&(d.token==="literal"||d.token==="uri")&&g.token===d.token&&w.lexicalFormTerm(g,
e)[g.token]===w.lexicalFormTerm(d,e)[g.token])a[f][i]=c}return a};P.AbstractQueryTree.prototype._replaceFilter=function(a,d,c,e){if(a.expressionType!=null){var f=a.expressionType;if(f=="relationalexpression")a.op1=this._replaceFilter(a.op1,d,c,e),a.op2=this._replaceFilter(a.op2,d,c,e);else if(f=="conditionalor"||f=="conditionaland")for(f=0;f<a.operands.length;f++)a.operands[f]=this._replaceFilter(a.operands[f],d,c,e);else if(f=="additiveexpression"){a.summand=this._replaceFilter(a.summand,d,c,e);
for(f=0;f<a.summands.length;f++)a.summands[f].expression=this._replaceFilter(a.summands[f].expression,d,c,e)}else if(f=="builtincall")for(f=0;f<a.args.length;f++)a.args[f]=this._replaceFilter(a.args[f],d,c,e);else if(f=="multiplicativeexpression"){a.factor=this._replaceFilter(a.factor,d,c,e);for(f=0;f<a.factors.length;f++)a.factors[f].expression=this._replaceFilter(a.factors[f].expression,d,c,e)}else if(f=="unaryexpression")a.expression=this._replaceFilter(a.expression,d,c,e);else if(f=="irireforfunction")for(f=
0;f<a.factors.args;f++)a.args[f]=this._replaceFilter(a.args[f],d,c,e);else if(f=="atomic"){e=null;if(a.primaryexpression==d.token&&a.value==d.value)e=c.value;else if(a.primaryexpression=="iri"&&d.token=="uri"&&a.value==d.value)e=c.value;if(e!=null)a.primaryexpression=c.token==="uri"?"iri":c.token,a.value=e}}return a};P.AbstractQueryTree.prototype.treeWithUnion=function(a){if(a==null)return!1;if(a.kind==null)return!1;if(a.kind==="select")return this.treeWithUnion(a.pattern);else if(a.kind==="BGP")return this.treeWithUnion(a.value);
else if(a.kind==="ZERO_OR_MORE_PATH")return!1;else if(a.kind==="UNION")if(a.value[0].value!=null&&a.value[0].value.variables!=null&&a.value[1].value!=null&&a.value[1].value.variables!=null){if(a.value[0].variables.join("/")===a.values[1].variables.join("/"))return this.treeWithUnion(a.value[0])?!0:this.treeWithUnion(a.value[1])}else return!0;else if(a.kind==="GRAPH")return!1;else if(a.kind==="LEFT_JOIN"||a.kind==="JOIN")if(this.treeWithUnion(a.lvalue))return!0;else this.treeWithUnion(a.rvalue);else return!1};
var va={};va.parser=function(){function a(a){return'"'+a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}var d={parse:function(c,d){function f(k){b<Ia||(b>Ia&&(Ia=b,lb=[]),lb.push(k))}function i(){var b;b=g();b===null&&(b=na());return b}function g(){var k,a,c,d;j++;d=c=b;k=h();k!==null?(a=G(),a===null&&(a=I(),a===null&&(a=M(),a===null&&(a=
L()))),a!==null?k=[k,a]:(k=null,b=d)):(k=null,b=d);k!==null&&(k={token:"query",kind:"query",prologue:k[0],units:[k[1]]});k===null&&(b=c);j--;j===0&&k===null&&f("[2] Query");return k}function h(){var k,a,c,d,e,B;j++;B=e=b;k=n();k=k!==null?k:"";if(k!==null){a=[];for(c=o();c!==null;)a.push(c),c=o();if(a!==null){c=[];for(d=q();d!==null;)c.push(d),d=q();c!==null?k=[k,a,c]:(k=null,b=B)}else k=null,b=B}else k=null,b=B;k!==null&&(k=function(b,k,a,c){for(b=0;b<a.length;b++)typeof a[b]==="string"&&(a.splice(b,
1),b--);return{token:"prologue",base:k,prefixes:c,comments:a}}(e,k[0],k[1],k[2]));k===null&&(b=e);j--;j===0&&k===null&&f("[3] Prologue");return k}function n(){var k,a,d,u,e,B,g,i,h;j++;h=i=b;k=[];for(a=o();a!==null;)k.push(a),a=o();if(k!==null)if(c.charCodeAt(b)===66?(a="B",b++):(a=null,j===0&&f('"B"')),a===null&&(c.charCodeAt(b)===98?(a="b",b++):(a=null,j===0&&f('"b"'))),a!==null)if(c.charCodeAt(b)===65?(d="A",b++):(d=null,j===0&&f('"A"')),d===null&&(c.charCodeAt(b)===97?(d="a",b++):(d=null,j===
0&&f('"a"'))),d!==null)if(c.charCodeAt(b)===83?(u="S",b++):(u=null,j===0&&f('"S"')),u===null&&(c.charCodeAt(b)===115?(u="s",b++):(u=null,j===0&&f('"s"'))),u!==null)if(c.charCodeAt(b)===69?(e="E",b++):(e=null,j===0&&f('"E"')),e===null&&(c.charCodeAt(b)===101?(e="e",b++):(e=null,j===0&&f('"e"'))),e!==null){B=[];for(g=o();g!==null;)B.push(g),g=o();B!==null?(g=wa(),g!==null?k=[k,a,d,u,e,B,g]:(k=null,b=h)):(k=null,b=h)}else k=null,b=h;else k=null,b=h;else k=null,b=h;else k=null,b=h;else k=null,b=h;k!==
null&&(k=function(b,k){base={token:"base"};base.value=k;return base}(i,k[6]));k===null&&(b=i);j--;j===0&&k===null&&f("[4] BaseDecl");return k}function q(){var k,a,d,u,e,B,g,h,i,K,x,l,m;j++;m=l=b;k=[];for(a=o();a!==null;)k.push(a),a=o();if(k!==null)if(c.charCodeAt(b)===80?(a="P",b++):(a=null,j===0&&f('"P"')),a===null&&(c.charCodeAt(b)===112?(a="p",b++):(a=null,j===0&&f('"p"'))),a!==null)if(c.charCodeAt(b)===82?(d="R",b++):(d=null,j===0&&f('"R"')),d===null&&(c.charCodeAt(b)===114?(d="r",b++):(d=null,
j===0&&f('"r"'))),d!==null)if(c.charCodeAt(b)===69?(u="E",b++):(u=null,j===0&&f('"E"')),u===null&&(c.charCodeAt(b)===101?(u="e",b++):(u=null,j===0&&f('"e"'))),u!==null)if(c.charCodeAt(b)===70?(e="F",b++):(e=null,j===0&&f('"F"')),e===null&&(c.charCodeAt(b)===102?(e="f",b++):(e=null,j===0&&f('"f"'))),e!==null)if(c.charCodeAt(b)===73?(B="I",b++):(B=null,j===0&&f('"I"')),B===null&&(c.charCodeAt(b)===105?(B="i",b++):(B=null,j===0&&f('"i"'))),B!==null)if(c.charCodeAt(b)===88?(g="X",b++):(g=null,j===0&&
f('"X"')),g===null&&(c.charCodeAt(b)===120?(g="x",b++):(g=null,j===0&&f('"x"'))),g!==null){h=[];for(i=o();i!==null;)h.push(i),i=o();if(h!==null)if(i=Oa(),i!==null){K=[];for(x=o();x!==null;)K.push(x),x=o();K!==null?(x=wa(),x!==null?k=[k,a,d,u,e,B,g,h,i,K,x]:(k=null,b=m)):(k=null,b=m)}else k=null,b=m;else k=null,b=m}else k=null,b=m;else k=null,b=m;else k=null,b=m;else k=null,b=m;else k=null,b=m;else k=null,b=m;else k=null,b=m;k!==null&&(k=function(b,k,a){prefix={token:"prefix"};prefix.prefix=k;prefix.local=
a;return prefix}(l,k[8],k[10]));k===null&&(b=l);j--;j===0&&k===null&&f("[5] PrefixDecl");return k}function m(){var k,a,c;c=b;k=[];for(a=r();a!==null;)k.push(a),a=r();k===null&&(b=c);return k}function r(){var k,a,d,u,e,B,g,h;h=g=b;k=[];for(a=o();a!==null;)k.push(a),a=o();if(k!==null)if(a=t(),a!==null){d=[];for(u=o();u!==null;)d.push(u),u=o();if(d!==null)if(c.charCodeAt(b)===46?(u=".",b++):(u=null,j===0&&f('"."')),u!==null){e=[];for(B=o();B!==null;)e.push(B),B=o();e!==null?k=[k,a,d,u,e]:(k=null,b=h)}else k=
null,b=h;else k=null,b=h}else k=null,b=h;else k=null,b=h;k!==null&&(k=k[1]);k===null&&(b=g);if(k===null){h=g=b;k=[];for(a=o();a!==null;)k.push(a),a=o();if(k!==null)if(a=xa(),a!==null){d=[];for(u=o();u!==null;)d.push(u),u=o();d!==null?k=[k,a,d]:(k=null,b=h)}else k=null,b=h;else k=null,b=h;k!==null&&(k=k[1]);k===null&&(b=g);if(k===null)if(a=o(),a!==null)for(k=[];a!==null;)k.push(a),a=o();else k=null}return k}function t(){var b;b=C();b===null&&(b=w());return b}function w(){var k,a,d,u,e,B;B=e=b;k=[];
for(a=o();a!==null;)k.push(a),a=o();if(k!==null)if(c.substr(b,5)==="@base"?(a="@base",b+=5):(a=null,j===0&&f('"@base"')),a!==null){u=o();if(u!==null)for(d=[];u!==null;)d.push(u),u=o();else d=null;d!==null?(u=wa(),u!==null?k=[k,a,d,u]:(k=null,b=B)):(k=null,b=B)}else k=null,b=B;else k=null,b=B;k!==null&&(k=function(b,k){base={token:"base"};base.value=k;return base}(e,k[3]));k===null&&(b=e);return k}function C(){var k,a,d,u,e,B,g,h,i;i=h=b;k=[];for(a=o();a!==null;)k.push(a),a=o();if(k!==null)if(c.substr(b,
7)==="@prefix"?(a="@prefix",b+=7):(a=null,j===0&&f('"@prefix"')),a!==null){u=o();if(u!==null)for(d=[];u!==null;)d.push(u),u=o();else d=null;if(d!==null)if(u=mb(),u=u!==null?u:"",u!==null)if(c.charCodeAt(b)===58?(e=":",b++):(e=null,j===0&&f('":"')),e!==null){B=[];for(g=o();g!==null;)B.push(g),g=o();B!==null?(g=wa(),g!==null?k=[k,a,d,u,e,B,g]:(k=null,b=i)):(k=null,b=i)}else k=null,b=i;else k=null,b=i;else k=null,b=i}else k=null,b=i;else k=null,b=i;k!==null&&(k=function(b,k,a){prefix={token:"prefix"};
prefix.prefix=k;prefix.local=a;return prefix}(h,k[3],k[6]));k===null&&(b=h);return k}function G(){var k,a,c,d,e,B,g,h,i,K,x;j++;x=K=b;k=H();if(k!==null){a=[];for(c=o();c!==null;)a.push(c),c=o();if(a!==null){c=[];for(d=O();d!==null;)c.push(d),d=O();if(c!==null){d=[];for(e=o();e!==null;)d.push(e),e=o();if(d!==null)if(e=T(),e!==null){B=[];for(g=o();g!==null;)B.push(g),g=o();if(B!==null)if(g=U(),g!==null){h=[];for(i=o();i!==null;)h.push(i),i=o();h!==null?(i=oa(),i!==null?k=[k,a,c,d,e,B,g,h,i]:(k=null,
b=x)):(k=null,b=x)}else k=null,b=x;else k=null,b=x}else k=null,b=x;else k=null,b=x}else k=null,b=x}else k=null,b=x}else k=null,b=x;k!==null&&(k=function(b,k,a,c,f){for(var b={named:[],"default":[]},d=0;d<a.length;d++){var j=a[d];j.kind==="default"?b["default"].push(j.graph):b.named.push(j.graph)}b.named.length===0&&b["default"].length===0&&b["default"].push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});a={kind:"select",token:"executableunit"};
a.dataset=b;a.projection=k.vars;a.modifier=k.modifier;a.pattern=c;if(f!=null&&f.limit!=null)a.limit=f.limit;if(f!=null&&f.offset!=null)a.offset=f.offset;if(f!=null&&f.order!=null&&f.order!="")a.order=f.order;if(f!=null&&f.group!=null)a.group=f.group;return a}(K,k[0],k[2],k[4],k[6]));k===null&&(b=K);j--;j===0&&k===null&&f("[6] SelectQuery");return k}function E(){var k,a,c,d;j++;d=b;k=H();k!==null?(a=T(),a!==null?(c=U(),c!==null?k=[k,a,c]:(k=null,b=d)):(k=null,b=d)):(k=null,b=d);j--;j===0&&k===null&&
f("[7] SubSelect");return k}function H(){var k,a,d,u,e,B,g,h,i,K,x,l,m,n,q,A,v,r,$,t,w,F,y,G,C,E,J;j++;E=C=b;k=[];for(a=o();a!==null;)k.push(a),a=o();if(k!==null)if(c.charCodeAt(b)===83?(a="S",b++):(a=null,j===0&&f('"S"')),a===null&&(c.charCodeAt(b)===115?(a="s",b++):(a=null,j===0&&f('"s"'))),a!==null)if(c.charCodeAt(b)===69?(d="E",b++):(d=null,j===0&&f('"E"')),d===null&&(c.charCodeAt(b)===101?(d="e",b++):(d=null,j===0&&f('"e"'))),d!==null)if(c.charCodeAt(b)===76?(u="L",b++):(u=null,j===0&&f('"L"')),
u===null&&(c.charCodeAt(b)===108?(u="l",b++):(u=null,j===0&&f('"l"'))),u!==null)if(c.charCodeAt(b)===69?(e="E",b++):(e=null,j===0&&f('"E"')),e===null&&(c.charCodeAt(b)===101?(e="e",b++):(e=null,j===0&&f('"e"'))),e!==null)if(c.charCodeAt(b)===67?(B="C",b++):(B=null,j===0&&f('"C"')),B===null&&(c.charCodeAt(b)===99?(B="c",b++):(B=null,j===0&&f('"c"'))),B!==null)if(c.charCodeAt(b)===84?(g="T",b++):(g=null,j===0&&f('"T"')),g===null&&(c.charCodeAt(b)===116?(g="t",b++):(g=null,j===0&&f('"t"'))),g!==null){h=
[];for(i=o();i!==null;)h.push(i),i=o();if(h!==null)if(J=b,c.charCodeAt(b)===68?(i="D",b++):(i=null,j===0&&f('"D"')),i===null&&(c.charCodeAt(b)===100?(i="d",b++):(i=null,j===0&&f('"d"'))),i!==null?(c.charCodeAt(b)===73?(K="I",b++):(K=null,j===0&&f('"I"')),K===null&&(c.charCodeAt(b)===105?(K="i",b++):(K=null,j===0&&f('"i"'))),K!==null?(c.charCodeAt(b)===83?(x="S",b++):(x=null,j===0&&f('"S"')),x===null&&(c.charCodeAt(b)===115?(x="s",b++):(x=null,j===0&&f('"s"'))),x!==null?(c.charCodeAt(b)===84?(l="T",
b++):(l=null,j===0&&f('"T"')),l===null&&(c.charCodeAt(b)===116?(l="t",b++):(l=null,j===0&&f('"t"'))),l!==null?(c.charCodeAt(b)===73?(m="I",b++):(m=null,j===0&&f('"I"')),m===null&&(c.charCodeAt(b)===105?(m="i",b++):(m=null,j===0&&f('"i"'))),m!==null?(c.charCodeAt(b)===78?(n="N",b++):(n=null,j===0&&f('"N"')),n===null&&(c.charCodeAt(b)===110?(n="n",b++):(n=null,j===0&&f('"n"'))),n!==null?(c.charCodeAt(b)===67?(q="C",b++):(q=null,j===0&&f('"C"')),q===null&&(c.charCodeAt(b)===99?(q="c",b++):(q=null,j===
0&&f('"c"'))),q!==null?(c.charCodeAt(b)===84?(A="T",b++):(A=null,j===0&&f('"T"')),A===null&&(c.charCodeAt(b)===116?(A="t",b++):(A=null,j===0&&f('"t"'))),A!==null?i=[i,K,x,l,m,n,q,A]:(i=null,b=J)):(i=null,b=J)):(i=null,b=J)):(i=null,b=J)):(i=null,b=J)):(i=null,b=J)):(i=null,b=J)):(i=null,b=J),i===null&&(J=b,c.charCodeAt(b)===82?(i="R",b++):(i=null,j===0&&f('"R"')),i===null&&(c.charCodeAt(b)===114?(i="r",b++):(i=null,j===0&&f('"r"'))),i!==null?(c.charCodeAt(b)===69?(K="E",b++):(K=null,j===0&&f('"E"')),
K===null&&(c.charCodeAt(b)===101?(K="e",b++):(K=null,j===0&&f('"e"'))),K!==null?(c.charCodeAt(b)===68?(x="D",b++):(x=null,j===0&&f('"D"')),x===null&&(c.charCodeAt(b)===100?(x="d",b++):(x=null,j===0&&f('"d"'))),x!==null?(c.charCodeAt(b)===85?(l="U",b++):(l=null,j===0&&f('"U"')),l===null&&(c.charCodeAt(b)===117?(l="u",b++):(l=null,j===0&&f('"u"'))),l!==null?(c.charCodeAt(b)===67?(m="C",b++):(m=null,j===0&&f('"C"')),m===null&&(c.charCodeAt(b)===99?(m="c",b++):(m=null,j===0&&f('"c"'))),m!==null?(c.charCodeAt(b)===
69?(n="E",b++):(n=null,j===0&&f('"E"')),n===null&&(c.charCodeAt(b)===101?(n="e",b++):(n=null,j===0&&f('"e"'))),n!==null?(c.charCodeAt(b)===68?(q="D",b++):(q=null,j===0&&f('"D"')),q===null&&(c.charCodeAt(b)===100?(q="d",b++):(q=null,j===0&&f('"d"'))),q!==null?i=[i,K,x,l,m,n,q]:(i=null,b=J)):(i=null,b=J)):(i=null,b=J)):(i=null,b=J)):(i=null,b=J)):(i=null,b=J)):(i=null,b=J)),i=i!==null?i:"",i!==null){K=[];for(x=o();x!==null;)K.push(x),x=o();if(K!==null){J=b;l=[];for(m=o();m!==null;)l.push(m),m=o();if(l!==
null)if(m=V(),m!==null){n=[];for(q=o();q!==null;)n.push(q),q=o();n!==null?l=[l,m,n]:(l=null,b=J)}else l=null,b=J;else l=null,b=J;if(l===null){J=b;l=[];for(m=o();m!==null;)l.push(m),m=o();if(l!==null)if(c.charCodeAt(b)===40?(m="(",b++):(m=null,j===0&&f('"("')),m!==null){n=[];for(q=o();q!==null;)n.push(q),q=o();if(n!==null)if(q=N(),q!==null){A=[];for(v=o();v!==null;)A.push(v),v=o();if(A!==null)if(c.charCodeAt(b)===65?(v="A",b++):(v=null,j===0&&f('"A"')),v===null&&(c.charCodeAt(b)===97?(v="a",b++):(v=
null,j===0&&f('"a"'))),v!==null)if(c.charCodeAt(b)===83?(r="S",b++):(r=null,j===0&&f('"S"')),r===null&&(c.charCodeAt(b)===115?(r="s",b++):(r=null,j===0&&f('"s"'))),r!==null){$=[];for(t=o();t!==null;)$.push(t),t=o();if($!==null)if(t=V(),t!==null){w=[];for(F=o();F!==null;)w.push(F),F=o();if(w!==null)if(c.charCodeAt(b)===41?(F=")",b++):(F=null,j===0&&f('")"')),F!==null){y=[];for(G=o();G!==null;)y.push(G),G=o();y!==null?l=[l,m,n,q,A,v,r,$,t,w,F,y]:(l=null,b=J)}else l=null,b=J;else l=null,b=J}else l=null,
b=J;else l=null,b=J}else l=null,b=J;else l=null,b=J;else l=null,b=J}else l=null,b=J;else l=null,b=J}else l=null,b=J;else l=null,b=J}if(l!==null)for(x=[];l!==null;){x.push(l);J=b;l=[];for(m=o();m!==null;)l.push(m),m=o();if(l!==null)if(m=V(),m!==null){n=[];for(q=o();q!==null;)n.push(q),q=o();n!==null?l=[l,m,n]:(l=null,b=J)}else l=null,b=J;else l=null,b=J;if(l===null){J=b;l=[];for(m=o();m!==null;)l.push(m),m=o();if(l!==null)if(c.charCodeAt(b)===40?(m="(",b++):(m=null,j===0&&f('"("')),m!==null){n=[];
for(q=o();q!==null;)n.push(q),q=o();if(n!==null)if(q=N(),q!==null){A=[];for(v=o();v!==null;)A.push(v),v=o();if(A!==null)if(c.charCodeAt(b)===65?(v="A",b++):(v=null,j===0&&f('"A"')),v===null&&(c.charCodeAt(b)===97?(v="a",b++):(v=null,j===0&&f('"a"'))),v!==null)if(c.charCodeAt(b)===83?(r="S",b++):(r=null,j===0&&f('"S"')),r===null&&(c.charCodeAt(b)===115?(r="s",b++):(r=null,j===0&&f('"s"'))),r!==null){$=[];for(t=o();t!==null;)$.push(t),t=o();if($!==null)if(t=V(),t!==null){w=[];for(F=o();F!==null;)w.push(F),
F=o();if(w!==null)if(c.charCodeAt(b)===41?(F=")",b++):(F=null,j===0&&f('")"')),F!==null){y=[];for(G=o();G!==null;)y.push(G),G=o();y!==null?l=[l,m,n,q,A,v,r,$,t,w,F,y]:(l=null,b=J)}else l=null,b=J;else l=null,b=J}else l=null,b=J;else l=null,b=J}else l=null,b=J;else l=null,b=J;else l=null,b=J}else l=null,b=J;else l=null,b=J}else l=null,b=J;else l=null,b=J}}else x=null;if(x===null){J=b;x=[];for(l=o();l!==null;)x.push(l),l=o();if(x!==null)if(c.charCodeAt(b)===42?(l="*",b++):(l=null,j===0&&f('"*"')),l!==
null){m=[];for(n=o();n!==null;)m.push(n),n=o();m!==null?x=[x,l,m]:(x=null,b=J)}else x=null,b=J;else x=null,b=J}x!==null?k=[k,a,d,u,e,B,g,h,i,K,x]:(k=null,b=E)}else k=null,b=E}else k=null,b=E;else k=null,b=E}else k=null,b=E;else k=null,b=E;else k=null,b=E;else k=null,b=E;else k=null,b=E;else k=null,b=E;else k=null,b=E;k!==null&&(k=function(b,k,a){b=[];if(a.length===3&&a[1]==="*")return{vars:[{token:"variable",kind:"*"}],modifier:Fb(k)};for(var c=0;c<a.length;c++){var f=a[c];f.length===3?b.push({token:"variable",
kind:"var",value:f[1]}):b.push({token:"variable",kind:"aliased",expression:f[3],alias:f[8]})}return{vars:b,modifier:Fb(k)}}(C,k[8],k[10]));k===null&&(b=C);j--;j===0&&k===null&&f("[8] SelectClause");return k}function I(){var k,a,d,u,e,B,g,i,h,K,l,m,n,s,q,r,v,R,$,t;j++;t=$=b;k=[];for(a=o();a!==null;)k.push(a),a=o();if(k!==null)if(c.charCodeAt(b)===67?(a="C",b++):(a=null,j===0&&f('"C"')),a===null&&(c.charCodeAt(b)===99?(a="c",b++):(a=null,j===0&&f('"c"'))),a!==null)if(c.charCodeAt(b)===79?(d="O",b++):
(d=null,j===0&&f('"O"')),d===null&&(c.charCodeAt(b)===111?(d="o",b++):(d=null,j===0&&f('"o"'))),d!==null)if(c.charCodeAt(b)===78?(u="N",b++):(u=null,j===0&&f('"N"')),u===null&&(c.charCodeAt(b)===110?(u="n",b++):(u=null,j===0&&f('"n"'))),u!==null)if(c.charCodeAt(b)===83?(e="S",b++):(e=null,j===0&&f('"S"')),e===null&&(c.charCodeAt(b)===115?(e="s",b++):(e=null,j===0&&f('"s"'))),e!==null)if(c.charCodeAt(b)===84?(B="T",b++):(B=null,j===0&&f('"T"')),B===null&&(c.charCodeAt(b)===116?(B="t",b++):(B=null,
j===0&&f('"t"'))),B!==null)if(c.charCodeAt(b)===82?(g="R",b++):(g=null,j===0&&f('"R"')),g===null&&(c.charCodeAt(b)===114?(g="r",b++):(g=null,j===0&&f('"r"'))),g!==null)if(c.charCodeAt(b)===85?(i="U",b++):(i=null,j===0&&f('"U"')),i===null&&(c.charCodeAt(b)===117?(i="u",b++):(i=null,j===0&&f('"u"'))),i!==null)if(c.charCodeAt(b)===67?(h="C",b++):(h=null,j===0&&f('"C"')),h===null&&(c.charCodeAt(b)===99?(h="c",b++):(h=null,j===0&&f('"c"'))),h!==null)if(c.charCodeAt(b)===84?(K="T",b++):(K=null,j===0&&f('"T"')),
K===null&&(c.charCodeAt(b)===116?(K="t",b++):(K=null,j===0&&f('"t"'))),K!==null){l=[];for(m=o();m!==null;)l.push(m),m=o();if(l!==null)if(m=Gb(),m!==null){n=[];for(s=o();s!==null;)n.push(s),s=o();if(n!==null){s=[];for(q=O();q!==null;)s.push(q),q=O();if(s!==null){q=[];for(r=o();r!==null;)q.push(r),r=o();if(q!==null)if(r=T(),r!==null){v=[];for(R=o();R!==null;)v.push(R),R=o();v!==null?(R=U(),R!==null?k=[k,a,d,u,e,B,g,i,h,K,l,m,n,s,q,r,v,R]:(k=null,b=t)):(k=null,b=t)}else k=null,b=t;else k=null,b=t}else k=
null,b=t}else k=null,b=t}else k=null,b=t;else k=null,b=t}else k=null,b=t;else k=null,b=t;else k=null,b=t;else k=null,b=t;else k=null,b=t;else k=null,b=t;else k=null,b=t;else k=null,b=t;else k=null,b=t;else k=null,b=t;k!==null&&(k=function(b,k,a,c,f){for(var b={named:[],"default":[]},d=0;d<a.length;d++){var j=a[d];j.kind==="default"?b["default"].push(j.graph):b.named.push(j.graph)}b.named.length===0&&b["default"].length===0&&b["default"].push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});
a={kind:"construct",token:"executableunit"};a.dataset=b;a.template=k;a.pattern=c;if(f!=null&&f.limit!=null)a.limit=f.limit;if(f!=null&&f.offset!=null)a.offset=f.offset;if(f!=null&&f.order!=null&&f.order!="")a.order=f.order;return a}($,k[11],k[13],k[15],k[17]));k===null&&(b=$);j--;j===0&&k===null&&f("[9] ConstructQuery");return k}function M(){var k,a,d,u,e,B;j++;B=b;c.substr(b,8)==="DESCRIBE"?(k="DESCRIBE",b+=8):(k=null,j===0&&f('"DESCRIBE"'));if(k!==null){d=qa();if(d!==null)for(a=[];d!==null;)a.push(d),
d=qa();else a=null;a===null&&(c.charCodeAt(b)===42?(a="*",b++):(a=null,j===0&&f('"*"')));if(a!==null){d=[];for(u=O();u!==null;)d.push(u),u=O();d!==null?(u=T(),u=u!==null?u:"",u!==null?(e=U(),e!==null?k=[k,a,d,u,e]:(k=null,b=B)):(k=null,b=B)):(k=null,b=B)}else k=null,b=B}else k=null,b=B;j--;j===0&&k===null&&f("[10] DescribeQuery");return k}function L(){var k,a,d,u,e,B,g,i,h,K;j++;K=h=b;k=[];for(a=o();a!==null;)k.push(a),a=o();if(k!==null)if(c.charCodeAt(b)===65?(a="A",b++):(a=null,j===0&&f('"A"')),
a===null&&(c.charCodeAt(b)===97?(a="a",b++):(a=null,j===0&&f('"a"'))),a!==null)if(c.charCodeAt(b)===83?(d="S",b++):(d=null,j===0&&f('"S"')),d===null&&(c.charCodeAt(b)===115?(d="s",b++):(d=null,j===0&&f('"s"'))),d!==null)if(c.charCodeAt(b)===75?(u="K",b++):(u=null,j===0&&f('"K"')),u===null&&(c.charCodeAt(b)===107?(u="k",b++):(u=null,j===0&&f('"k"'))),u!==null){e=[];for(B=o();B!==null;)e.push(B),B=o();if(e!==null){B=[];for(g=O();g!==null;)B.push(g),g=O();if(B!==null){g=[];for(i=o();i!==null;)g.push(i),
i=o();g!==null?(i=T(),i!==null?k=[k,a,d,u,e,B,g,i]:(k=null,b=K)):(k=null,b=K)}else k=null,b=K}else k=null,b=K}else k=null,b=K;else k=null,b=K;else k=null,b=K;else k=null,b=K;k!==null&&(k=function(b,k,a){for(var b={named:[],"default":[]},c=0;c<k.length;c++){var f=k[c];f.kind==="default"?b["default"].push(f.graph):b.named.push(f.graph)}b.named.length===0&&b["default"].length===0&&b["default"].push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});
k={kind:"ask",token:"executableunit"};k.dataset=b;k.pattern=a;return k}(h,k[5],k[7]));k===null&&(b=h);j--;j===0&&k===null&&f("[11] AskQuery");return k}function O(){var k,a,d,u,e,B,g,i,h,K;j++;K=h=b;c.charCodeAt(b)===70?(k="F",b++):(k=null,j===0&&f('"F"'));k===null&&(c.charCodeAt(b)===102?(k="f",b++):(k=null,j===0&&f('"f"')));if(k!==null)if(c.charCodeAt(b)===82?(a="R",b++):(a=null,j===0&&f('"R"')),a===null&&(c.charCodeAt(b)===114?(a="r",b++):(a=null,j===0&&f('"r"'))),a!==null)if(c.charCodeAt(b)===
79?(d="O",b++):(d=null,j===0&&f('"O"')),d===null&&(c.charCodeAt(b)===111?(d="o",b++):(d=null,j===0&&f('"o"'))),d!==null)if(c.charCodeAt(b)===77?(u="M",b++):(u=null,j===0&&f('"M"')),u===null&&(c.charCodeAt(b)===109?(u="m",b++):(u=null,j===0&&f('"m"'))),u!==null){e=[];for(B=o();B!==null;)e.push(B),B=o();if(e!==null)if(B=P(),B===null&&(B=S()),B!==null){g=[];for(i=o();i!==null;)g.push(i),i=o();g!==null?k=[k,a,d,u,e,B,g]:(k=null,b=K)}else k=null,b=K;else k=null,b=K}else k=null,b=K;else k=null,b=K;else k=
null,b=K;else k=null,b=K;k!==null&&(k=k[5]);k===null&&(b=h);j--;j===0&&k===null&&f("[12] DatasetClause");return k}function P(){var k,a,c,d;j++;d=c=b;k=[];for(a=o();a!==null;)k.push(a),a=o();k!==null?(a=W(),a!==null?k=[k,a]:(k=null,b=d)):(k=null,b=d);k!==null&&(k={graph:k[1],kind:"default",token:"graphClause"});k===null&&(b=c);j--;j===0&&k===null&&f("[13] DefaultGraphClause");return k}function S(){var k,a,d,u,e,B,g,i,h;j++;h=i=b;c.charCodeAt(b)===78?(k="N",b++):(k=null,j===0&&f('"N"'));k===null&&(c.charCodeAt(b)===
110?(k="n",b++):(k=null,j===0&&f('"n"')));if(k!==null)if(c.charCodeAt(b)===65?(a="A",b++):(a=null,j===0&&f('"A"')),a===null&&(c.charCodeAt(b)===97?(a="a",b++):(a=null,j===0&&f('"a"'))),a!==null)if(c.charCodeAt(b)===77?(d="M",b++):(d=null,j===0&&f('"M"')),d===null&&(c.charCodeAt(b)===109?(d="m",b++):(d=null,j===0&&f('"m"'))),d!==null)if(c.charCodeAt(b)===69?(u="E",b++):(u=null,j===0&&f('"E"')),u===null&&(c.charCodeAt(b)===101?(u="e",b++):(u=null,j===0&&f('"e"'))),u!==null)if(c.charCodeAt(b)===68?(e=
"D",b++):(e=null,j===0&&f('"D"')),e===null&&(c.charCodeAt(b)===100?(e="d",b++):(e=null,j===0&&f('"d"'))),e!==null){B=[];for(g=o();g!==null;)B.push(g),g=o();B!==null?(g=W(),g!==null?k=[k,a,d,u,e,B,g]:(k=null,b=h)):(k=null,b=h)}else k=null,b=h;else k=null,b=h;else k=null,b=h;else k=null,b=h;else k=null,b=h;k!==null&&(k={graph:k[6],kind:"named",token:"graphCluase"});k===null&&(b=i);j--;j===0&&k===null&&f("[14] NamedGraphClause");return k}function T(){var k,a,d,u,e,B,g,i;j++;i=g=B=b;c.charCodeAt(b)===
87?(k="W",b++):(k=null,j===0&&f('"W"'));k===null&&(c.charCodeAt(b)===119?(k="w",b++):(k=null,j===0&&f('"w"')));k!==null?(c.charCodeAt(b)===72?(a="H",b++):(a=null,j===0&&f('"H"')),a===null&&(c.charCodeAt(b)===104?(a="h",b++):(a=null,j===0&&f('"h"'))),a!==null?(c.charCodeAt(b)===69?(d="E",b++):(d=null,j===0&&f('"E"')),d===null&&(c.charCodeAt(b)===101?(d="e",b++):(d=null,j===0&&f('"e"'))),d!==null?(c.charCodeAt(b)===82?(u="R",b++):(u=null,j===0&&f('"R"')),u===null&&(c.charCodeAt(b)===114?(u="r",b++):
(u=null,j===0&&f('"r"'))),u!==null?(c.charCodeAt(b)===69?(e="E",b++):(e=null,j===0&&f('"E"')),e===null&&(c.charCodeAt(b)===101?(e="e",b++):(e=null,j===0&&f('"e"'))),e!==null?k=[k,a,d,u,e]:(k=null,b=i)):(k=null,b=i)):(k=null,b=i)):(k=null,b=i)):(k=null,b=i);k=k!==null?k:"";if(k!==null){a=[];for(d=o();d!==null;)a.push(d),d=o();if(a!==null)if(d=Y(),d!==null){u=[];for(e=o();e!==null;)u.push(e),e=o();u!==null?k=[k,a,d,u]:(k=null,b=g)}else k=null,b=g;else k=null,b=g}else k=null,b=g;k!==null&&(k=k[2]);k===
null&&(b=B);j--;j===0&&k===null&&f("[16] WhereClause");return k}function U(){var k,a,c,d,e,B;j++;B=e=b;k=Z();k=k!==null?k:"";k!==null?(a=da(),a=a!==null?a:"",a!==null?(c=ea(),c=c!==null?c:"",c!==null?(d=ma(),d=d!==null?d:"",d!==null?k=[k,a,c,d]:(k=null,b=B)):(k=null,b=B)):(k=null,b=B)):(k=null,b=B);k!==null&&(k=function(b,k,a,c){b={};if(c!=null){if(c.limit!=null)b.limit=c.limit;if(c.offset!=null)b.offset=c.offset}if(k!=null)b.group=k;b.order=a;return b}(e,k[0],k[2],k[3]));k===null&&(b=e);j--;j===
0&&k===null&&f("[17] SolutionModifier");return k}function Z(){var k,a,d,u,e,B,g,i,h,l,x,m,n;j++;n=m=b;c.charCodeAt(b)===71?(k="G",b++):(k=null,j===0&&f('"G"'));k===null&&(c.charCodeAt(b)===103?(k="g",b++):(k=null,j===0&&f('"g"')));if(k!==null)if(c.charCodeAt(b)===82?(a="R",b++):(a=null,j===0&&f('"R"')),a===null&&(c.charCodeAt(b)===114?(a="r",b++):(a=null,j===0&&f('"r"'))),a!==null)if(c.charCodeAt(b)===79?(d="O",b++):(d=null,j===0&&f('"O"')),d===null&&(c.charCodeAt(b)===111?(d="o",b++):(d=null,j===
0&&f('"o"'))),d!==null)if(c.charCodeAt(b)===85?(u="U",b++):(u=null,j===0&&f('"U"')),u===null&&(c.charCodeAt(b)===117?(u="u",b++):(u=null,j===0&&f('"u"'))),u!==null)if(c.charCodeAt(b)===80?(e="P",b++):(e=null,j===0&&f('"P"')),e===null&&(c.charCodeAt(b)===112?(e="p",b++):(e=null,j===0&&f('"p"'))),e!==null){B=[];for(g=o();g!==null;)B.push(g),g=o();if(B!==null)if(c.charCodeAt(b)===66?(g="B",b++):(g=null,j===0&&f('"B"')),g===null&&(c.charCodeAt(b)===98?(g="b",b++):(g=null,j===0&&f('"b"'))),g!==null)if(c.charCodeAt(b)===
89?(i="Y",b++):(i=null,j===0&&f('"Y"')),i===null&&(c.charCodeAt(b)===121?(i="y",b++):(i=null,j===0&&f('"y"'))),i!==null){h=[];for(l=o();l!==null;)h.push(l),l=o();if(h!==null){x=aa();if(x!==null)for(l=[];x!==null;)l.push(x),x=aa();else l=null;l!==null?k=[k,a,d,u,e,B,g,i,h,l]:(k=null,b=n)}else k=null,b=n}else k=null,b=n;else k=null,b=n;else k=null,b=n}else k=null,b=n;else k=null,b=n;else k=null,b=n;else k=null,b=n;else k=null,b=n;k!==null&&(k=k[9]);k===null&&(b=m);j--;j===0&&k===null&&f("[18] GroupClause");
return k}function aa(){var k,a,d,u,e,g,i,h,Q,l,x,m;j++;m=x=b;k=[];for(a=o();a!==null;)k.push(a),a=o();if(k!==null)if(a=Pa(),a!==null){d=[];for(u=o();u!==null;)d.push(u),u=o();d!==null?k=[k,a,d]:(k=null,b=m)}else k=null,b=m;else k=null,b=m;k!==null&&(k=k[1]);k===null&&(b=x);if(k===null){m=x=b;k=[];for(a=o();a!==null;)k.push(a),a=o();if(k!==null)if(a=nb(),a!==null){d=[];for(u=o();u!==null;)d.push(u),u=o();d!==null?k=[k,a,d]:(k=null,b=m)}else k=null,b=m;else k=null,b=m;k!==null&&(k=k[1]);k===null&&(b=
x);if(k===null){m=x=b;k=[];for(a=o();a!==null;)k.push(a),a=o();if(k!==null)if(c.charCodeAt(b)===40?(a="(",b++):(a=null,j===0&&f('"("')),a!==null){d=[];for(u=o();u!==null;)d.push(u),u=o();if(d!==null)if(u=N(),u!==null){e=[];for(g=o();g!==null;)e.push(g),g=o();if(e!==null){l=b;c.charCodeAt(b)===65?(g="A",b++):(g=null,j===0&&f('"A"'));g===null&&(c.charCodeAt(b)===97?(g="a",b++):(g=null,j===0&&f('"a"')));if(g!==null)if(c.charCodeAt(b)===83?(i="S",b++):(i=null,j===0&&f('"S"')),i===null&&(c.charCodeAt(b)===
115?(i="s",b++):(i=null,j===0&&f('"s"'))),i!==null){h=[];for(Q=o();Q!==null;)h.push(Q),Q=o();h!==null?(Q=V(),Q!==null?g=[g,i,h,Q]:(g=null,b=l)):(g=null,b=l)}else g=null,b=l;else g=null,b=l;g=g!==null?g:"";if(g!==null){i=[];for(h=o();h!==null;)i.push(h),h=o();if(i!==null)if(c.charCodeAt(b)===41?(h=")",b++):(h=null,j===0&&f('")"')),h!==null){Q=[];for(l=o();l!==null;)Q.push(l),l=o();Q!==null?k=[k,a,d,u,e,g,i,h,Q]:(k=null,b=m)}else k=null,b=m;else k=null,b=m}else k=null,b=m}else k=null,b=m}else k=null,
b=m;else k=null,b=m}else k=null,b=m;else k=null,b=m;k!==null&&(k=k[5].length!=0?{token:"aliased_expression",expression:k[3],alias:k[5][3]}:k[3]);k===null&&(b=x);if(k===null){m=x=b;k=[];for(a=o();a!==null;)k.push(a),a=o();if(k!==null)if(a=V(),a!==null){d=[];for(u=o();u!==null;)d.push(u),u=o();d!==null?k=[k,a,d]:(k=null,b=m)}else k=null,b=m;else k=null,b=m;k!==null&&(k=k[1]);k===null&&(b=x)}}}j--;j===0&&k===null&&f("[19] GroupCondition");return k}function da(){var k,a,d,u;j++;u=b;c.substr(b,6)==="HAVING"?
(k="HAVING",b+=6):(k=null,j===0&&f('"HAVING"'));if(k!==null){d=Ja();if(d!==null)for(a=[];d!==null;)a.push(d),d=Ja();else a=null;a!==null?k=[k,a]:(k=null,b=u)}else k=null,b=u;j--;j===0&&k===null&&f("[20] HavingClause");return k}function ea(){var k,a,d,u,e,g,i,h,Q,l,m,n,q,s;j++;s=q=b;c.charCodeAt(b)===79?(k="O",b++):(k=null,j===0&&f('"O"'));k===null&&(c.charCodeAt(b)===111?(k="o",b++):(k=null,j===0&&f('"o"')));if(k!==null)if(c.charCodeAt(b)===82?(a="R",b++):(a=null,j===0&&f('"R"')),a===null&&(c.charCodeAt(b)===
114?(a="r",b++):(a=null,j===0&&f('"r"'))),a!==null)if(c.charCodeAt(b)===68?(d="D",b++):(d=null,j===0&&f('"D"')),d===null&&(c.charCodeAt(b)===100?(d="d",b++):(d=null,j===0&&f('"d"'))),d!==null)if(c.charCodeAt(b)===69?(u="E",b++):(u=null,j===0&&f('"E"')),u===null&&(c.charCodeAt(b)===101?(u="e",b++):(u=null,j===0&&f('"e"'))),u!==null)if(c.charCodeAt(b)===82?(e="R",b++):(e=null,j===0&&f('"R"')),e===null&&(c.charCodeAt(b)===114?(e="r",b++):(e=null,j===0&&f('"r"'))),e!==null){g=[];for(i=o();i!==null;)g.push(i),
i=o();if(g!==null)if(c.charCodeAt(b)===66?(i="B",b++):(i=null,j===0&&f('"B"')),i===null&&(c.charCodeAt(b)===98?(i="b",b++):(i=null,j===0&&f('"b"'))),i!==null)if(c.charCodeAt(b)===89?(h="Y",b++):(h=null,j===0&&f('"Y"')),h===null&&(c.charCodeAt(b)===121?(h="y",b++):(h=null,j===0&&f('"y"'))),h!==null){Q=[];for(l=o();l!==null;)Q.push(l),l=o();if(Q!==null){m=ca();if(m!==null)for(l=[];m!==null;)l.push(m),m=ca();else l=null;if(l!==null){m=[];for(n=o();n!==null;)m.push(n),n=o();m!==null?k=[k,a,d,u,e,g,i,
h,Q,l,m]:(k=null,b=s)}else k=null,b=s}else k=null,b=s}else k=null,b=s;else k=null,b=s;else k=null,b=s}else k=null,b=s;else k=null,b=s;else k=null,b=s;else k=null,b=s;else k=null,b=s;k!==null&&(k=k[9]);k===null&&(b=q);j--;j===0&&k===null&&f("[22] OrderClause");return k}function ca(){var k,a,d,u,e,g,i;j++;i=g=b;c.substr(b,3)==="ASC"?(k="ASC",b+=3):(k=null,j===0&&f('"ASC"'));k===null&&(c.substr(b,4)==="DESC"?(k="DESC",b+=4):(k=null,j===0&&f('"DESC"')));if(k!==null){a=[];for(d=o();d!==null;)a.push(d),
d=o();if(a!==null)if(d=Qa(),d!==null){u=[];for(e=o();e!==null;)u.push(e),e=o();u!==null?k=[k,a,d,u]:(k=null,b=i)}else k=null,b=i;else k=null,b=i}else k=null,b=i;k!==null&&(k={direction:k[0],expression:k[2]});k===null&&(b=g);if(k===null){i=g=b;k=Ja();k===null&&(k=V());if(k!==null){a=[];for(d=o();d!==null;)a.push(d),d=o();a!==null?k=[k,a]:(k=null,b=i)}else k=null,b=i;k!==null&&(k=function(b,k){k.token==="var"&&(k={token:"expression",expressionType:"atomic",primaryexpression:"var",value:k});return{direction:"ASC",
expression:k}}(g,k[0]));k===null&&(b=g)}j--;j===0&&k===null&&f("[23] OrderCondition");return k}function ma(){var k,a,c,d;j++;d=c=b;k=ga();k!==null?(a=ha(),a=a!==null?a:"",a!==null?k=[k,a]:(k=null,b=d)):(k=null,b=d);k===null&&(d=b,k=ha(),k!==null?(a=ga(),a=a!==null?a:"",a!==null?k=[k,a]:(k=null,b=d)):(k=null,b=d));k!==null&&(k=function(b,k){for(var a={},c=0;c<k.length;c++){var f=k[c];if(f.limit!=null)a.limit=f.limit;else if(f.offset!=null)a.offset=f.offset}return a}(c,k));k===null&&(b=c);j--;j===0&&
k===null&&f("[24] LimitOffsetClauses");return k}function ga(){var k,a,d,u,e,g,i,h,Q,l,m;j++;m=l=b;c.charCodeAt(b)===76?(k="L",b++):(k=null,j===0&&f('"L"'));k===null&&(c.charCodeAt(b)===108?(k="l",b++):(k=null,j===0&&f('"l"')));if(k!==null)if(c.charCodeAt(b)===73?(a="I",b++):(a=null,j===0&&f('"I"')),a===null&&(c.charCodeAt(b)===105?(a="i",b++):(a=null,j===0&&f('"i"'))),a!==null)if(c.charCodeAt(b)===77?(d="M",b++):(d=null,j===0&&f('"M"')),d===null&&(c.charCodeAt(b)===109?(d="m",b++):(d=null,j===0&&
f('"m"'))),d!==null)if(c.charCodeAt(b)===73?(u="I",b++):(u=null,j===0&&f('"I"')),u===null&&(c.charCodeAt(b)===105?(u="i",b++):(u=null,j===0&&f('"i"'))),u!==null)if(c.charCodeAt(b)===84?(e="T",b++):(e=null,j===0&&f('"T"')),e===null&&(c.charCodeAt(b)===116?(e="t",b++):(e=null,j===0&&f('"t"'))),e!==null){g=[];for(i=o();i!==null;)g.push(i),i=o();if(g!==null)if(i=ia(),i!==null){h=[];for(Q=o();Q!==null;)h.push(Q),Q=o();h!==null?k=[k,a,d,u,e,g,i,h]:(k=null,b=m)}else k=null,b=m;else k=null,b=m}else k=null,
b=m;else k=null,b=m;else k=null,b=m;else k=null,b=m;else k=null,b=m;k!==null&&(k={limit:parseInt(k[6].value)});k===null&&(b=l);j--;j===0&&k===null&&f("[25] LimitClause");return k}function ha(){var k,a,d,u,e,g,i,h,Q,l,m,n;j++;n=m=b;c.charCodeAt(b)===79?(k="O",b++):(k=null,j===0&&f('"O"'));k===null&&(c.charCodeAt(b)===111?(k="o",b++):(k=null,j===0&&f('"o"')));if(k!==null)if(c.charCodeAt(b)===70?(a="F",b++):(a=null,j===0&&f('"F"')),a===null&&(c.charCodeAt(b)===102?(a="f",b++):(a=null,j===0&&f('"f"'))),
a!==null)if(c.charCodeAt(b)===70?(d="F",b++):(d=null,j===0&&f('"F"')),d===null&&(c.charCodeAt(b)===102?(d="f",b++):(d=null,j===0&&f('"f"'))),d!==null)if(c.charCodeAt(b)===83?(u="S",b++):(u=null,j===0&&f('"S"')),u===null&&(c.charCodeAt(b)===115?(u="s",b++):(u=null,j===0&&f('"s"'))),u!==null)if(c.charCodeAt(b)===69?(e="E",b++):(e=null,j===0&&f('"E"')),e===null&&(c.charCodeAt(b)===101?(e="e",b++):(e=null,j===0&&f('"e"'))),e!==null)if(c.charCodeAt(b)===84?(g="T",b++):(g=null,j===0&&f('"T"')),g===null&&
(c.charCodeAt(b)===116?(g="t",b++):(g=null,j===0&&f('"t"'))),g!==null){i=[];for(h=o();h!==null;)i.push(h),h=o();if(i!==null)if(h=ia(),h!==null){Q=[];for(l=o();l!==null;)Q.push(l),l=o();Q!==null?k=[k,a,d,u,e,g,i,h,Q]:(k=null,b=n)}else k=null,b=n;else k=null,b=n}else k=null,b=n;else k=null,b=n;else k=null,b=n;else k=null,b=n;else k=null,b=n;else k=null,b=n;k!==null&&(k={offset:parseInt(k[7].value)});k===null&&(b=m);j--;j===0&&k===null&&f("[26] OffsetClause");return k}function oa(){var k,a,d,u,e,g,i,
h,o;j++;h=b;c.substr(b,8)==="BINDINGS"?(k="BINDINGS",b+=8):(k=null,j===0&&f('"BINDINGS"'));if(k!==null){a=[];for(d=V();d!==null;)a.push(d),d=V();if(a!==null)if(c.charCodeAt(b)===123?(d="{",b++):(d=null,j===0&&f('"{"')),d!==null){u=[];o=b;c.charCodeAt(b)===40?(e="(",b++):(e=null,j===0&&f('"("'));if(e!==null){i=Ha();if(i!==null)for(g=[];i!==null;)g.push(i),i=Ha();else g=null;g!==null?(c.charCodeAt(b)===41?(i=")",b++):(i=null,j===0&&f('")"')),i!==null?e=[e,g,i]:(e=null,b=o)):(e=null,b=o)}else e=null,
b=o;for(e===null&&(e=ra());e!==null;){u.push(e);o=b;c.charCodeAt(b)===40?(e="(",b++):(e=null,j===0&&f('"("'));if(e!==null){i=Ha();if(i!==null)for(g=[];i!==null;)g.push(i),i=Ha();else g=null;g!==null?(c.charCodeAt(b)===41?(i=")",b++):(i=null,j===0&&f('")"')),i!==null?e=[e,g,i]:(e=null,b=o)):(e=null,b=o)}else e=null,b=o;e===null&&(e=ra())}u!==null?(c.charCodeAt(b)===125?(e="}",b++):(e=null,j===0&&f('"}"')),e!==null?k=[k,a,d,u,e]:(k=null,b=h)):(k=null,b=h)}else k=null,b=h;else k=null,b=h}else k=null,
b=h;k=k!==null?k:"";j--;j===0&&k===null&&f("[27] BindingsClause");return k}function Ha(){var k;j++;k=W();k===null&&(k=Ra(),k===null&&(k=Sa(),k===null&&(k=Ta(),k===null&&(c.substr(b,5)==="UNDEF"?(k="UNDEF",b+=5):(k=null,j===0&&f('"UNDEF"'))))));j--;j===0&&k===null&&f("[28] BindingValue");return k}function na(){var k,a,d,u,e,g,i,D,Q,m;j++;Q=D=b;k=h();if(k!==null){a=[];for(d=o();d!==null;)a.push(d),d=o();if(a!==null)if(d=pa(),d!==null){m=b;u=[];for(e=o();e!==null;)u.push(e),e=o();if(u!==null)if(c.charCodeAt(b)===
59?(e=";",b++):(e=null,j===0&&f('";"')),e!==null){g=[];for(i=o();i!==null;)g.push(i),i=o();g!==null?(i=na(),i=i!==null?i:"",i!==null?u=[u,e,g,i]:(u=null,b=m)):(u=null,b=m)}else u=null,b=m;else u=null,b=m;u=u!==null?u:"";u!==null?k=[k,a,d,u]:(k=null,b=Q)}else k=null,b=Q;else k=null,b=Q}else k=null,b=Q;k!==null&&(k=function(b,k,a,c){b={token:"query",kind:"update"};b.prologue=k;k=[a];c.length!=null&&c[3]!=null&&c[3].units!=null&&(k=k.concat(c[3].units));b.units=k;return b}(D,k[0],k[2],k[3]));k===null&&
(b=D);j--;j===0&&k===null&&f("[30] Update");return k}function pa(){var b;j++;b=ta();b===null&&(b=ua(),b===null&&(b=va(),b===null&&(b=Ea(),b===null&&(b=Fa(),b===null&&(b=Ga(),b===null&&(b=Eb(),b===null&&(b=Cb())))))));j--;j===0&&b===null&&f("[31] Update1");return b}function ta(){var k,a,d,e,g,i,h,D,l,m,x,n,q,s,r,A;j++;r=s=b;c.charCodeAt(b)===76?(k="L",b++):(k=null,j===0&&f('"L"'));k===null&&(c.charCodeAt(b)===108?(k="l",b++):(k=null,j===0&&f('"l"')));if(k!==null)if(c.charCodeAt(b)===79?(a="O",b++):
(a=null,j===0&&f('"O"')),a===null&&(c.charCodeAt(b)===111?(a="o",b++):(a=null,j===0&&f('"o"'))),a!==null)if(c.charCodeAt(b)===65?(d="A",b++):(d=null,j===0&&f('"A"')),d===null&&(c.charCodeAt(b)===97?(d="a",b++):(d=null,j===0&&f('"a"'))),d!==null)if(c.charCodeAt(b)===68?(e="D",b++):(e=null,j===0&&f('"D"')),e===null&&(c.charCodeAt(b)===100?(e="d",b++):(e=null,j===0&&f('"d"'))),e!==null){g=[];for(i=o();i!==null;)g.push(i),i=o();if(g!==null)if(i=W(),i!==null){h=[];for(D=o();D!==null;)h.push(D),D=o();if(h!==
null){A=b;c.charCodeAt(b)===73?(D="I",b++):(D=null,j===0&&f('"I"'));D===null&&(c.charCodeAt(b)===105?(D="i",b++):(D=null,j===0&&f('"i"')));if(D!==null)if(c.charCodeAt(b)===78?(l="N",b++):(l=null,j===0&&f('"N"')),l===null&&(c.charCodeAt(b)===110?(l="n",b++):(l=null,j===0&&f('"n"'))),l!==null)if(c.charCodeAt(b)===84?(m="T",b++):(m=null,j===0&&f('"T"')),m===null&&(c.charCodeAt(b)===116?(m="t",b++):(m=null,j===0&&f('"t"'))),m!==null)if(c.charCodeAt(b)===79?(x="O",b++):(x=null,j===0&&f('"O"')),x===null&&
(c.charCodeAt(b)===111?(x="o",b++):(x=null,j===0&&f('"o"'))),x!==null){n=[];for(q=o();q!==null;)n.push(q),q=o();n!==null?(q=Ua(),q!==null?D=[D,l,m,x,n,q]:(D=null,b=A)):(D=null,b=A)}else D=null,b=A;else D=null,b=A;else D=null,b=A;else D=null,b=A;D=D!==null?D:"";D!==null?k=[k,a,d,e,g,i,h,D]:(k=null,b=r)}else k=null,b=r}else k=null,b=r;else k=null,b=r}else k=null,b=r;else k=null,b=r;else k=null,b=r;else k=null,b=r;k!==null&&(k=function(b,k,a){b={kind:"load",token:"executableunit"};b.sourceGraph=k;b.destinyGraph=
a[5];return b}(s,k[5],k[7]));k===null&&(b=s);j--;j===0&&k===null&&f("[32] Load");return k}function ua(){var k,a,d,e,g,i,h,D,l,m,n,q,z,s,r;j++;s=z=b;c.charCodeAt(b)===67?(k="C",b++):(k=null,j===0&&f('"C"'));k===null&&(c.charCodeAt(b)===99?(k="c",b++):(k=null,j===0&&f('"c"')));if(k!==null)if(c.charCodeAt(b)===76?(a="L",b++):(a=null,j===0&&f('"L"')),a===null&&(c.charCodeAt(b)===108?(a="l",b++):(a=null,j===0&&f('"l"'))),a!==null)if(c.charCodeAt(b)===69?(d="E",b++):(d=null,j===0&&f('"E"')),d===null&&(c.charCodeAt(b)===
101?(d="e",b++):(d=null,j===0&&f('"e"'))),d!==null)if(c.charCodeAt(b)===65?(e="A",b++):(e=null,j===0&&f('"A"')),e===null&&(c.charCodeAt(b)===97?(e="a",b++):(e=null,j===0&&f('"a"'))),e!==null)if(c.charCodeAt(b)===82?(g="R",b++):(g=null,j===0&&f('"R"')),g===null&&(c.charCodeAt(b)===114?(g="r",b++):(g=null,j===0&&f('"r"'))),g!==null){i=[];for(h=o();h!==null;)i.push(h),h=o();if(i!==null)if(r=b,c.charCodeAt(b)===83?(h="S",b++):(h=null,j===0&&f('"S"')),h===null&&(c.charCodeAt(b)===115?(h="s",b++):(h=null,
j===0&&f('"s"'))),h!==null?(c.charCodeAt(b)===73?(D="I",b++):(D=null,j===0&&f('"I"')),D===null&&(c.charCodeAt(b)===105?(D="i",b++):(D=null,j===0&&f('"i"'))),D!==null?(c.charCodeAt(b)===76?(l="L",b++):(l=null,j===0&&f('"L"')),l===null&&(c.charCodeAt(b)===108?(l="l",b++):(l=null,j===0&&f('"l"'))),l!==null?(c.charCodeAt(b)===69?(m="E",b++):(m=null,j===0&&f('"E"')),m===null&&(c.charCodeAt(b)===101?(m="e",b++):(m=null,j===0&&f('"e"'))),m!==null?(c.charCodeAt(b)===78?(n="N",b++):(n=null,j===0&&f('"N"')),
n===null&&(c.charCodeAt(b)===110?(n="n",b++):(n=null,j===0&&f('"n"'))),n!==null?(c.charCodeAt(b)===84?(q="T",b++):(q=null,j===0&&f('"T"')),q===null&&(c.charCodeAt(b)===116?(q="t",b++):(q=null,j===0&&f('"t"'))),q!==null?h=[h,D,l,m,n,q]:(h=null,b=r)):(h=null,b=r)):(h=null,b=r)):(h=null,b=r)):(h=null,b=r)):(h=null,b=r),h=h!==null?h:"",h!==null){D=[];for(l=o();l!==null;)D.push(l),l=o();D!==null?(l=ob(),l!==null?k=[k,a,d,e,g,i,h,D,l]:(k=null,b=s)):(k=null,b=s)}else k=null,b=s;else k=null,b=s}else k=null,
b=s;else k=null,b=s;else k=null,b=s;else k=null,b=s;else k=null,b=s;k!==null&&(k=function(b,k){var a={kind:"clear",token:"executableunit"};a.destinyGraph=k;return a}(z,k[8]));k===null&&(b=z);j--;j===0&&k===null&&f("[33] Clear");return k}function va(){var k,a,d,e,g,i,h,D,l,m,n,q,z,s;j++;z=q=b;c.charCodeAt(b)===68?(k="D",b++):(k=null,j===0&&f('"D"'));k===null&&(c.charCodeAt(b)===100?(k="d",b++):(k=null,j===0&&f('"d"')));if(k!==null)if(c.charCodeAt(b)===82?(a="R",b++):(a=null,j===0&&f('"R"')),a===null&&
(c.charCodeAt(b)===114?(a="r",b++):(a=null,j===0&&f('"r"'))),a!==null)if(c.charCodeAt(b)===79?(d="O",b++):(d=null,j===0&&f('"O"')),d===null&&(c.charCodeAt(b)===111?(d="o",b++):(d=null,j===0&&f('"o"'))),d!==null)if(c.charCodeAt(b)===80?(e="P",b++):(e=null,j===0&&f('"P"')),e===null&&(c.charCodeAt(b)===112?(e="p",b++):(e=null,j===0&&f('"p"'))),e!==null){g=[];for(i=o();i!==null;)g.push(i),i=o();if(g!==null)if(s=b,c.charCodeAt(b)===83?(i="S",b++):(i=null,j===0&&f('"S"')),i===null&&(c.charCodeAt(b)===115?
(i="s",b++):(i=null,j===0&&f('"s"'))),i!==null?(c.charCodeAt(b)===73?(h="I",b++):(h=null,j===0&&f('"I"')),h===null&&(c.charCodeAt(b)===105?(h="i",b++):(h=null,j===0&&f('"i"'))),h!==null?(c.charCodeAt(b)===76?(D="L",b++):(D=null,j===0&&f('"L"')),D===null&&(c.charCodeAt(b)===108?(D="l",b++):(D=null,j===0&&f('"l"'))),D!==null?(c.charCodeAt(b)===69?(l="E",b++):(l=null,j===0&&f('"E"')),l===null&&(c.charCodeAt(b)===101?(l="e",b++):(l=null,j===0&&f('"e"'))),l!==null?(c.charCodeAt(b)===78?(m="N",b++):(m=
null,j===0&&f('"N"')),m===null&&(c.charCodeAt(b)===110?(m="n",b++):(m=null,j===0&&f('"n"'))),m!==null?(c.charCodeAt(b)===84?(n="T",b++):(n=null,j===0&&f('"T"')),n===null&&(c.charCodeAt(b)===116?(n="t",b++):(n=null,j===0&&f('"t"'))),n!==null?i=[i,h,D,l,m,n]:(i=null,b=s)):(i=null,b=s)):(i=null,b=s)):(i=null,b=s)):(i=null,b=s)):(i=null,b=s),i=i!==null?i:"",i!==null){h=[];for(D=o();D!==null;)h.push(D),D=o();h!==null?(D=ob(),D!==null?k=[k,a,d,e,g,i,h,D]:(k=null,b=z)):(k=null,b=z)}else k=null,b=z;else k=
null,b=z}else k=null,b=z;else k=null,b=z;else k=null,b=z;else k=null,b=z;k!==null&&(k=function(b,k){var a={kind:"drop",token:"executableunit"};a.destinyGraph=k;return a}(q,k[7]));k===null&&(b=q);j--;j===0&&k===null&&f("[34] Drop");return k}function Ea(){var k,a,d,e,g,i,h,D,l,m,n,q,z,s,r,A;j++;r=s=b;c.charCodeAt(b)===67?(k="C",b++):(k=null,j===0&&f('"C"'));k===null&&(c.charCodeAt(b)===99?(k="c",b++):(k=null,j===0&&f('"c"')));if(k!==null)if(c.charCodeAt(b)===82?(a="R",b++):(a=null,j===0&&f('"R"')),
a===null&&(c.charCodeAt(b)===114?(a="r",b++):(a=null,j===0&&f('"r"'))),a!==null)if(c.charCodeAt(b)===69?(d="E",b++):(d=null,j===0&&f('"E"')),d===null&&(c.charCodeAt(b)===101?(d="e",b++):(d=null,j===0&&f('"e"'))),d!==null)if(c.charCodeAt(b)===65?(e="A",b++):(e=null,j===0&&f('"A"')),e===null&&(c.charCodeAt(b)===97?(e="a",b++):(e=null,j===0&&f('"a"'))),e!==null)if(c.charCodeAt(b)===84?(g="T",b++):(g=null,j===0&&f('"T"')),g===null&&(c.charCodeAt(b)===116?(g="t",b++):(g=null,j===0&&f('"t"'))),g!==null)if(c.charCodeAt(b)===
69?(i="E",b++):(i=null,j===0&&f('"E"')),i===null&&(c.charCodeAt(b)===101?(i="e",b++):(i=null,j===0&&f('"e"'))),i!==null){h=[];for(D=o();D!==null;)h.push(D),D=o();if(h!==null)if(A=b,c.charCodeAt(b)===83?(D="S",b++):(D=null,j===0&&f('"S"')),D===null&&(c.charCodeAt(b)===115?(D="s",b++):(D=null,j===0&&f('"s"'))),D!==null?(c.charCodeAt(b)===73?(l="I",b++):(l=null,j===0&&f('"I"')),l===null&&(c.charCodeAt(b)===105?(l="i",b++):(l=null,j===0&&f('"i"'))),l!==null?(c.charCodeAt(b)===76?(m="L",b++):(m=null,j===
0&&f('"L"')),m===null&&(c.charCodeAt(b)===108?(m="l",b++):(m=null,j===0&&f('"l"'))),m!==null?(c.charCodeAt(b)===69?(n="E",b++):(n=null,j===0&&f('"E"')),n===null&&(c.charCodeAt(b)===101?(n="e",b++):(n=null,j===0&&f('"e"'))),n!==null?(c.charCodeAt(b)===78?(q="N",b++):(q=null,j===0&&f('"N"')),q===null&&(c.charCodeAt(b)===110?(q="n",b++):(q=null,j===0&&f('"n"'))),q!==null?(c.charCodeAt(b)===84?(z="T",b++):(z=null,j===0&&f('"T"')),z===null&&(c.charCodeAt(b)===116?(z="t",b++):(z=null,j===0&&f('"t"'))),
z!==null?D=[D,l,m,n,q,z]:(D=null,b=A)):(D=null,b=A)):(D=null,b=A)):(D=null,b=A)):(D=null,b=A)):(D=null,b=A),D=D!==null?D:"",D!==null){l=[];for(m=o();m!==null;)l.push(m),m=o();l!==null?(m=Ua(),m!==null?k=[k,a,d,e,g,i,h,D,l,m]:(k=null,b=r)):(k=null,b=r)}else k=null,b=r;else k=null,b=r}else k=null,b=r;else k=null,b=r;else k=null,b=r;else k=null,b=r;else k=null,b=r;else k=null,b=r;k!==null&&(k=function(b,k){var a={kind:"create",token:"executableunit"};a.destinyGraph=k;return a}(s,k[9]));k===null&&(b=
s);j--;j===0&&k===null&&f("[35] Create");return k}function Fa(){var k,a,d,e,g,i,h,D,l,m,n,q,z,s,r;j++;r=s=b;c.charCodeAt(b)===73?(k="I",b++):(k=null,j===0&&f('"I"'));k===null&&(c.charCodeAt(b)===105?(k="i",b++):(k=null,j===0&&f('"i"')));if(k!==null)if(c.charCodeAt(b)===78?(a="N",b++):(a=null,j===0&&f('"N"')),a===null&&(c.charCodeAt(b)===110?(a="n",b++):(a=null,j===0&&f('"n"'))),a!==null)if(c.charCodeAt(b)===83?(d="S",b++):(d=null,j===0&&f('"S"')),d===null&&(c.charCodeAt(b)===115?(d="s",b++):(d=null,
j===0&&f('"s"'))),d!==null)if(c.charCodeAt(b)===69?(e="E",b++):(e=null,j===0&&f('"E"')),e===null&&(c.charCodeAt(b)===101?(e="e",b++):(e=null,j===0&&f('"e"'))),e!==null)if(c.charCodeAt(b)===82?(g="R",b++):(g=null,j===0&&f('"R"')),g===null&&(c.charCodeAt(b)===114?(g="r",b++):(g=null,j===0&&f('"r"'))),g!==null)if(c.charCodeAt(b)===84?(i="T",b++):(i=null,j===0&&f('"T"')),i===null&&(c.charCodeAt(b)===116?(i="t",b++):(i=null,j===0&&f('"t"'))),i!==null){h=[];for(D=o();D!==null;)h.push(D),D=o();if(h!==null)if(c.charCodeAt(b)===
68?(D="D",b++):(D=null,j===0&&f('"D"')),D===null&&(c.charCodeAt(b)===100?(D="d",b++):(D=null,j===0&&f('"d"'))),D!==null)if(c.charCodeAt(b)===65?(l="A",b++):(l=null,j===0&&f('"A"')),l===null&&(c.charCodeAt(b)===97?(l="a",b++):(l=null,j===0&&f('"a"'))),l!==null)if(c.charCodeAt(b)===84?(m="T",b++):(m=null,j===0&&f('"T"')),m===null&&(c.charCodeAt(b)===116?(m="t",b++):(m=null,j===0&&f('"t"'))),m!==null)if(c.charCodeAt(b)===65?(n="A",b++):(n=null,j===0&&f('"A"')),n===null&&(c.charCodeAt(b)===97?(n="a",
b++):(n=null,j===0&&f('"a"'))),n!==null){q=[];for(z=o();z!==null;)q.push(z),z=o();q!==null?(z=pb(),z!==null?k=[k,a,d,e,g,i,h,D,l,m,n,q,z]:(k=null,b=r)):(k=null,b=r)}else k=null,b=r;else k=null,b=r;else k=null,b=r;else k=null,b=r;else k=null,b=r}else k=null,b=r;else k=null,b=r;else k=null,b=r;else k=null,b=r;else k=null,b=r;else k=null,b=r;k!==null&&(k=function(b,k){var a={kind:"insertdata",token:"executableunit"};a.quads=k;return a}(s,k[12]));k===null&&(b=s);j--;j===0&&k===null&&f("[36] InsertData");
return k}function Ga(){var k,a,d,e,g,i,h,l,m,n,x,q,r,s;j++;s=r=b;c.charCodeAt(b)===68?(k="D",b++):(k=null,j===0&&f('"D"'));k===null&&(c.charCodeAt(b)===100?(k="d",b++):(k=null,j===0&&f('"d"')));if(k!==null)if(c.charCodeAt(b)===69?(a="E",b++):(a=null,j===0&&f('"E"')),a===null&&(c.charCodeAt(b)===101?(a="e",b++):(a=null,j===0&&f('"e"'))),a!==null)if(c.charCodeAt(b)===76?(d="L",b++):(d=null,j===0&&f('"L"')),d===null&&(c.charCodeAt(b)===108?(d="l",b++):(d=null,j===0&&f('"l"'))),d!==null)if(c.charCodeAt(b)===
69?(e="E",b++):(e=null,j===0&&f('"E"')),e===null&&(c.charCodeAt(b)===101?(e="e",b++):(e=null,j===0&&f('"e"'))),e!==null)if(c.charCodeAt(b)===84?(g="T",b++):(g=null,j===0&&f('"T"')),g===null&&(c.charCodeAt(b)===116?(g="t",b++):(g=null,j===0&&f('"t"'))),g!==null)if(c.charCodeAt(b)===69?(i="E",b++):(i=null,j===0&&f('"E"')),i===null&&(c.charCodeAt(b)===101?(i="e",b++):(i=null,j===0&&f('"e"'))),i!==null){h=[];for(l=o();l!==null;)h.push(l),l=o();h!==null?(c.charCodeAt(b)===68?(l="D",b++):(l=null,j===0&&
f('"D"')),l===null&&(c.charCodeAt(b)===100?(l="d",b++):(l=null,j===0&&f('"d"'))),l!==null?(c.charCodeAt(b)===65?(m="A",b++):(m=null,j===0&&f('"A"')),m===null&&(c.charCodeAt(b)===97?(m="a",b++):(m=null,j===0&&f('"a"'))),m!==null?(c.charCodeAt(b)===84?(n="T",b++):(n=null,j===0&&f('"T"')),n===null&&(c.charCodeAt(b)===116?(n="t",b++):(n=null,j===0&&f('"t"'))),n!==null?(c.charCodeAt(b)===65?(x="A",b++):(x=null,j===0&&f('"A"')),x===null&&(c.charCodeAt(b)===97?(x="a",b++):(x=null,j===0&&f('"a"'))),x!==null?
(q=pb(),q!==null?k=[k,a,d,e,g,i,h,l,m,n,x,q]:(k=null,b=s)):(k=null,b=s)):(k=null,b=s)):(k=null,b=s)):(k=null,b=s)):(k=null,b=s)}else k=null,b=s;else k=null,b=s;else k=null,b=s;else k=null,b=s;else k=null,b=s;else k=null,b=s;k!==null&&(k=function(b,k){var a={kind:"deletedata",token:"executableunit"};a.quads=k;return a}(r,k[11]));k===null&&(b=r);j--;j===0&&k===null&&f("[37] DeleteData");return k}function Eb(){var k,a,d,e,g,i,h,l,m,n,x,q,r,s,t,A;j++;A=t=b;c.charCodeAt(b)===68?(k="D",b++):(k=null,j===
0&&f('"D"'));k===null&&(c.charCodeAt(b)===100?(k="d",b++):(k=null,j===0&&f('"d"')));if(k!==null)if(c.charCodeAt(b)===69?(a="E",b++):(a=null,j===0&&f('"E"')),a===null&&(c.charCodeAt(b)===101?(a="e",b++):(a=null,j===0&&f('"e"'))),a!==null)if(c.charCodeAt(b)===76?(d="L",b++):(d=null,j===0&&f('"L"')),d===null&&(c.charCodeAt(b)===108?(d="l",b++):(d=null,j===0&&f('"l"'))),d!==null)if(c.charCodeAt(b)===69?(e="E",b++):(e=null,j===0&&f('"E"')),e===null&&(c.charCodeAt(b)===101?(e="e",b++):(e=null,j===0&&f('"e"'))),
e!==null)if(c.charCodeAt(b)===84?(g="T",b++):(g=null,j===0&&f('"T"')),g===null&&(c.charCodeAt(b)===116?(g="t",b++):(g=null,j===0&&f('"t"'))),g!==null)if(c.charCodeAt(b)===69?(i="E",b++):(i=null,j===0&&f('"E"')),i===null&&(c.charCodeAt(b)===101?(i="e",b++):(i=null,j===0&&f('"e"'))),i!==null){h=[];for(l=o();l!==null;)h.push(l),l=o();if(h!==null)if(c.charCodeAt(b)===87?(l="W",b++):(l=null,j===0&&f('"W"')),l===null&&(c.charCodeAt(b)===119?(l="w",b++):(l=null,j===0&&f('"w"'))),l!==null)if(c.charCodeAt(b)===
72?(m="H",b++):(m=null,j===0&&f('"H"')),m===null&&(c.charCodeAt(b)===104?(m="h",b++):(m=null,j===0&&f('"h"'))),m!==null)if(c.charCodeAt(b)===69?(n="E",b++):(n=null,j===0&&f('"E"')),n===null&&(c.charCodeAt(b)===101?(n="e",b++):(n=null,j===0&&f('"e"'))),n!==null)if(c.charCodeAt(b)===82?(x="R",b++):(x=null,j===0&&f('"R"')),x===null&&(c.charCodeAt(b)===114?(x="r",b++):(x=null,j===0&&f('"r"'))),x!==null)if(c.charCodeAt(b)===69?(q="E",b++):(q=null,j===0&&f('"E"')),q===null&&(c.charCodeAt(b)===101?(q="e",
b++):(q=null,j===0&&f('"e"'))),q!==null){r=[];for(s=o();s!==null;)r.push(s),s=o();r!==null?(s=Y(),s!==null?k=[k,a,d,e,g,i,h,l,m,n,x,q,r,s]:(k=null,b=A)):(k=null,b=A)}else k=null,b=A;else k=null,b=A;else k=null,b=A;else k=null,b=A;else k=null,b=A;else k=null,b=A}else k=null,b=A;else k=null,b=A;else k=null,b=A;else k=null,b=A;else k=null,b=A;else k=null,b=A;k!==null&&(k=function(b,k){var a={kind:"modify"};a.pattern=k;a["with"]=null;a.using=null;for(var c=[],f=k.patterns[0],f=f.triplesContext==null&&
f.patterns!=null?f.patterns[0].triplesContext:f.triplesContext,d=0;d<f.length;d++){var j={},e=f[d];j.subject=e.subject;j.predicate=e.predicate;j.object=e.object;j.graph=e.graph;c.push(j)}a["delete"]=c;return a}(t,k[13]));k===null&&(b=t);j--;j===0&&k===null&&f("[38] DeleteWhere");return k}function Cb(){var k,a,d,e,g,i,h,l,m,n,x,q,r,s,t,A,v;j++;h=v=A=b;c.charCodeAt(b)===87?(k="W",b++):(k=null,j===0&&f('"W"'));k===null&&(c.charCodeAt(b)===119?(k="w",b++):(k=null,j===0&&f('"w"')));if(k!==null)if(c.charCodeAt(b)===
73?(a="I",b++):(a=null,j===0&&f('"I"')),a===null&&(c.charCodeAt(b)===105?(a="i",b++):(a=null,j===0&&f('"i"'))),a!==null)if(c.charCodeAt(b)===84?(d="T",b++):(d=null,j===0&&f('"T"')),d===null&&(c.charCodeAt(b)===116?(d="t",b++):(d=null,j===0&&f('"t"'))),d!==null)if(c.charCodeAt(b)===72?(e="H",b++):(e=null,j===0&&f('"H"')),e===null&&(c.charCodeAt(b)===104?(e="h",b++):(e=null,j===0&&f('"h"'))),e!==null){g=[];for(i=o();i!==null;)g.push(i),i=o();g!==null?(i=W(),i!==null?k=[k,a,d,e,g,i]:(k=null,b=h)):(k=
null,b=h)}else k=null,b=h;else k=null,b=h;else k=null,b=h;else k=null,b=h;k=k!==null?k:"";if(k!==null){a=[];for(d=o();d!==null;)a.push(d),d=o();if(a!==null){h=b;d=Db();if(d!==null){e=[];for(g=o();g!==null;)e.push(g),g=o();e!==null?(g=gb(),g=g!==null?g:"",g!==null?d=[d,e,g]:(d=null,b=h)):(d=null,b=h)}else d=null,b=h;d===null&&(d=gb());if(d!==null){e=[];for(g=o();g!==null;)e.push(g),g=o();if(e!==null){g=[];for(i=hb();i!==null;)g.push(i),i=hb();if(g!==null){i=[];for(h=o();h!==null;)i.push(h),h=o();if(i!==
null)if(c.charCodeAt(b)===87?(h="W",b++):(h=null,j===0&&f('"W"')),h===null&&(c.charCodeAt(b)===119?(h="w",b++):(h=null,j===0&&f('"w"'))),h!==null)if(c.charCodeAt(b)===72?(l="H",b++):(l=null,j===0&&f('"H"')),l===null&&(c.charCodeAt(b)===104?(l="h",b++):(l=null,j===0&&f('"h"'))),l!==null)if(c.charCodeAt(b)===69?(m="E",b++):(m=null,j===0&&f('"E"')),m===null&&(c.charCodeAt(b)===101?(m="e",b++):(m=null,j===0&&f('"e"'))),m!==null)if(c.charCodeAt(b)===82?(n="R",b++):(n=null,j===0&&f('"R"')),n===null&&(c.charCodeAt(b)===
114?(n="r",b++):(n=null,j===0&&f('"r"'))),n!==null)if(c.charCodeAt(b)===69?(x="E",b++):(x=null,j===0&&f('"E"')),x===null&&(c.charCodeAt(b)===101?(x="e",b++):(x=null,j===0&&f('"e"'))),x!==null){q=[];for(r=o();r!==null;)q.push(r),r=o();if(q!==null)if(r=Y(),r!==null){s=[];for(t=o();t!==null;)s.push(t),t=o();s!==null?k=[k,a,d,e,g,i,h,l,m,n,x,q,r,s]:(k=null,b=v)}else k=null,b=v;else k=null,b=v}else k=null,b=v;else k=null,b=v;else k=null,b=v;else k=null,b=v;else k=null,b=v;else k=null,b=v}else k=null,b=
v}else k=null,b=v}else k=null,b=v}else k=null,b=v}else k=null,b=v;k!==null&&(k=function(b,k,a,c,f){b={kind:"modify"};b["with"]=k!=""?k[5]:null;a.length===3&&a[2]===""?(b["delete"]=a[0],b.insert=null):a.length===3&&a[0].length!=null&&a[1].length!=null&&a[2].length!=null?(b["delete"]=a[0],b.insert=a[2]):(b.insert=a,b["delete"]=null);c!=""&&(b.using=c);b.pattern=f;return b}(A,k[0],k[2],k[4],k[12]));k===null&&(b=A);j--;j===0&&k===null&&f("[39] Modify");return k}function Db(){var k,a,d,e,g,i,h,o,l;j++;
l=o=b;c.charCodeAt(b)===68?(k="D",b++):(k=null,j===0&&f('"D"'));k===null&&(c.charCodeAt(b)===100?(k="d",b++):(k=null,j===0&&f('"d"')));k!==null?(c.charCodeAt(b)===69?(a="E",b++):(a=null,j===0&&f('"E"')),a===null&&(c.charCodeAt(b)===101?(a="e",b++):(a=null,j===0&&f('"e"'))),a!==null?(c.charCodeAt(b)===76?(d="L",b++):(d=null,j===0&&f('"L"')),d===null&&(c.charCodeAt(b)===108?(d="l",b++):(d=null,j===0&&f('"l"'))),d!==null?(c.charCodeAt(b)===69?(e="E",b++):(e=null,j===0&&f('"E"')),e===null&&(c.charCodeAt(b)===
101?(e="e",b++):(e=null,j===0&&f('"e"'))),e!==null?(c.charCodeAt(b)===84?(g="T",b++):(g=null,j===0&&f('"T"')),g===null&&(c.charCodeAt(b)===116?(g="t",b++):(g=null,j===0&&f('"t"'))),g!==null?(c.charCodeAt(b)===69?(i="E",b++):(i=null,j===0&&f('"E"')),i===null&&(c.charCodeAt(b)===101?(i="e",b++):(i=null,j===0&&f('"e"'))),i!==null?(h=qb(),h!==null?k=[k,a,d,e,g,i,h]:(k=null,b=l)):(k=null,b=l)):(k=null,b=l)):(k=null,b=l)):(k=null,b=l)):(k=null,b=l)):(k=null,b=l);k!==null&&(k=k[6]);k===null&&(b=o);j--;j===
0&&k===null&&f("[40] DeleteClause");return k}function gb(){var a,d,e,u,g,i,h,o,l;j++;l=o=b;c.charCodeAt(b)===73?(a="I",b++):(a=null,j===0&&f('"I"'));a===null&&(c.charCodeAt(b)===105?(a="i",b++):(a=null,j===0&&f('"i"')));a!==null?(c.charCodeAt(b)===78?(d="N",b++):(d=null,j===0&&f('"N"')),d===null&&(c.charCodeAt(b)===110?(d="n",b++):(d=null,j===0&&f('"n"'))),d!==null?(c.charCodeAt(b)===83?(e="S",b++):(e=null,j===0&&f('"S"')),e===null&&(c.charCodeAt(b)===115?(e="s",b++):(e=null,j===0&&f('"s"'))),e!==
null?(c.charCodeAt(b)===69?(u="E",b++):(u=null,j===0&&f('"E"')),u===null&&(c.charCodeAt(b)===101?(u="e",b++):(u=null,j===0&&f('"e"'))),u!==null?(c.charCodeAt(b)===82?(g="R",b++):(g=null,j===0&&f('"R"')),g===null&&(c.charCodeAt(b)===114?(g="r",b++):(g=null,j===0&&f('"r"'))),g!==null?(c.charCodeAt(b)===84?(i="T",b++):(i=null,j===0&&f('"T"')),i===null&&(c.charCodeAt(b)===116?(i="t",b++):(i=null,j===0&&f('"t"'))),i!==null?(h=qb(),h!==null?a=[a,d,e,u,g,i,h]:(a=null,b=l)):(a=null,b=l)):(a=null,b=l)):(a=
null,b=l)):(a=null,b=l)):(a=null,b=l)):(a=null,b=l);a!==null&&(a=a[6]);a===null&&(b=o);j--;j===0&&a===null&&f("[41] InsertClause");return a}function hb(){var a,d,e,u,g,i,h,l,m,n,x,q,r,s,t,A,v;j++;A=t=b;a=[];for(d=o();d!==null;)a.push(d),d=o();if(a!==null)if(c.charCodeAt(b)===85?(d="U",b++):(d=null,j===0&&f('"U"')),d===null&&(c.charCodeAt(b)===117?(d="u",b++):(d=null,j===0&&f('"u"'))),d!==null)if(c.charCodeAt(b)===83?(e="S",b++):(e=null,j===0&&f('"S"')),e===null&&(c.charCodeAt(b)===115?(e="s",b++):
(e=null,j===0&&f('"s"'))),e!==null)if(c.charCodeAt(b)===73?(u="I",b++):(u=null,j===0&&f('"I"')),u===null&&(c.charCodeAt(b)===105?(u="i",b++):(u=null,j===0&&f('"i"'))),u!==null)if(c.charCodeAt(b)===78?(g="N",b++):(g=null,j===0&&f('"N"')),g===null&&(c.charCodeAt(b)===110?(g="n",b++):(g=null,j===0&&f('"n"'))),g!==null)if(c.charCodeAt(b)===71?(i="G",b++):(i=null,j===0&&f('"G"')),i===null&&(c.charCodeAt(b)===103?(i="g",b++):(i=null,j===0&&f('"g"'))),i!==null){h=[];for(l=o();l!==null;)h.push(l),l=o();if(h!==
null){l=W();if(l===null)if(v=b,c.charCodeAt(b)===78?(l="N",b++):(l=null,j===0&&f('"N"')),l===null&&(c.charCodeAt(b)===110?(l="n",b++):(l=null,j===0&&f('"n"'))),l!==null)if(c.charCodeAt(b)===65?(m="A",b++):(m=null,j===0&&f('"A"')),m===null&&(c.charCodeAt(b)===97?(m="a",b++):(m=null,j===0&&f('"a"'))),m!==null)if(c.charCodeAt(b)===77?(n="M",b++):(n=null,j===0&&f('"M"')),n===null&&(c.charCodeAt(b)===109?(n="m",b++):(n=null,j===0&&f('"m"'))),n!==null)if(c.charCodeAt(b)===69?(x="E",b++):(x=null,j===0&&
f('"E"')),x===null&&(c.charCodeAt(b)===101?(x="e",b++):(x=null,j===0&&f('"e"'))),x!==null)if(c.charCodeAt(b)===68?(q="D",b++):(q=null,j===0&&f('"D"')),q===null&&(c.charCodeAt(b)===100?(q="d",b++):(q=null,j===0&&f('"d"'))),q!==null){r=[];for(s=o();s!==null;)r.push(s),s=o();r!==null?(s=W(),s!==null?l=[l,m,n,x,q,r,s]:(l=null,b=v)):(l=null,b=v)}else l=null,b=v;else l=null,b=v;else l=null,b=v;else l=null,b=v;else l=null,b=v;l!==null?a=[a,d,e,u,g,i,h,l]:(a=null,b=A)}else a=null,b=A}else a=null,b=A;else a=
null,b=A;else a=null,b=A;else a=null,b=A;else a=null,b=A;else a=null,b=A;a!==null&&(a=a[7].length!=null?{kind:"named",uri:a[7][6]}:{kind:"default",uri:a[7]});a===null&&(b=t);j--;j===0&&a===null&&f("[42] UsingClause");return a}function Ua(){var a,d,e,u,g,i,h,l,m;j++;m=l=b;c.charCodeAt(b)===71?(a="G",b++):(a=null,j===0&&f('"G"'));a===null&&(c.charCodeAt(b)===103?(a="g",b++):(a=null,j===0&&f('"g"')));if(a!==null)if(c.charCodeAt(b)===82?(d="R",b++):(d=null,j===0&&f('"R"')),d===null&&(c.charCodeAt(b)===
114?(d="r",b++):(d=null,j===0&&f('"r"'))),d!==null)if(c.charCodeAt(b)===65?(e="A",b++):(e=null,j===0&&f('"A"')),e===null&&(c.charCodeAt(b)===97?(e="a",b++):(e=null,j===0&&f('"a"'))),e!==null)if(c.charCodeAt(b)===80?(u="P",b++):(u=null,j===0&&f('"P"')),u===null&&(c.charCodeAt(b)===112?(u="p",b++):(u=null,j===0&&f('"p"'))),u!==null)if(c.charCodeAt(b)===72?(g="H",b++):(g=null,j===0&&f('"H"')),g===null&&(c.charCodeAt(b)===104?(g="h",b++):(g=null,j===0&&f('"h"'))),g!==null){i=[];for(h=o();h!==null;)i.push(h),
h=o();i!==null?(h=W(),h!==null?a=[a,d,e,u,g,i,h]:(a=null,b=m)):(a=null,b=m)}else a=null,b=m;else a=null,b=m;else a=null,b=m;else a=null,b=m;else a=null,b=m;a!==null&&(a=a[6]);a===null&&(b=l);j--;j===0&&a===null&&f("[43] GraphRef");return a}function ob(){var a,d,e,u,g,i,h,o,l;j++;o=b;a=Ua();a===null&&(b=o);a===null&&(l=o=b,c.charCodeAt(b)===68?(a="D",b++):(a=null,j===0&&f('"D"')),a===null&&(c.charCodeAt(b)===100?(a="d",b++):(a=null,j===0&&f('"d"'))),a!==null?(c.charCodeAt(b)===69?(d="E",b++):(d=null,
j===0&&f('"E"')),d===null&&(c.charCodeAt(b)===101?(d="e",b++):(d=null,j===0&&f('"e"'))),d!==null?(c.charCodeAt(b)===70?(e="F",b++):(e=null,j===0&&f('"F"')),e===null&&(c.charCodeAt(b)===102?(e="f",b++):(e=null,j===0&&f('"f"'))),e!==null?(c.charCodeAt(b)===65?(u="A",b++):(u=null,j===0&&f('"A"')),u===null&&(c.charCodeAt(b)===97?(u="a",b++):(u=null,j===0&&f('"a"'))),u!==null?(c.charCodeAt(b)===85?(g="U",b++):(g=null,j===0&&f('"U"')),g===null&&(c.charCodeAt(b)===117?(g="u",b++):(g=null,j===0&&f('"u"'))),
g!==null?(c.charCodeAt(b)===76?(i="L",b++):(i=null,j===0&&f('"L"')),i===null&&(c.charCodeAt(b)===108?(i="l",b++):(i=null,j===0&&f('"l"'))),i!==null?(c.charCodeAt(b)===84?(h="T",b++):(h=null,j===0&&f('"T"')),h===null&&(c.charCodeAt(b)===116?(h="t",b++):(h=null,j===0&&f('"t"'))),h!==null?a=[a,d,e,u,g,i,h]:(a=null,b=l)):(a=null,b=l)):(a=null,b=l)):(a=null,b=l)):(a=null,b=l)):(a=null,b=l)):(a=null,b=l),a!==null&&(a="default"),a===null&&(b=o),a===null&&(l=o=b,c.charCodeAt(b)===78?(a="N",b++):(a=null,j===
0&&f('"N"')),a===null&&(c.charCodeAt(b)===110?(a="n",b++):(a=null,j===0&&f('"n"'))),a!==null?(c.charCodeAt(b)===65?(d="A",b++):(d=null,j===0&&f('"A"')),d===null&&(c.charCodeAt(b)===97?(d="a",b++):(d=null,j===0&&f('"a"'))),d!==null?(c.charCodeAt(b)===77?(e="M",b++):(e=null,j===0&&f('"M"')),e===null&&(c.charCodeAt(b)===109?(e="m",b++):(e=null,j===0&&f('"m"'))),e!==null?(c.charCodeAt(b)===69?(u="E",b++):(u=null,j===0&&f('"E"')),u===null&&(c.charCodeAt(b)===101?(u="e",b++):(u=null,j===0&&f('"e"'))),u!==
null?(c.charCodeAt(b)===68?(g="D",b++):(g=null,j===0&&f('"D"')),g===null&&(c.charCodeAt(b)===100?(g="d",b++):(g=null,j===0&&f('"d"'))),g!==null?a=[a,d,e,u,g]:(a=null,b=l)):(a=null,b=l)):(a=null,b=l)):(a=null,b=l)):(a=null,b=l),a!==null&&(a="named"),a===null&&(b=o),a===null&&(l=o=b,c.charCodeAt(b)===65?(a="A",b++):(a=null,j===0&&f('"A"')),a===null&&(c.charCodeAt(b)===97?(a="a",b++):(a=null,j===0&&f('"a"'))),a!==null?(c.charCodeAt(b)===76?(d="L",b++):(d=null,j===0&&f('"L"')),d===null&&(c.charCodeAt(b)===
108?(d="l",b++):(d=null,j===0&&f('"l"'))),d!==null?(c.charCodeAt(b)===76?(e="L",b++):(e=null,j===0&&f('"L"')),e===null&&(c.charCodeAt(b)===108?(e="l",b++):(e=null,j===0&&f('"l"'))),e!==null?a=[a,d,e]:(a=null,b=l)):(a=null,b=l)):(a=null,b=l),a!==null&&(a="all"),a===null&&(b=o))));j--;j===0&&a===null&&f("[44] GraphRefAll");return a}function qb(){var a,d,e,u,g,i,h,l,m,n;j++;n=m=b;a=[];for(d=o();d!==null;)a.push(d),d=o();if(a!==null)if(c.charCodeAt(b)===123?(d="{",b++):(d=null,j===0&&f('"{"')),d!==null){e=
[];for(u=o();u!==null;)e.push(u),u=o();if(e!==null)if(u=rb(),u!==null){g=[];for(i=o();i!==null;)g.push(i),i=o();if(g!==null)if(c.charCodeAt(b)===125?(i="}",b++):(i=null,j===0&&f('"}"')),i!==null){h=[];for(l=o();l!==null;)h.push(l),l=o();h!==null?a=[a,d,e,u,g,i,h]:(a=null,b=n)}else a=null,b=n;else a=null,b=n}else a=null,b=n;else a=null,b=n}else a=null,b=n;else a=null,b=n;a!==null&&(a=a[3].quadsContext);a===null&&(b=m);j--;j===0&&a===null&&f("[45] QuadPattern");return a}function pb(){var a,d,e,u,g,
i,h,l,m,n;j++;n=m=b;a=[];for(d=o();d!==null;)a.push(d),d=o();if(a!==null)if(c.charCodeAt(b)===123?(d="{",b++):(d=null,j===0&&f('"{"')),d!==null){e=[];for(u=o();u!==null;)e.push(u),u=o();if(e!==null)if(u=rb(),u!==null){g=[];for(i=o();i!==null;)g.push(i),i=o();if(g!==null)if(c.charCodeAt(b)===125?(i="}",b++):(i=null,j===0&&f('"}"')),i!==null){h=[];for(l=o();l!==null;)h.push(l),l=o();h!==null?a=[a,d,e,u,g,i,h]:(a=null,b=n)}else a=null,b=n;else a=null,b=n}else a=null,b=n;else a=null,b=n}else a=null,b=
n;else a=null,b=n;a!==null&&(a=a[3].quadsContext);a===null&&(b=m);j--;j===0&&a===null&&f("[46] QuadData");return a}function rb(){var a,d,e,u,g,i,h,o;j++;h=i=b;a=ya();a=a!==null?a:"";if(a!==null){d=[];o=b;e=sb();e!==null?(c.charCodeAt(b)===46?(u=".",b++):(u=null,j===0&&f('"."')),u=u!==null?u:"",u!==null?(g=ya(),g=g!==null?g:"",g!==null?e=[e,u,g]:(e=null,b=o)):(e=null,b=o)):(e=null,b=o);for(;e!==null;)d.push(e),o=b,e=sb(),e!==null?(c.charCodeAt(b)===46?(u=".",b++):(u=null,j===0&&f('"."')),u=u!==null?
u:"",u!==null?(g=ya(),g=g!==null?g:"",g!==null?e=[e,u,g]:(e=null,b=o)):(e=null,b=o)):(e=null,b=o);d!==null?a=[a,d]:(a=null,b=h)}else a=null,b=h;a!==null&&(a=function(b,a,k){b=[];if(a.triplesContext!=null&&a.triplesContext!=null)for(var c=0;c<a.triplesContext.length;c++){var f=a.triplesContext[c];f.graph=null;b.push(f)}if(k&&k.length>0&&k[0].length>0&&(b=b.concat(k[0][0].quadsContext),k[0][2]!=null&&k[0][2].triplesContext!=null))for(c=0;c<k[0][2].triplesContext.length;c++)f=k[0][2].triplesContext[c],
f.graph=null,b.push(f);return{token:"quads",quadsContext:b}}(i,a[0],a[1]));a===null&&(b=i);j--;j===0&&a===null&&f("[47] Quads");return a}function sb(){var a,d,e,g,i,h,l,m,n,q,x,r,z,s,t,A,v,R;j++;R=v=b;a=[];for(d=o();d!==null;)a.push(d),d=o();if(a!==null)if(c.charCodeAt(b)===71?(d="G",b++):(d=null,j===0&&f('"G"')),d===null&&(c.charCodeAt(b)===103?(d="g",b++):(d=null,j===0&&f('"g"'))),d!==null)if(c.charCodeAt(b)===82?(e="R",b++):(e=null,j===0&&f('"R"')),e===null&&(c.charCodeAt(b)===114?(e="r",b++):
(e=null,j===0&&f('"r"'))),e!==null)if(c.charCodeAt(b)===65?(g="A",b++):(g=null,j===0&&f('"A"')),g===null&&(c.charCodeAt(b)===97?(g="a",b++):(g=null,j===0&&f('"a"'))),g!==null)if(c.charCodeAt(b)===80?(i="P",b++):(i=null,j===0&&f('"P"')),i===null&&(c.charCodeAt(b)===112?(i="p",b++):(i=null,j===0&&f('"p"'))),i!==null)if(c.charCodeAt(b)===72?(h="H",b++):(h=null,j===0&&f('"H"')),h===null&&(c.charCodeAt(b)===104?(h="h",b++):(h=null,j===0&&f('"h"'))),h!==null){l=[];for(m=o();m!==null;)l.push(m),m=o();if(l!==
null)if(m=qa(),m!==null){n=[];for(q=o();q!==null;)n.push(q),q=o();if(n!==null)if(c.charCodeAt(b)===123?(q="{",b++):(q=null,j===0&&f('"{"')),q!==null){x=[];for(r=o();r!==null;)x.push(r),r=o();if(x!==null)if(r=ya(),r=r!==null?r:"",r!==null){z=[];for(s=o();s!==null;)z.push(s),s=o();if(z!==null)if(c.charCodeAt(b)===125?(s="}",b++):(s=null,j===0&&f('"}"')),s!==null){t=[];for(A=o();A!==null;)t.push(A),A=o();t!==null?a=[a,d,e,g,i,h,l,m,n,q,x,r,z,s,t]:(a=null,b=R)}else a=null,b=R;else a=null,b=R}else a=null,
b=R;else a=null,b=R}else a=null,b=R;else a=null,b=R}else a=null,b=R;else a=null,b=R}else a=null,b=R;else a=null,b=R;else a=null,b=R;else a=null,b=R;else a=null,b=R;else a=null,b=R;a!==null&&(a=function(b,a,k){for(var b=[],c=0;c<k.triplesContext.length;c++){var f=k.triplesContext[c];f.graph=a;b.push(f)}return{token:"quadsnottriples",quadsContext:b}}(v,a[7],a[11]));a===null&&(b=v);j--;j===0&&a===null&&f("[48] QuadsNotTriples");return a}function ya(){var a,d,e,g,i,h,l,m;j++;l=h=b;a=tb();if(a!==null){m=
b;d=[];for(e=o();e!==null;)d.push(e),e=o();if(d!==null)if(c.charCodeAt(b)===46?(e=".",b++):(e=null,j===0&&f('"."')),e!==null){g=[];for(i=o();i!==null;)g.push(i),i=o();g!==null?(i=ya(),i=i!==null?i:"",i!==null?d=[d,e,g,i]:(d=null,b=m)):(d=null,b=m)}else d=null,b=m;else d=null,b=m;d=d!==null?d:"";d!==null?a=[a,d]:(a=null,b=l)}else a=null,b=l;a!==null&&(a=function(b,a,k){b=a.triplesContext;typeof k==="object"&&k.length!=null&&k[3].triplesContext!=null&&(b=b.concat(k[3].triplesContext));return{token:"triplestemplate",
triplesContext:b}}(h,a[0],a[1]));a===null&&(b=h);j--;j===0&&a===null&&f("[49] TriplesTemplate");return a}function Y(){var a,d,e,g,i,h,l;j++;l=h=b;c.charCodeAt(b)===123?(a="{",b++):(a=null,j===0&&f('"{"'));if(a!==null){d=[];for(e=o();e!==null;)d.push(e),e=o();if(d!==null)if(e=E(),e!==null){g=[];for(i=o();i!==null;)g.push(i),i=o();g!==null?(c.charCodeAt(b)===125?(i="}",b++):(i=null,j===0&&f('"}"')),i!==null?a=[a,d,e,g,i]:(a=null,b=l)):(a=null,b=l)}else a=null,b=l;else a=null,b=l}else a=null,b=l;a!==
null&&(a=a[2]);a===null&&(b=h);if(a===null){l=h=b;c.charCodeAt(b)===123?(a="{",b++):(a=null,j===0&&f('"{"'));if(a!==null){d=[];for(e=o();e!==null;)d.push(e),e=o();if(d!==null)if(e=Hb(),e!==null){g=[];for(i=o();i!==null;)g.push(i),i=o();g!==null?(c.charCodeAt(b)===125?(i="}",b++):(i=null,j===0&&f('"}"')),i!==null?a=[a,d,e,g,i]:(a=null,b=l)):(a=null,b=l)}else a=null,b=l;else a=null,b=l}else a=null,b=l;a!==null&&(a=a[2]);a===null&&(b=h)}j--;j===0&&a===null&&f("[50] GroupGraphPattern");return a}function Hb(){var a,
d,e,g,i,h,l,m,n,q,x;j++;q=n=b;a=xa();a=a!==null?a:"";if(a!==null){d=[];for(e=o();e!==null;)d.push(e),e=o();if(d!==null){e=[];x=b;g=ub();if(g!==null){i=[];for(h=o();h!==null;)i.push(h),h=o();if(i!==null)if(c.charCodeAt(b)===46?(h=".",b++):(h=null,j===0&&f('"."')),h=h!==null?h:"",h!==null){l=[];for(m=o();m!==null;)l.push(m),m=o();l!==null?(m=xa(),m=m!==null?m:"",m!==null?g=[g,i,h,l,m]:(g=null,b=x)):(g=null,b=x)}else g=null,b=x;else g=null,b=x}else g=null,b=x;for(;g!==null;)if(e.push(g),x=b,g=ub(),g!==
null){i=[];for(h=o();h!==null;)i.push(h),h=o();if(i!==null)if(c.charCodeAt(b)===46?(h=".",b++):(h=null,j===0&&f('"."')),h=h!==null?h:"",h!==null){l=[];for(m=o();m!==null;)l.push(m),m=o();l!==null?(m=xa(),m=m!==null?m:"",m!==null?g=[g,i,h,l,m]:(g=null,b=x)):(g=null,b=x)}else g=null,b=x;else g=null,b=x}else g=null,b=x;e!==null?a=[a,d,e]:(a=null,b=q)}else a=null,b=q}else a=null,b=q;a!==null&&(a=function(b,a,k){b=[];a!=null&&a!=[]&&b.push(a);for(a=0;a<k.length;a++)for(var c=0;c<k[a].length;c++)k[a][c].token!=
null&&b.push(k[a][c]);for(var k=[],f=[],d=[],a=0;a<b.length;a++)if(b[a].token!="triplespattern"&&b[a].token!="filter"){if(f.length!=0||d.length!=0){for(var j=[],c=0;c<f.length;c++)j=j.concat(f[c].triplesContext);j.length>0&&k.push({token:"basicgraphpattern",triplesContext:j});f=[]}k.push(b[a])}else b[a].token==="triplespattern"?f.push(b[a]):d.push(b[a]);if(f.length!=0||d.length!=0){j=[];for(c=0;c<f.length;c++)j=j.concat(f[c].triplesContext);j.length>0&&k.push({token:"basicgraphpattern",triplesContext:j})}return{token:"groupgraphpattern",
patterns:k,filters:d}}(n,a[0],a[2]));a===null&&(b=n);j--;j===0&&a===null&&f("[51] GroupGraphPatternSub");return a}function xa(){var a,d,e,g,i,h,l;j++;h=i=b;a=Ib();if(a!==null){l=b;d=[];for(e=o();e!==null;)d.push(e),e=o();d!==null?(c.charCodeAt(b)===46?(e=".",b++):(e=null,j===0&&f('"."')),e!==null?(g=xa(),g=g!==null?g:"",g!==null?d=[d,e,g]:(d=null,b=l)):(d=null,b=l)):(d=null,b=l);d=d!==null?d:"";d!==null?a=[a,d]:(a=null,b=h)}else a=null,b=h;a!==null&&(a=function(b,a,k){b=a.triplesContext;typeof k===
"object"&&k.length!=null&&k[2].triplesContext!=null&&(b=b.concat(k[2].triplesContext));return{token:"triplespattern",triplesContext:b}}(i,a[0],a[1]));a===null&&(b=i);j--;j===0&&a===null&&f("[54] TriplesBlock");return a}function ub(){var b;j++;b=Jb();b===null&&(b=Kb(),b===null&&(b=Lb(),b===null&&(b=Mb(),b===null&&(b=Nb(),b===null&&(b=Ob())))));j--;j===0&&b===null&&f("[53] GraphPatternNotTriples");return b}function Kb(){var a,d,e,g,i,h;j++;h=i=b;a=[];for(d=o();d!==null;)a.push(d),d=o();if(a!==null)if(c.substr(b,
8)==="OPTIONAL"?(d="OPTIONAL",b+=8):(d=null,j===0&&f('"OPTIONAL"')),d!==null){e=[];for(g=o();g!==null;)e.push(g),g=o();e!==null?(g=Y(),g!==null?a=[a,d,e,g]:(a=null,b=h)):(a=null,b=h)}else a=null,b=h;else a=null,b=h;a!==null&&(a={token:"optionalgraphpattern",value:a[3]});a===null&&(b=i);j--;j===0&&a===null&&f("[54] OptionalGraphPattern");return a}function Mb(){var a,d,e,g,i,h,l,m,n,q,x,r;j++;r=x=b;a=[];for(d=o();d!==null;)a.push(d),d=o();if(a!==null)if(c.charCodeAt(b)===71?(d="G",b++):(d=null,j===
0&&f('"G"')),d===null&&(c.charCodeAt(b)===103?(d="g",b++):(d=null,j===0&&f('"g"'))),d!==null)if(c.charCodeAt(b)===82?(e="R",b++):(e=null,j===0&&f('"R"')),e===null&&(c.charCodeAt(b)===114?(e="r",b++):(e=null,j===0&&f('"r"'))),e!==null)if(c.charCodeAt(b)===65?(g="A",b++):(g=null,j===0&&f('"A"')),g===null&&(c.charCodeAt(b)===97?(g="a",b++):(g=null,j===0&&f('"a"'))),g!==null)if(c.charCodeAt(b)===80?(i="P",b++):(i=null,j===0&&f('"P"')),i===null&&(c.charCodeAt(b)===112?(i="p",b++):(i=null,j===0&&f('"p"'))),
i!==null)if(c.charCodeAt(b)===72?(h="H",b++):(h=null,j===0&&f('"H"')),h===null&&(c.charCodeAt(b)===104?(h="h",b++):(h=null,j===0&&f('"h"'))),h!==null){l=[];for(m=o();m!==null;)l.push(m),m=o();if(l!==null)if(m=qa(),m!==null){n=[];for(q=o();q!==null;)n.push(q),q=o();n!==null?(q=Y(),q!==null?a=[a,d,e,g,i,h,l,m,n,q]:(a=null,b=r)):(a=null,b=r)}else a=null,b=r;else a=null,b=r}else a=null,b=r;else a=null,b=r;else a=null,b=r;else a=null,b=r;else a=null,b=r;else a=null,b=r;a!==null&&(a=function(b,a,k){for(b=
0;b<k.patterns.length;b++)for(var c=k.patterns[b],d=0;d<c.triplesContext.length;d++)c.triplesContext[d].graph=a;k.token="groupgraphpattern";return k}(x,a[7],a[9]));a===null&&(b=x);j--;j===0&&a===null&&f("[55] GraphGraphPattern");return a}function Nb(){var a,d,e,g,i,h,l;j++;l=h=b;c.substr(b,7)==="SERVICE"?(a="SERVICE",b+=7):(a=null,j===0&&f('"SERVICE"'));if(a!==null){d=[];for(e=o();e!==null;)d.push(e),e=o();if(d!==null)if(e=qa(),e!==null){g=[];for(i=o();i!==null;)g.push(i),i=o();g!==null?(i=Y(),i!==
null?a=[a,d,e,g,i]:(a=null,b=l)):(a=null,b=l)}else a=null,b=l;else a=null,b=l}else a=null,b=l;a!==null&&(a={token:"servicegraphpattern",status:"todo",service:a[2],pattern:a[4]});a===null&&(b=h);j--;j===0&&a===null&&f("[56] ServiceGraphPattern");return a}function Lb(){var a,d,e,g;j++;g=e=b;c.substr(b,5)==="MINUS"?(a="MINUS",b+=5):(a=null,j===0&&f('"MINUS"'));a!==null?(d=Y(),d!==null?a=[a,d]:(a=null,b=g)):(a=null,b=g);a!==null&&(a={token:"minusgraphpattern",status:"todo",value:a[1]});a===null&&(b=e);
j--;j===0&&a===null&&f("[57] MinusGraphPattern");return a}function Jb(){var a,d,e,g,i,h,l,m,n,q,x,r,z;j++;r=x=b;a=Y();if(a!==null){d=[];z=b;e=[];for(g=o();g!==null;)e.push(g),g=o();if(e!==null)if(c.charCodeAt(b)===85?(g="U",b++):(g=null,j===0&&f('"U"')),g===null&&(c.charCodeAt(b)===117?(g="u",b++):(g=null,j===0&&f('"u"'))),g!==null)if(c.charCodeAt(b)===78?(i="N",b++):(i=null,j===0&&f('"N"')),i===null&&(c.charCodeAt(b)===110?(i="n",b++):(i=null,j===0&&f('"n"'))),i!==null)if(c.charCodeAt(b)===73?(h=
"I",b++):(h=null,j===0&&f('"I"')),h===null&&(c.charCodeAt(b)===105?(h="i",b++):(h=null,j===0&&f('"i"'))),h!==null)if(c.charCodeAt(b)===79?(l="O",b++):(l=null,j===0&&f('"O"')),l===null&&(c.charCodeAt(b)===111?(l="o",b++):(l=null,j===0&&f('"o"'))),l!==null)if(c.charCodeAt(b)===78?(m="N",b++):(m=null,j===0&&f('"N"')),m===null&&(c.charCodeAt(b)===110?(m="n",b++):(m=null,j===0&&f('"n"'))),m!==null){n=[];for(q=o();q!==null;)n.push(q),q=o();n!==null?(q=Y(),q!==null?e=[e,g,i,h,l,m,n,q]:(e=null,b=z)):(e=null,
b=z)}else e=null,b=z;else e=null,b=z;else e=null,b=z;else e=null,b=z;else e=null,b=z;else e=null,b=z;for(;e!==null;){d.push(e);z=b;e=[];for(g=o();g!==null;)e.push(g),g=o();if(e!==null)if(c.charCodeAt(b)===85?(g="U",b++):(g=null,j===0&&f('"U"')),g===null&&(c.charCodeAt(b)===117?(g="u",b++):(g=null,j===0&&f('"u"'))),g!==null)if(c.charCodeAt(b)===78?(i="N",b++):(i=null,j===0&&f('"N"')),i===null&&(c.charCodeAt(b)===110?(i="n",b++):(i=null,j===0&&f('"n"'))),i!==null)if(c.charCodeAt(b)===73?(h="I",b++):
(h=null,j===0&&f('"I"')),h===null&&(c.charCodeAt(b)===105?(h="i",b++):(h=null,j===0&&f('"i"'))),h!==null)if(c.charCodeAt(b)===79?(l="O",b++):(l=null,j===0&&f('"O"')),l===null&&(c.charCodeAt(b)===111?(l="o",b++):(l=null,j===0&&f('"o"'))),l!==null)if(c.charCodeAt(b)===78?(m="N",b++):(m=null,j===0&&f('"N"')),m===null&&(c.charCodeAt(b)===110?(m="n",b++):(m=null,j===0&&f('"n"'))),m!==null){n=[];for(q=o();q!==null;)n.push(q),q=o();n!==null?(q=Y(),q!==null?e=[e,g,i,h,l,m,n,q]:(e=null,b=z)):(e=null,b=z)}else e=
null,b=z;else e=null,b=z;else e=null,b=z;else e=null,b=z;else e=null,b=z;else e=null,b=z}d!==null?a=[a,d]:(a=null,b=r)}else a=null,b=r;a!==null&&(a=function(b,a,k){if(k.length===0)return a;else{b={token:"graphunionpattern",value:[a]};for(a=0;a<k.length;a++)a==k.length-1?b.value.push(k[a][7]):(b.value.push(k[a][7]),b={token:"graphunionpattern",value:[b]});return b}}(x,a[0],a[1]));a===null&&(b=x);j--;j===0&&a===null&&f("[58] GroupOrUnionGraphPattern");return a}function Ob(){var a,d,e,g,i,h,l,m,n,q,
x;j++;x=q=b;a=[];for(d=o();d!==null;)a.push(d),d=o();if(a!==null)if(c.charCodeAt(b)===70?(d="F",b++):(d=null,j===0&&f('"F"')),d===null&&(c.charCodeAt(b)===102?(d="f",b++):(d=null,j===0&&f('"f"'))),d!==null)if(c.charCodeAt(b)===73?(e="I",b++):(e=null,j===0&&f('"I"')),e===null&&(c.charCodeAt(b)===105?(e="i",b++):(e=null,j===0&&f('"i"'))),e!==null)if(c.charCodeAt(b)===76?(g="L",b++):(g=null,j===0&&f('"L"')),g===null&&(c.charCodeAt(b)===108?(g="l",b++):(g=null,j===0&&f('"l"'))),g!==null)if(c.charCodeAt(b)===
84?(i="T",b++):(i=null,j===0&&f('"T"')),i===null&&(c.charCodeAt(b)===116?(i="t",b++):(i=null,j===0&&f('"t"'))),i!==null)if(c.charCodeAt(b)===69?(h="E",b++):(h=null,j===0&&f('"E"')),h===null&&(c.charCodeAt(b)===101?(h="e",b++):(h=null,j===0&&f('"e"'))),h!==null)if(c.charCodeAt(b)===82?(l="R",b++):(l=null,j===0&&f('"R"')),l===null&&(c.charCodeAt(b)===114?(l="r",b++):(l=null,j===0&&f('"r"'))),l!==null){m=[];for(n=o();n!==null;)m.push(n),n=o();m!==null?(n=Ja(),n!==null?a=[a,d,e,g,i,h,l,m,n]:(a=null,b=
x)):(a=null,b=x)}else a=null,b=x;else a=null,b=x;else a=null,b=x;else a=null,b=x;else a=null,b=x;else a=null,b=x;else a=null,b=x;a!==null&&(a={token:"filter",value:a[8]});a===null&&(b=q);j--;j===0&&a===null&&f("[59] Filter");return a}function Ja(){var b;j++;b=Qa();b===null&&(b=Pa(),b===null&&(b=nb()));j--;j===0&&b===null&&f("[60] Constraint");return b}function nb(){var a,c,d,e;j++;e=d=b;a=W();a!==null?(c=vb(),c!==null?a=[a,c]:(a=null,b=e)):(a=null,b=e);a!==null&&(a=function(b,a,k){b={token:"expression",
expressionType:"irireforfunction"};b.iriref=a;b.args=k.value;return b}(d,a[0],a[1]));a===null&&(b=d);j--;j===0&&a===null&&f("[61] FunctionCall");return a}function vb(){var a,d,e,g,i,h,l,o,m;j++;l=b;a=ra();a!==null&&(a={token:"args",value:[]});a===null&&(b=l);if(a===null){o=l=b;c.charCodeAt(b)===40?(a="(",b++):(a=null,j===0&&f('"("'));if(a!==null)if(c.substr(b,8)==="DISTINCT"?(d="DISTINCT",b+=8):(d=null,j===0&&f('"DISTINCT"')),d=d!==null?d:"",d!==null)if(e=N(),e!==null){g=[];m=b;c.charCodeAt(b)===
44?(i=",",b++):(i=null,j===0&&f('","'));i!==null?(h=N(),h!==null?i=[i,h]:(i=null,b=m)):(i=null,b=m);for(;i!==null;)g.push(i),m=b,c.charCodeAt(b)===44?(i=",",b++):(i=null,j===0&&f('","')),i!==null?(h=N(),h!==null?i=[i,h]:(i=null,b=m)):(i=null,b=m);g!==null?(c.charCodeAt(b)===41?(i=")",b++):(i=null,j===0&&f('")"')),i!==null?a=[a,d,e,g,i]:(a=null,b=o)):(a=null,b=o)}else a=null,b=o;else a=null,b=o;else a=null,b=o;a!==null&&(a=function(b,a,k,c){cleanEx=[];for(b=0;b<c.length;b++)cleanEx.push(c[b][1]);c=
{token:"args"};c.value=[k].concat(cleanEx);c.distinct=a==="DISTINCT"?!0:!1;return c}(l,a[1],a[2],a[3]));a===null&&(b=l)}j--;j===0&&a===null&&f("[62] ArgList");return a}function za(){var a,d,e,g,i,h,l,o;j++;h=b;a=ra();a!==null&&(a={token:"args",value:[]});a===null&&(b=h);if(a===null){l=h=b;c.charCodeAt(b)===40?(a="(",b++):(a=null,j===0&&f('"("'));if(a!==null)if(d=N(),d!==null){e=[];o=b;c.charCodeAt(b)===44?(g=",",b++):(g=null,j===0&&f('","'));g!==null?(i=N(),i!==null?g=[g,i]:(g=null,b=o)):(g=null,
b=o);for(;g!==null;)e.push(g),o=b,c.charCodeAt(b)===44?(g=",",b++):(g=null,j===0&&f('","')),g!==null?(i=N(),i!==null?g=[g,i]:(g=null,b=o)):(g=null,b=o);e!==null?(c.charCodeAt(b)===41?(g=")",b++):(g=null,j===0&&f('")"')),g!==null?a=[a,d,e,g]:(a=null,b=l)):(a=null,b=l)}else a=null,b=l;else a=null,b=l;a!==null&&(a=function(b,a,k){cleanEx=[];for(b=0;b<k.length;b++)cleanEx.push(k[b][1]);k={token:"args"};k.value=[a].concat(cleanEx);return k}(h,a[1],a[2]));a===null&&(b=h)}j--;j===0&&a===null&&f("[63] ExpressionList");
return a}function Gb(){var a,d,e,g,i,h,l;j++;l=h=b;c.charCodeAt(b)===123?(a="{",b++):(a=null,j===0&&f('"{"'));if(a!==null){d=[];for(e=o();e!==null;)d.push(e),e=o();if(d!==null)if(e=wb(),e=e!==null?e:"",e!==null){g=[];for(i=o();i!==null;)g.push(i),i=o();g!==null?(c.charCodeAt(b)===125?(i="}",b++):(i=null,j===0&&f('"}"')),i!==null?a=[a,d,e,g,i]:(a=null,b=l)):(a=null,b=l)}else a=null,b=l;else a=null,b=l}else a=null,b=l;a!==null&&(a=a[2]);a===null&&(b=h);j--;j===0&&a===null&&f("[64] ConstructTemplate");
return a}function wb(){var a,d,e,g,i,h,l,m;j++;l=h=b;a=tb();if(a!==null){m=b;d=[];for(e=o();e!==null;)d.push(e),e=o();if(d!==null)if(c.charCodeAt(b)===46?(e=".",b++):(e=null,j===0&&f('"."')),e!==null){g=[];for(i=o();i!==null;)g.push(i),i=o();g!==null?(i=wb(),i=i!==null?i:"",i!==null?d=[d,e,g,i]:(d=null,b=m)):(d=null,b=m)}else d=null,b=m;else d=null,b=m;d=d!==null?d:"";d!==null?a=[a,d]:(a=null,b=l)}else a=null,b=l;a!==null&&(a=function(b,a,k){b=a.triplesContext;typeof k==="object"&&k.length!=null&&
k[3].triplesContext!=null&&(b=b.concat(k[3].triplesContext));return{token:"triplestemplate",triplesContext:b}}(h,a[0],a[1]));a===null&&(b=h);j--;j===0&&a===null&&f("[65] ConstructTriples");return a}function tb(){var a,c,d,e,g,i;j++;i=g=b;a=[];for(c=o();c!==null;)a.push(c),c=o();if(a!==null)if(c=Va(),c!==null){d=[];for(e=o();e!==null;)d.push(e),e=o();d!==null?(e=Ka(),e!==null?a=[a,c,d,e]:(a=null,b=i)):(a=null,b=i)}else a=null,b=i;else a=null,b=i;a!==null&&(a=function(b,a,c){b=c.triplesContext;if(c.pairs)for(var k=
0;k<c.pairs.length;k++){var d=c.pairs[k],f=null;d[1].length!=null&&(d[1]=d[1][0]);a.token&&a.token==="triplesnodecollection"?(f={subject:a.chainSubject[0],predicate:d[0],object:d[1]},b.push(f),b=b.concat(a.triplesContext)):(f={subject:a,predicate:d[0],object:d[1]},b.push(f))}c={token:"triplessamesubject"};c.triplesContext=b;c.chainSubject=a;return c}(g,a[1],a[3]));a===null&&(b=g);if(a===null){i=g=b;a=[];for(c=o();c!==null;)a.push(c),c=o();if(a!==null)if(c=Wa(),c!==null){d=[];for(e=o();e!==null;)d.push(e),
e=o();d!==null?(e=Pb(),e!==null?a=[a,c,d,e]:(a=null,b=i)):(a=null,b=i)}else a=null,b=i;else a=null,b=i;a!==null&&(a=function(b,a,c){var b=a.triplesContext,k=a.chainSubject;if(c.pairs)for(var d=0;d<c.pairs.length;d++){var f=c.pairs[d];f[1].length!=null&&(f[1]=f[1][0]);if(a.token==="triplesnodecollection")for(var e=0;e<k.length;e++){var j=k[e];if(j.triplesContext!=null){var g={subject:j.chainSubject,predicate:f[0],object:f[1]};b.concat(j.triplesContext)}else g={subject:k[e],predicate:f[0],object:f[1]},
b.push(g)}else g={subject:k,predicate:f[0],object:f[1]},b.push(g)}a={token:"triplessamesubject"};a.triplesContext=b;a.chainSubject=k;return a}(g,a[1],a[3]));a===null&&(b=g)}j--;j===0&&a===null&&f("[66] TriplesSameSubject");return a}function Ka(){var a,d,e,g,i,h,l,m,n,q,x,r,z,s;j++;r=x=b;a=Xa();if(a!==null){d=[];for(e=o();e!==null;)d.push(e),e=o();if(d!==null)if(e=sa(),e!==null){g=[];z=b;i=[];for(h=o();h!==null;)i.push(h),h=o();if(i!==null)if(c.charCodeAt(b)===59?(h=";",b++):(h=null,j===0&&f('";"')),
h!==null){l=[];for(m=o();m!==null;)l.push(m),m=o();if(l!==null){s=b;m=Xa();if(m!==null){n=[];for(q=o();q!==null;)n.push(q),q=o();n!==null?(q=sa(),q!==null?m=[m,n,q]:(m=null,b=s)):(m=null,b=s)}else m=null,b=s;m=m!==null?m:"";m!==null?i=[i,h,l,m]:(i=null,b=z)}else i=null,b=z}else i=null,b=z;else i=null,b=z;for(;i!==null;){g.push(i);z=b;i=[];for(h=o();h!==null;)i.push(h),h=o();if(i!==null)if(c.charCodeAt(b)===59?(h=";",b++):(h=null,j===0&&f('";"')),h!==null){l=[];for(m=o();m!==null;)l.push(m),m=o();
if(l!==null){s=b;m=Xa();if(m!==null){n=[];for(q=o();q!==null;)n.push(q),q=o();n!==null?(q=sa(),q!==null?m=[m,n,q]:(m=null,b=s)):(m=null,b=s)}else m=null,b=s;m=m!==null?m:"";m!==null?i=[i,h,l,m]:(i=null,b=z)}else i=null,b=z}else i=null,b=z;else i=null,b=z}g!==null?a=[a,d,e,g]:(a=null,b=r)}else a=null,b=r;else a=null,b=r}else a=null,b=r;a!==null&&(a=function(b,a,c,k){token={token:"propertylist"};for(var b=[],d=[],f=0;f<c.length;f++)c[f].triplesContext!=null?(b=b.concat(c[f].triplesContext),c[f].token===
"triplesnodecollection"&&c[f].chainSubject.length!=null?d.push([a,c[f].chainSubject[0]]):d.push([a,c[f].chainSubject])):d.push([a,c[f]]);for(f=0;f<k.length;f++)for(var c=k[f][3],a=c[0],c=c[2]||[],e=0;e<c.length;e++)c[e].triplesContext!=null?(b=b.concat(c[e].triplesContext),d.push([a,c[e].chainSubject])):d.push([a,c[e]]);token.pairs=d;token.triplesContext=b;return token}(x,a[0],a[2],a[3]));a===null&&(b=x);j--;j===0&&a===null&&f("[67] PropertyListNotEmpty");return a}function Pb(){var b;j++;b=Ka();b=
b!==null?b:"";j--;j===0&&b===null&&f("[68] PropertyList");return b}function sa(){var a,d,e,g,i,h,l,m,n;j++;m=l=b;a=Aa();if(a!==null){d=[];for(e=o();e!==null;)d.push(e),e=o();if(d!==null){e=[];n=b;c.charCodeAt(b)===44?(g=",",b++):(g=null,j===0&&f('","'));if(g!==null){i=[];for(h=o();h!==null;)i.push(h),h=o();i!==null?(h=Aa(),h!==null?g=[g,i,h]:(g=null,b=n)):(g=null,b=n)}else g=null,b=n;for(;g!==null;)if(e.push(g),n=b,c.charCodeAt(b)===44?(g=",",b++):(g=null,j===0&&f('","')),g!==null){i=[];for(h=o();h!==
null;)i.push(h),h=o();i!==null?(h=Aa(),h!==null?g=[g,i,h]:(g=null,b=n)):(g=null,b=n)}else g=null,b=n;e!==null?a=[a,d,e]:(a=null,b=m)}else a=null,b=m}else a=null,b=m;a!==null&&(a=function(b,a,c){b=[];b.push(a);for(a=0;a<c.length;a++)for(var k=0;k<c[a].length;k++)typeof c[a][k]=="object"&&c[a][k].token!=null&&b.push(c[a][k]);return b}(l,a[0],a[2]));a===null&&(b=l);j--;j===0&&a===null&&f("[69] ObjectList");return a}function Xa(){var a,d;j++;a=qa();a===null&&(d=b,c.charCodeAt(b)===97?(a="a",b++):(a=null,
j===0&&f('"a"')),a!==null&&(a={token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"}),a===null&&(b=d));j--;j===0&&a===null&&f("[71] Verb");return a}function Ib(){var a,c,d,e,g,i;j++;i=g=b;a=[];for(c=o();c!==null;)a.push(c),c=o();if(a!==null)if(c=Va(),c!==null){d=[];for(e=o();e!==null;)d.push(e),e=o();d!==null?(e=Qb(),e!==null?a=[a,c,d,e]:(a=null,b=i)):(a=null,b=i)}else a=null,b=i;else a=null,b=i;a!==null&&(a=function(b,a,c){b=c.triplesContext;if(c.pairs)for(var k=
0;k<c.pairs.length;k++){var d=c.pairs[k],f=null;d[1].length!=null&&(d[1]=d[1][0]);a.token&&a.token==="triplesnodecollection"?(f={subject:a.chainSubject[0],predicate:d[0],object:d[1]},b.push(f),b=b.concat(a.triplesContext)):(f={subject:a,predicate:d[0],object:d[1]},b.push(f))}c={token:"triplessamesubject"};c.triplesContext=b;c.chainSubject=a;return c}(g,a[1],a[3]));a===null&&(b=g);if(a===null){i=g=b;a=[];for(c=o();c!==null;)a.push(c),c=o();if(a!==null)if(c=Wa(),c!==null){d=[];for(e=o();e!==null;)d.push(e),
e=o();d!==null?(e=Rb(),e!==null?a=[a,c,d,e]:(a=null,b=i)):(a=null,b=i)}else a=null,b=i;else a=null,b=i;a!==null&&(a=function(b,a,c){var b=a.triplesContext,k=a.chainSubject;if(c.pairs)for(var d=0;d<c.pairs.length;d++){var f=c.pairs[d];f[1].length!=null&&(f[1]=f[1][0]);if(a.token==="triplesnodecollection")for(var e=0;e<k.length;e++){var j=k[e];if(j.triplesContext!=null){var g={subject:j.chainSubject,predicate:f[0],object:f[1]};b.concat(j.triplesContext)}else g={subject:k[e],predicate:f[0],object:f[1]},
b.push(g)}else g={subject:k,predicate:f[0],object:f[1]},b.push(g)}a={token:"triplessamesubject"};a.triplesContext=b;a.chainSubject=k;return a}(g,a[1],a[3]));a===null&&(b=g)}j--;j===0&&a===null&&f("[72] TriplesSameSubjectPath");return a}function Qb(){var a,d,e,g,i,h,l,m,n,q,x,r,t;j++;x=q=b;a=Ya();a===null&&(a=V());if(a!==null){d=[];for(e=o();e!==null;)d.push(e),e=o();if(d!==null)if(e=sa(),e!==null){g=[];r=b;i=[];for(h=o();h!==null;)i.push(h),h=o();if(i!==null)if(c.charCodeAt(b)===59?(h=";",b++):(h=
null,j===0&&f('";"')),h!==null){l=[];for(m=o();m!==null;)l.push(m),m=o();l!==null?(t=b,m=Ya(),m===null&&(m=V()),m!==null?(n=sa(),n!==null?m=[m,n]:(m=null,b=t)):(m=null,b=t),m=m!==null?m:"",m!==null?i=[i,h,l,m]:(i=null,b=r)):(i=null,b=r)}else i=null,b=r;else i=null,b=r;for(;i!==null;){g.push(i);r=b;i=[];for(h=o();h!==null;)i.push(h),h=o();if(i!==null)if(c.charCodeAt(b)===59?(h=";",b++):(h=null,j===0&&f('";"')),h!==null){l=[];for(m=o();m!==null;)l.push(m),m=o();l!==null?(t=b,m=Ya(),m===null&&(m=V()),
m!==null?(n=sa(),n!==null?m=[m,n]:(m=null,b=t)):(m=null,b=t),m=m!==null?m:"",m!==null?i=[i,h,l,m]:(i=null,b=r)):(i=null,b=r)}else i=null,b=r;else i=null,b=r}g!==null?a=[a,d,e,g]:(a=null,b=x)}else a=null,b=x;else a=null,b=x}else a=null,b=x;a!==null&&(a=function(b,a,c,k){token={token:"propertylist"};for(var b=[],d=[],f=0;f<c.length;f++)c[f].triplesContext!=null?(b=b.concat(c[f].triplesContext),c[f].token==="triplesnodecollection"&&c[f].chainSubject.length!=null?d.push([a,c[f].chainSubject[0]]):d.push([a,
c[f].chainSubject])):d.push([a,c[f]]);for(f=0;f<k.length;f++)for(var c=k[f][3],a=c[0],c=c[1]||[],e=0;e<c.length;e++)c[e].triplesContext!=null?(b=b.concat(c[e].triplesContext),d.push([a,c[e].chainSubject])):d.push([a,c[e]]);token.pairs=d;token.triplesContext=b;return token}(q,a[0],a[2],a[3]));a===null&&(b=q);j--;j===0&&a===null&&f("[73] PropertyListNotEmptyPath");return a}function Rb(){var b;j++;b=Ka();b=b!==null?b:"";j--;j===0&&b===null&&f("[74] PropertyListPath");return b}function Ya(){var a,c;j++;
c=b;a=xb();a===null&&(b=c);j--;j===0&&a===null&&f("[75]");return a}function xb(){var a,d,e,g,i,h,l;j++;h=i=b;a=Za();if(a!==null){d=[];l=b;c.charCodeAt(b)===124?(e="|",b++):(e=null,j===0&&f('"|"'));e!==null?(g=Za(),g!==null?e=[e,g]:(e=null,b=l)):(e=null,b=l);for(;e!==null;)d.push(e),l=b,c.charCodeAt(b)===124?(e="|",b++):(e=null,j===0&&f('"|"')),e!==null?(g=Za(),g!==null?e=[e,g]:(e=null,b=l)):(e=null,b=l);d!==null?a=[a,d]:(a=null,b=h)}else a=null,b=h;a!==null&&(a=function(b,a,c){if(c==null||c.length===
0)return a;else{b=[];for(a=0;a<c.length;a++)b.push(c[1]);c={token:"path",kind:"alternative"};c.value=b;return c}}(i,a[0],a[1]));a===null&&(b=i);j--;j===0&&a===null&&f("[78] PathAlternative");return a}function Za(){var a,d,e,g,i,h,l;j++;h=i=b;a=$a();if(a!==null){d=[];l=b;c.charCodeAt(b)===47?(e="/",b++):(e=null,j===0&&f('"/"'));e!==null?(g=$a(),g!==null?e=[e,g]:(e=null,b=l)):(e=null,b=l);for(;e!==null;)d.push(e),l=b,c.charCodeAt(b)===47?(e="/",b++):(e=null,j===0&&f('"/"')),e!==null?(g=$a(),g!==null?
e=[e,g]:(e=null,b=l)):(e=null,b=l);d!==null?a=[a,d]:(a=null,b=h)}else a=null,b=h;a!==null&&(a=function(b,a,c){if(c==null||c.length===0)return a;else{b=[a];for(a=0;a<c.length;a++)b.push(c[a][1]);c={token:"path",kind:"sequence"};c.value=b;return c}}(i,a[0],a[1]));a===null&&(b=i);j--;j===0&&a===null&&f("[79] PathSequence");return a}function yb(){var a,c,d,e;j++;e=d=b;a=Sb();a!==null?(c=Tb(),c=c!==null?c:"",c!==null?a=[a,c]:(a=null,b=e)):(a=null,b=e);a!==null&&(a=function(b,a,c){if(a.token&&a.token!=
"path"&&c=="")return a;else if(a.token&&a.token!=k&&c!=""){var k={token:"path",kind:"element"};k.value=a;k.modifier=c;return k}else return a.modifier=c,a}(d,a[0],a[1]));a===null&&(b=d);j--;j===0&&a===null&&f("[88] PathElt");return a}function $a(){var a,d,e,g;j++;a=yb();a===null&&(g=e=b,c.charCodeAt(b)===94?(a="^",b++):(a=null,j===0&&f('"^"')),a!==null?(d=yb(),d!==null?a=[a,d]:(a=null,b=g)):(a=null,b=g),a!==null&&(a=function(a,b){var c={token:"path",kind:"inversePath"};c.value=b;return c}(e,a[1])),
a===null&&(b=e));j--;j===0&&a===null&&f("[81] PathEltOrInverse");return a}function Tb(){var a,d,e,g,i,h,l,m,o;j++;c.charCodeAt(b)===42?(a="*",b++):(a=null,j===0&&f('"*"'));a===null&&(c.charCodeAt(b)===63?(a="?",b++):(a=null,j===0&&f('"?"')),a===null&&(c.charCodeAt(b)===43?(a="+",b++):(a=null,j===0&&f('"+"')),a===null&&(h=b,c.charCodeAt(b)===123?(a="{",b++):(a=null,j===0&&f('"{"')),a!==null?(l=b,d=ia(),d!==null?(m=b,c.charCodeAt(b)===44?(e=",",b++):(e=null,j===0&&f('","')),e!==null?(c.charCodeAt(b)===
125?(g="}",b++):(g=null,j===0&&f('"}"')),g===null&&(o=b,g=ia(),g!==null?(c.charCodeAt(b)===125?(i="}",b++):(i=null,j===0&&f('"}"')),i!==null?g=[g,i]:(g=null,b=o)):(g=null,b=o)),g!==null?e=[e,g]:(e=null,b=m)):(e=null,b=m),e===null&&(c.charCodeAt(b)===125?(e="}",b++):(e=null,j===0&&f('"}"'))),e!==null?d=[d,e]:(d=null,b=l)):(d=null,b=l),d===null&&(l=b,c.charCodeAt(b)===44?(d=",",b++):(d=null,j===0&&f('","')),d!==null?(e=ia(),e!==null?(c.charCodeAt(b)===125?(g="}",b++):(g=null,j===0&&f('"}"')),g!==null?
d=[d,e,g]:(d=null,b=l)):(d=null,b=l)):(d=null,b=l)),d!==null?a=[a,d]:(a=null,b=h)):(a=null,b=h))));j--;j===0&&a===null&&f("[82] PathMod");return a}function Sb(){var a,d,e,g,i;j++;a=W();a===null&&(g=b,c.charCodeAt(b)===97?(a="a",b++):(a=null,j===0&&f('"a"')),a!==null&&(a={token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"}),a===null&&(b=g),a===null&&(g=b,c.charCodeAt(b)===33?(a="!",b++):(a=null,j===0&&f('"!"')),a!==null?(d=Ub(),d!==null?a=[a,d]:(a=null,b=g)):
(a=null,b=g),a===null&&(i=g=b,c.charCodeAt(b)===40?(a="(",b++):(a=null,j===0&&f('"("')),a!==null?(d=xb(),d!==null?(c.charCodeAt(b)===41?(e=")",b++):(e=null,j===0&&f('")"')),e!==null?a=[a,d,e]:(a=null,b=i)):(a=null,b=i)):(a=null,b=i),a!==null&&(a=a[1]),a===null&&(b=g))));j--;j===0&&a===null&&f("[83] PathPrimary");return a}function Ub(){var a,d,e,g,i,h,l,m;a=La();if(a===null)if(h=b,c.charCodeAt(b)===40?(a="(",b++):(a=null,j===0&&f('"("')),a!==null){l=b;d=La();if(d!==null){e=[];m=b;c.charCodeAt(b)===
124?(g="|",b++):(g=null,j===0&&f('"|"'));g!==null?(i=La(),i!==null?g=[g,i]:(g=null,b=m)):(g=null,b=m);for(;g!==null;)e.push(g),m=b,c.charCodeAt(b)===124?(g="|",b++):(g=null,j===0&&f('"|"')),g!==null?(i=La(),i!==null?g=[g,i]:(g=null,b=m)):(g=null,b=m);e!==null?d=[d,e]:(d=null,b=l)}else d=null,b=l;d=d!==null?d:"";d!==null?(c.charCodeAt(b)===41?(e=")",b++):(e=null,j===0&&f('")"')),e!==null?a=[a,d,e]:(a=null,b=h)):(a=null,b=h)}else a=null,b=h;return a}function La(){var a,d,e;j++;a=W();a===null&&(c.charCodeAt(b)===
97?(a="a",b++):(a=null,j===0&&f('"a"')),a===null&&(e=b,c.charCodeAt(b)===94?(a="^",b++):(a=null,j===0&&f('"^"')),a!==null?(d=W(),d===null&&(c.charCodeAt(b)===97?(d="a",b++):(d=null,j===0&&f('"a"'))),d!==null?a=[a,d]:(a=null,b=e)):(a=null,b=e)));j--;j===0&&a===null&&f("[85] PathOneInPropertySet");return a}function Wa(){var a,c;j++;c=b;a=Vb();a!==null&&(a=function(a,b){triplesContext=[];chainSubject=[];for(var c=null,k=0;k<b.length;k++)ja++,c=null,b[k].chainSubject==null&&b[k].triplesContext==null?
c=b[k]:(c=b[k].chainSubject,triplesContext=triplesContext.concat(nextSubject.triplesContext)),c={subject:{token:"blank",label:"_:"+ja},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#first"},object:c},k==0&&chainSubject.push(c.subject),triplesContext.push(c),c=k===b.length-1?{subject:{token:"blank",label:"_:"+ja},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"uri",prefix:null,suffix:null,
value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}}:{subject:{token:"blank",label:"_:"+ja},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"blank",label:"_:"+(ja+1)}},triplesContext.push(c);return{token:"triplesnodecollection",triplesContext:triplesContext,chainSubject:chainSubject}}(c,a));a===null&&(b=c);a===null&&(a=Wb());j--;j===0&&a===null&&f("[87] TriplesNode");return a}function Wb(){var a,d,e,g,i,h,l,m,n,q;j++;q=n=b;
a=[];for(d=o();d!==null;)a.push(d),d=o();if(a!==null)if(c.charCodeAt(b)===91?(d="[",b++):(d=null,j===0&&f('"["')),d!==null){e=[];for(g=o();g!==null;)e.push(g),g=o();if(e!==null)if(g=Ka(),g!==null){i=[];for(h=o();h!==null;)i.push(h),h=o();if(i!==null)if(c.charCodeAt(b)===93?(h="]",b++):(h=null,j===0&&f('"]"')),h!==null){l=[];for(m=o();m!==null;)l.push(m),m=o();l!==null?a=[a,d,e,g,i,h,l]:(a=null,b=q)}else a=null,b=q;else a=null,b=q}else a=null,b=q;else a=null,b=q}else a=null,b=q;else a=null,b=q;a!==
null&&(a=function(a,b){ja++;for(var c={token:"blank",label:"_:"+ja},k=[],d=0;d<b.pairs.length;d++){var f=b.pairs[d],e={};e.subject=c;e.predicate=f[0];f[1].length!=null&&(f[1]=f[1][0]);e.object=f[1];k.push(e)}return{token:"triplesnode",kind:"blanknodepropertylist",triplesContext:b.triplesContext.concat(k),chainSubject:c}}(n,a[3]));a===null&&(b=n);j--;j===0&&a===null&&f("[88] BlankNodePropertyList");return a}function Vb(){var a,d,e,g,i,h,l,m,n,q;j++;q=n=b;a=[];for(d=o();d!==null;)a.push(d),d=o();if(a!==
null)if(c.charCodeAt(b)===40?(d="(",b++):(d=null,j===0&&f('"("')),d!==null){e=[];for(g=o();g!==null;)e.push(g),g=o();if(e!==null){i=Aa();if(i!==null)for(g=[];i!==null;)g.push(i),i=Aa();else g=null;if(g!==null){i=[];for(h=o();h!==null;)i.push(h),h=o();if(i!==null)if(c.charCodeAt(b)===41?(h=")",b++):(h=null,j===0&&f('")"')),h!==null){l=[];for(m=o();m!==null;)l.push(m),m=o();l!==null?a=[a,d,e,g,i,h,l]:(a=null,b=q)}else a=null,b=q;else a=null,b=q}else a=null,b=q}else a=null,b=q}else a=null,b=q;else a=
null,b=q;a!==null&&(a=a[3]);a===null&&(b=n);j--;j===0&&a===null&&f("[89] Collection");return a}function Aa(){var a,c,d,e,g,i;j++;i=g=b;a=[];for(c=o();c!==null;)a.push(c),c=o();if(a!==null)if(c=Va(),c!==null){d=[];for(e=o();e!==null;)d.push(e),e=o();d!==null?a=[a,c,d]:(a=null,b=i)}else a=null,b=i;else a=null,b=i;if(a===null){i=b;a=[];for(c=o();c!==null;)a.push(c),c=o();if(a!==null)if(c=Wa(),c!==null){d=[];for(e=o();e!==null;)d.push(e),e=o();d!==null?a=[a,c,d]:(a=null,b=i)}else a=null,b=i;else a=null,
b=i}a!==null&&(a=a[1]);a===null&&(b=g);j--;j===0&&a===null&&f("[90] GraphNode");return a}function Va(){var a;j++;a=V();a===null&&(a=Xb());j--;j===0&&a===null&&f("[91] VarOrTerm");return a}function qa(){var a;j++;a=V();a===null&&(a=W());j--;j===0&&a===null&&f("[92] VarOrIRIref");return a}function V(){var a,c;j++;c=b;a=Yb();a===null&&(a=Zb(),a===null&&(a=$b()));a!==null&&(a=function(a,b){var c={token:"var"};c.value=b.value;c.parameterized=b.parameterized;c.required=b.required;return c}(c,a));a===null&&
(b=c);j--;j===0&&a===null&&f("[93] Var");return a}function Xb(){var a;j++;a=W();a===null&&(a=Ra(),a===null&&(a=Sa(),a===null&&(a=Ta(),a===null&&(a=ac(),a===null&&(a=ra())))));j--;j===0&&a===null&&f("[94] GraphTerm");return a}function N(){var a,d,e,g,i,h,l,m,n;j++;m=l=b;a=ab();if(a!==null){d=[];n=b;e=[];for(g=o();g!==null;)e.push(g),g=o();if(e!==null)if(c.substr(b,2)==="||"?(g="||",b+=2):(g=null,j===0&&f('"||"')),g!==null){i=[];for(h=o();h!==null;)i.push(h),h=o();i!==null?(h=ab(),h!==null?e=[e,g,i,
h]:(e=null,b=n)):(e=null,b=n)}else e=null,b=n;else e=null,b=n;for(;e!==null;){d.push(e);n=b;e=[];for(g=o();g!==null;)e.push(g),g=o();if(e!==null)if(c.substr(b,2)==="||"?(g="||",b+=2):(g=null,j===0&&f('"||"')),g!==null){i=[];for(h=o();h!==null;)i.push(h),h=o();i!==null?(h=ab(),h!==null?e=[e,g,i,h]:(e=null,b=n)):(e=null,b=n)}else e=null,b=n;else e=null,b=n}d!==null?a=[a,d]:(a=null,b=m)}else a=null,b=m;a!==null&&(a=function(a,b,c){if(c.length===0)return b;for(var a={token:"expression",expressionType:"conditionalor"},
b=[b],d=0;d<c.length;d++)b.push(c[d][3]);a.operands=b;return a}(l,a[0],a[1]));a===null&&(b=l);j--;j===0&&a===null&&f("[96] ConditionalOrExpression");return a}function ab(){var a,d,e,g,i,h,l,m,n;j++;m=l=b;a=bb();if(a!==null){d=[];n=b;e=[];for(g=o();g!==null;)e.push(g),g=o();if(e!==null)if(c.substr(b,2)==="&&"?(g="&&",b+=2):(g=null,j===0&&f('"&&"')),g!==null){i=[];for(h=o();h!==null;)i.push(h),h=o();i!==null?(h=bb(),h!==null?e=[e,g,i,h]:(e=null,b=n)):(e=null,b=n)}else e=null,b=n;else e=null,b=n;for(;e!==
null;){d.push(e);n=b;e=[];for(g=o();g!==null;)e.push(g),g=o();if(e!==null)if(c.substr(b,2)==="&&"?(g="&&",b+=2):(g=null,j===0&&f('"&&"')),g!==null){i=[];for(h=o();h!==null;)i.push(h),h=o();i!==null?(h=bb(),h!==null?e=[e,g,i,h]:(e=null,b=n)):(e=null,b=n)}else e=null,b=n;else e=null,b=n}d!==null?a=[a,d]:(a=null,b=m)}else a=null,b=m;a!==null&&(a=function(a,b,c){if(c.length===0)return b;for(var a={token:"expression",expressionType:"conditionaland"},b=[b],d=0;d<c.length;d++)b.push(c[d][3]);a.operands=
b;return a}(l,a[0],a[1]));a===null&&(b=l);j--;j===0&&a===null&&f("[97] ConditionalAndExpression");return a}function bb(){var a,d,e,g,i,h,l,m,n,q,x,r,t,s;j++;t=r=b;a=X();if(a!==null){d=[];s=b;e=[];for(g=o();g!==null;)e.push(g),g=o();if(e!==null)if(c.charCodeAt(b)===61?(g="=",b++):(g=null,j===0&&f('"="')),g!==null){i=[];for(h=o();h!==null;)i.push(h),h=o();i!==null?(h=X(),h!==null?e=[e,g,i,h]:(e=null,b=s)):(e=null,b=s)}else e=null,b=s;else e=null,b=s;if(e===null){s=b;e=[];for(g=o();g!==null;)e.push(g),
g=o();if(e!==null)if(c.substr(b,2)==="!="?(g="!=",b+=2):(g=null,j===0&&f('"!="')),g!==null){i=[];for(h=o();h!==null;)i.push(h),h=o();i!==null?(h=X(),h!==null?e=[e,g,i,h]:(e=null,b=s)):(e=null,b=s)}else e=null,b=s;else e=null,b=s;if(e===null){s=b;e=[];for(g=o();g!==null;)e.push(g),g=o();if(e!==null)if(c.charCodeAt(b)===60?(g="<",b++):(g=null,j===0&&f('"<"')),g!==null){i=[];for(h=o();h!==null;)i.push(h),h=o();i!==null?(h=X(),h!==null?e=[e,g,i,h]:(e=null,b=s)):(e=null,b=s)}else e=null,b=s;else e=null,
b=s;if(e===null){s=b;e=[];for(g=o();g!==null;)e.push(g),g=o();if(e!==null)if(c.charCodeAt(b)===62?(g=">",b++):(g=null,j===0&&f('">"')),g!==null){i=[];for(h=o();h!==null;)i.push(h),h=o();i!==null?(h=X(),h!==null?e=[e,g,i,h]:(e=null,b=s)):(e=null,b=s)}else e=null,b=s;else e=null,b=s;if(e===null){s=b;e=[];for(g=o();g!==null;)e.push(g),g=o();if(e!==null)if(c.substr(b,2)==="<="?(g="<=",b+=2):(g=null,j===0&&f('"<="')),g!==null){i=[];for(h=o();h!==null;)i.push(h),h=o();i!==null?(h=X(),h!==null?e=[e,g,i,
h]:(e=null,b=s)):(e=null,b=s)}else e=null,b=s;else e=null,b=s;if(e===null){s=b;e=[];for(g=o();g!==null;)e.push(g),g=o();if(e!==null)if(c.substr(b,2)===">="?(g=">=",b+=2):(g=null,j===0&&f('">="')),g!==null){i=[];for(h=o();h!==null;)i.push(h),h=o();i!==null?(h=X(),h!==null?e=[e,g,i,h]:(e=null,b=s)):(e=null,b=s)}else e=null,b=s;else e=null,b=s;if(e===null){s=b;e=[];for(g=o();g!==null;)e.push(g),g=o();if(e!==null)if(c.charCodeAt(b)===73?(g="I",b++):(g=null,j===0&&f('"I"')),g===null&&(c.charCodeAt(b)===
105?(g="i",b++):(g=null,j===0&&f('"i"'))),g!==null)if(c.charCodeAt(b)===78?(i="N",b++):(i=null,j===0&&f('"N"')),i===null&&(c.charCodeAt(b)===110?(i="n",b++):(i=null,j===0&&f('"n"'))),i!==null){h=[];for(l=o();l!==null;)h.push(l),l=o();h!==null?(l=za(),l!==null?e=[e,g,i,h,l]:(e=null,b=s)):(e=null,b=s)}else e=null,b=s;else e=null,b=s;else e=null,b=s;if(e===null){s=b;e=[];for(g=o();g!==null;)e.push(g),g=o();if(e!==null)if(c.charCodeAt(b)===78?(g="N",b++):(g=null,j===0&&f('"N"')),g===null&&(c.charCodeAt(b)===
110?(g="n",b++):(g=null,j===0&&f('"n"'))),g!==null)if(c.charCodeAt(b)===79?(i="O",b++):(i=null,j===0&&f('"O"')),i===null&&(c.charCodeAt(b)===111?(i="o",b++):(i=null,j===0&&f('"o"'))),i!==null)if(c.charCodeAt(b)===84?(h="T",b++):(h=null,j===0&&f('"T"')),h===null&&(c.charCodeAt(b)===116?(h="t",b++):(h=null,j===0&&f('"t"'))),h!==null){l=[];for(m=o();m!==null;)l.push(m),m=o();if(l!==null)if(c.charCodeAt(b)===73?(m="I",b++):(m=null,j===0&&f('"I"')),m===null&&(c.charCodeAt(b)===105?(m="i",b++):(m=null,
j===0&&f('"i"'))),m!==null)if(c.charCodeAt(b)===78?(n="N",b++):(n=null,j===0&&f('"N"')),n===null&&(c.charCodeAt(b)===110?(n="n",b++):(n=null,j===0&&f('"n"'))),n!==null){q=[];for(x=o();x!==null;)q.push(x),x=o();q!==null?(x=za(),x!==null?e=[e,g,i,h,l,m,n,q,x]:(e=null,b=s)):(e=null,b=s)}else e=null,b=s;else e=null,b=s;else e=null,b=s}else e=null,b=s;else e=null,b=s;else e=null,b=s;else e=null,b=s}}}}}}}for(;e!==null;){d.push(e);s=b;e=[];for(g=o();g!==null;)e.push(g),g=o();if(e!==null)if(c.charCodeAt(b)===
61?(g="=",b++):(g=null,j===0&&f('"="')),g!==null){i=[];for(h=o();h!==null;)i.push(h),h=o();i!==null?(h=X(),h!==null?e=[e,g,i,h]:(e=null,b=s)):(e=null,b=s)}else e=null,b=s;else e=null,b=s;if(e===null){s=b;e=[];for(g=o();g!==null;)e.push(g),g=o();if(e!==null)if(c.substr(b,2)==="!="?(g="!=",b+=2):(g=null,j===0&&f('"!="')),g!==null){i=[];for(h=o();h!==null;)i.push(h),h=o();i!==null?(h=X(),h!==null?e=[e,g,i,h]:(e=null,b=s)):(e=null,b=s)}else e=null,b=s;else e=null,b=s;if(e===null){s=b;e=[];for(g=o();g!==
null;)e.push(g),g=o();if(e!==null)if(c.charCodeAt(b)===60?(g="<",b++):(g=null,j===0&&f('"<"')),g!==null){i=[];for(h=o();h!==null;)i.push(h),h=o();i!==null?(h=X(),h!==null?e=[e,g,i,h]:(e=null,b=s)):(e=null,b=s)}else e=null,b=s;else e=null,b=s;if(e===null){s=b;e=[];for(g=o();g!==null;)e.push(g),g=o();if(e!==null)if(c.charCodeAt(b)===62?(g=">",b++):(g=null,j===0&&f('">"')),g!==null){i=[];for(h=o();h!==null;)i.push(h),h=o();i!==null?(h=X(),h!==null?e=[e,g,i,h]:(e=null,b=s)):(e=null,b=s)}else e=null,b=
s;else e=null,b=s;if(e===null){s=b;e=[];for(g=o();g!==null;)e.push(g),g=o();if(e!==null)if(c.substr(b,2)==="<="?(g="<=",b+=2):(g=null,j===0&&f('"<="')),g!==null){i=[];for(h=o();h!==null;)i.push(h),h=o();i!==null?(h=X(),h!==null?e=[e,g,i,h]:(e=null,b=s)):(e=null,b=s)}else e=null,b=s;else e=null,b=s;if(e===null){s=b;e=[];for(g=o();g!==null;)e.push(g),g=o();if(e!==null)if(c.substr(b,2)===">="?(g=">=",b+=2):(g=null,j===0&&f('">="')),g!==null){i=[];for(h=o();h!==null;)i.push(h),h=o();i!==null?(h=X(),h!==
null?e=[e,g,i,h]:(e=null,b=s)):(e=null,b=s)}else e=null,b=s;else e=null,b=s;if(e===null){s=b;e=[];for(g=o();g!==null;)e.push(g),g=o();if(e!==null)if(c.charCodeAt(b)===73?(g="I",b++):(g=null,j===0&&f('"I"')),g===null&&(c.charCodeAt(b)===105?(g="i",b++):(g=null,j===0&&f('"i"'))),g!==null)if(c.charCodeAt(b)===78?(i="N",b++):(i=null,j===0&&f('"N"')),i===null&&(c.charCodeAt(b)===110?(i="n",b++):(i=null,j===0&&f('"n"'))),i!==null){h=[];for(l=o();l!==null;)h.push(l),l=o();h!==null?(l=za(),l!==null?e=[e,
g,i,h,l]:(e=null,b=s)):(e=null,b=s)}else e=null,b=s;else e=null,b=s;else e=null,b=s;if(e===null){s=b;e=[];for(g=o();g!==null;)e.push(g),g=o();if(e!==null)if(c.charCodeAt(b)===78?(g="N",b++):(g=null,j===0&&f('"N"')),g===null&&(c.charCodeAt(b)===110?(g="n",b++):(g=null,j===0&&f('"n"'))),g!==null)if(c.charCodeAt(b)===79?(i="O",b++):(i=null,j===0&&f('"O"')),i===null&&(c.charCodeAt(b)===111?(i="o",b++):(i=null,j===0&&f('"o"'))),i!==null)if(c.charCodeAt(b)===84?(h="T",b++):(h=null,j===0&&f('"T"')),h===
null&&(c.charCodeAt(b)===116?(h="t",b++):(h=null,j===0&&f('"t"'))),h!==null){l=[];for(m=o();m!==null;)l.push(m),m=o();if(l!==null)if(c.charCodeAt(b)===73?(m="I",b++):(m=null,j===0&&f('"I"')),m===null&&(c.charCodeAt(b)===105?(m="i",b++):(m=null,j===0&&f('"i"'))),m!==null)if(c.charCodeAt(b)===78?(n="N",b++):(n=null,j===0&&f('"N"')),n===null&&(c.charCodeAt(b)===110?(n="n",b++):(n=null,j===0&&f('"n"'))),n!==null){q=[];for(x=o();x!==null;)q.push(x),x=o();q!==null?(x=za(),x!==null?e=[e,g,i,h,l,m,n,q,x]:
(e=null,b=s)):(e=null,b=s)}else e=null,b=s;else e=null,b=s;else e=null,b=s}else e=null,b=s;else e=null,b=s;else e=null,b=s;else e=null,b=s}}}}}}}}d!==null?a=[a,d]:(a=null,b=t)}else a=null,b=t;a!==null&&(a=function(a,b,c){if(c.length===0)return b;else{if(c[0][1]==="i"||c[0][1]==="I"||c[0][1]==="n"||c[0][1]==="N"){a={};if(c[0][1]==="i"||c[0][1]==="I"){var d="=";a.expressionType="conditionalor"}else d="!=",a.expressionType="conditionaland";for(var k=[],f=0;f<c[0].length;f++)if(c[0][f].token==="args"){k=
c[0][f].value;break}a.token="expression";a.operands=[];for(c=0;c<k.length;c++)f={token:"expression",expressionType:"relationalexpression"},f.operator=d,f.op1=b,f.op2=k[c],a.operands.push(f)}else a={expressionType:"relationalexpression"},a.operator=c[0][1],a.op1=b,a.op2=c[0][3],a.token="expression";return a}}(r,a[0],a[1]));a===null&&(b=r);j--;j===0&&a===null&&f("[99] RelationalExpression");return a}function X(){var a,d,e,g,i,h,l,m,n,q,r;j++;n=m=b;a=Ba();if(a!==null){d=[];q=b;e=[];for(g=o();g!==null;)e.push(g),
g=o();if(e!==null)if(c.charCodeAt(b)===43?(g="+",b++):(g=null,j===0&&f('"+"')),g!==null){i=[];for(h=o();h!==null;)i.push(h),h=o();i!==null?(h=Ba(),h!==null?e=[e,g,i,h]:(e=null,b=q)):(e=null,b=q)}else e=null,b=q;else e=null,b=q;if(e===null){q=b;e=[];for(g=o();g!==null;)e.push(g),g=o();if(e!==null)if(c.charCodeAt(b)===45?(g="-",b++):(g=null,j===0&&f('"-"')),g!==null){i=[];for(h=o();h!==null;)i.push(h),h=o();i!==null?(h=Ba(),h!==null?e=[e,g,i,h]:(e=null,b=q)):(e=null,b=q)}else e=null,b=q;else e=null,
b=q;if(e===null)if(q=b,e=Ca(),e===null&&(e=Ca()),e!==null){r=b;g=[];for(i=o();i!==null;)g.push(i),i=o();if(g!==null)if(c.charCodeAt(b)===42?(i="*",b++):(i=null,j===0&&f('"*"')),i!==null){h=[];for(l=o();l!==null;)h.push(l),l=o();h!==null?(l=fa(),l!==null?g=[g,i,h,l]:(g=null,b=r)):(g=null,b=r)}else g=null,b=r;else g=null,b=r;if(g===null){r=b;g=[];for(i=o();i!==null;)g.push(i),i=o();if(g!==null)if(c.charCodeAt(b)===47?(i="/",b++):(i=null,j===0&&f('"/"')),i!==null){h=[];for(l=o();l!==null;)h.push(l),
l=o();h!==null?(l=fa(),l!==null?g=[g,i,h,l]:(g=null,b=r)):(g=null,b=r)}else g=null,b=r;else g=null,b=r}g=g!==null?g:"";g!==null?e=[e,g]:(e=null,b=q)}else e=null,b=q}for(;e!==null;){d.push(e);q=b;e=[];for(g=o();g!==null;)e.push(g),g=o();if(e!==null)if(c.charCodeAt(b)===43?(g="+",b++):(g=null,j===0&&f('"+"')),g!==null){i=[];for(h=o();h!==null;)i.push(h),h=o();i!==null?(h=Ba(),h!==null?e=[e,g,i,h]:(e=null,b=q)):(e=null,b=q)}else e=null,b=q;else e=null,b=q;if(e===null){q=b;e=[];for(g=o();g!==null;)e.push(g),
g=o();if(e!==null)if(c.charCodeAt(b)===45?(g="-",b++):(g=null,j===0&&f('"-"')),g!==null){i=[];for(h=o();h!==null;)i.push(h),h=o();i!==null?(h=Ba(),h!==null?e=[e,g,i,h]:(e=null,b=q)):(e=null,b=q)}else e=null,b=q;else e=null,b=q;if(e===null)if(q=b,e=Ca(),e===null&&(e=Ca()),e!==null){r=b;g=[];for(i=o();i!==null;)g.push(i),i=o();if(g!==null)if(c.charCodeAt(b)===42?(i="*",b++):(i=null,j===0&&f('"*"')),i!==null){h=[];for(l=o();l!==null;)h.push(l),l=o();h!==null?(l=fa(),l!==null?g=[g,i,h,l]:(g=null,b=r)):
(g=null,b=r)}else g=null,b=r;else g=null,b=r;if(g===null){r=b;g=[];for(i=o();i!==null;)g.push(i),i=o();if(g!==null)if(c.charCodeAt(b)===47?(i="/",b++):(i=null,j===0&&f('"/"')),i!==null){h=[];for(l=o();l!==null;)h.push(l),l=o();h!==null?(l=fa(),l!==null?g=[g,i,h,l]:(g=null,b=r)):(g=null,b=r)}else g=null,b=r;else g=null,b=r}g=g!==null?g:"";g!==null?e=[e,g]:(e=null,b=q)}else e=null,b=q}}d!==null?a=[a,d]:(a=null,b=n)}else a=null,b=n;a!==null&&(a=function(a,b,c){if(c.length===0)return b;a={token:"expression",
expressionType:"additiveexpression"};a.summand=b;a.summands=[];for(b=0;b<c.length;b++){var d=c[b],k={};if(d.length==4&&typeof d[1]==="string")k.operator=d[1],k.expression=d[3];else{var d={},f=k[0],e=k[1][1],g=k[1][3],e=null;f.value<0?(k.operator="-",f.value=-f.value):k.operator="+";d.token="expression";d.expressionType="multiplicativeexpression";d.operator=f;d.factors=[{operator:e,expression:g}];k.expression=d}a.summands.push(k)}return a}(m,a[0],a[1]));a===null&&(b=m);j--;j===0&&a===null&&f("[101] AdditiveExpression");
return a}function Ba(){var a,d,e,g,i,h,l,m,n;j++;m=l=b;a=fa();if(a!==null){d=[];n=b;e=[];for(g=o();g!==null;)e.push(g),g=o();if(e!==null)if(c.charCodeAt(b)===42?(g="*",b++):(g=null,j===0&&f('"*"')),g!==null){i=[];for(h=o();h!==null;)i.push(h),h=o();i!==null?(h=fa(),h!==null?e=[e,g,i,h]:(e=null,b=n)):(e=null,b=n)}else e=null,b=n;else e=null,b=n;if(e===null){n=b;e=[];for(g=o();g!==null;)e.push(g),g=o();if(e!==null)if(c.charCodeAt(b)===47?(g="/",b++):(g=null,j===0&&f('"/"')),g!==null){i=[];for(h=o();h!==
null;)i.push(h),h=o();i!==null?(h=fa(),h!==null?e=[e,g,i,h]:(e=null,b=n)):(e=null,b=n)}else e=null,b=n;else e=null,b=n}for(;e!==null;){d.push(e);n=b;e=[];for(g=o();g!==null;)e.push(g),g=o();if(e!==null)if(c.charCodeAt(b)===42?(g="*",b++):(g=null,j===0&&f('"*"')),g!==null){i=[];for(h=o();h!==null;)i.push(h),h=o();i!==null?(h=fa(),h!==null?e=[e,g,i,h]:(e=null,b=n)):(e=null,b=n)}else e=null,b=n;else e=null,b=n;if(e===null){n=b;e=[];for(g=o();g!==null;)e.push(g),g=o();if(e!==null)if(c.charCodeAt(b)===
47?(g="/",b++):(g=null,j===0&&f('"/"')),g!==null){i=[];for(h=o();h!==null;)i.push(h),h=o();i!==null?(h=fa(),h!==null?e=[e,g,i,h]:(e=null,b=n)):(e=null,b=n)}else e=null,b=n;else e=null,b=n}}d!==null?a=[a,d]:(a=null,b=m)}else a=null,b=m;a!==null&&(a=function(a,b,c){if(c.length===0)return b;a={token:"expression",expressionType:"multiplicativeexpression"};a.factor=b;a.factors=[];for(b=0;b<c.length;b++){var d=c[b],k={};k.operator=d[1];k.expression=d[3];a.factors.push(k)}return a}(l,a[0],a[1]));a===null&&
(b=l);j--;j===0&&a===null&&f("[102] MultiplicativeExpression");return a}function fa(){var a,d,e,g,i;j++;i=g=b;c.charCodeAt(b)===33?(a="!",b++):(a=null,j===0&&f('"!"'));if(a!==null){d=[];for(e=o();e!==null;)d.push(e),e=o();d!==null?(e=Ma(),e!==null?a=[a,d,e]:(a=null,b=i)):(a=null,b=i)}else a=null,b=i;a!==null&&(a=function(a,b){var c={token:"expression",expressionType:"unaryexpression",unaryexpression:"!"};c.expression=b;return c}(g,a[2]));a===null&&(b=g);if(a===null){i=g=b;c.charCodeAt(b)===43?(a=
"+",b++):(a=null,j===0&&f('"+"'));if(a!==null){d=[];for(e=o();e!==null;)d.push(e),e=o();d!==null?(e=Ma(),e!==null?a=[a,d,e]:(a=null,b=i)):(a=null,b=i)}else a=null,b=i;a!==null&&(a=function(a,b){var c={token:"expression",expressionType:"unaryexpression",unaryexpression:"+"};c.expression=b;return c}(g,a[2]));a===null&&(b=g);if(a===null){i=g=b;c.charCodeAt(b)===45?(a="-",b++):(a=null,j===0&&f('"-"'));if(a!==null){d=[];for(e=o();e!==null;)d.push(e),e=o();d!==null?(e=Ma(),e!==null?a=[a,d,e]:(a=null,b=
i)):(a=null,b=i)}else a=null,b=i;a!==null&&(a=function(a,b){var c={token:"expression",expressionType:"unaryexpression",unaryexpression:"-"};c.expression=b;return c}(g,a[2]));a===null&&(b=g);a===null&&(a=Ma())}}j--;j===0&&a===null&&f("[103] UnaryExpression");return a}function Ma(){var a,c;j++;a=Qa();a===null&&(a=Pa(),a===null&&(a=bc(),a===null&&(c=b,a=Ra(),a!==null&&(a=function(a,b){var c={token:"expression",expressionType:"atomic",primaryexpression:"rdfliteral"};c.value=b;return c}(c,a)),a===null&&
(b=c),a===null&&(c=b,a=Sa(),a!==null&&(a=function(a,b){var c={token:"expression",expressionType:"atomic",primaryexpression:"numericliteral"};c.value=b;return c}(c,a)),a===null&&(b=c),a===null&&(c=b,a=Ta(),a!==null&&(a=function(a,b){var c={token:"expression",expressionType:"atomic",primaryexpression:"booleanliteral"};c.value=b;return c}(c,a)),a===null&&(b=c),a===null&&(a=cc(),a===null&&(c=b,a=V(),a!==null&&(a=function(a,b){var c={token:"expression",expressionType:"atomic",primaryexpression:"var"};
c.value=b;return c}(c,a)),a===null&&(b=c))))))));j--;j===0&&a===null&&f("[104] PrimaryExpression");return a}function Qa(){var a,d,e,g,i,h,l;j++;l=h=b;c.charCodeAt(b)===40?(a="(",b++):(a=null,j===0&&f('"("'));if(a!==null){d=[];for(e=o();e!==null;)d.push(e),e=o();if(d!==null)if(e=N(),e!==null){g=[];for(i=o();i!==null;)g.push(i),i=o();g!==null?(c.charCodeAt(b)===41?(i=")",b++):(i=null,j===0&&f('")"')),i!==null?a=[a,d,e,g,i]:(a=null,b=l)):(a=null,b=l)}else a=null,b=l;else a=null,b=l}else a=null,b=l;a!==
null&&(a=a[2]);a===null&&(b=h);j--;j===0&&a===null&&f("[105] BrackettedExpression");return a}function Pa(){var a,d,e,g,i,h,l,m,n,q,r,t,z,s,w,A,v;j++;v=A=b;c.charCodeAt(b)===83?(a="S",b++):(a=null,j===0&&f('"S"'));a===null&&(c.charCodeAt(b)===115?(a="s",b++):(a=null,j===0&&f('"s"')));if(a!==null)if(c.charCodeAt(b)===84?(d="T",b++):(d=null,j===0&&f('"T"')),d===null&&(c.charCodeAt(b)===116?(d="t",b++):(d=null,j===0&&f('"t"'))),d!==null)if(c.charCodeAt(b)===82?(e="R",b++):(e=null,j===0&&f('"R"')),e===
null&&(c.charCodeAt(b)===114?(e="r",b++):(e=null,j===0&&f('"r"'))),e!==null){g=[];for(i=o();i!==null;)g.push(i),i=o();if(g!==null)if(c.charCodeAt(b)===40?(i="(",b++):(i=null,j===0&&f('"("')),i!==null){h=[];for(l=o();l!==null;)h.push(l),l=o();if(h!==null)if(l=N(),l!==null){m=[];for(n=o();n!==null;)m.push(n),n=o();m!==null?(c.charCodeAt(b)===41?(n=")",b++):(n=null,j===0&&f('")"')),n!==null?a=[a,d,e,g,i,h,l,m,n]:(a=null,b=v)):(a=null,b=v)}else a=null,b=v;else a=null,b=v}else a=null,b=v;else a=null,b=
v}else a=null,b=v;else a=null,b=v;else a=null,b=v;a!==null&&(a=function(a,b){var c={token:"expression",expressionType:"builtincall",builtincall:"str"};c.args=[b];return c}(A,a[6]));a===null&&(b=A);if(a===null){v=A=b;c.charCodeAt(b)===76?(a="L",b++):(a=null,j===0&&f('"L"'));a===null&&(c.charCodeAt(b)===108?(a="l",b++):(a=null,j===0&&f('"l"')));if(a!==null)if(c.charCodeAt(b)===65?(d="A",b++):(d=null,j===0&&f('"A"')),d===null&&(c.charCodeAt(b)===97?(d="a",b++):(d=null,j===0&&f('"a"'))),d!==null)if(c.charCodeAt(b)===
78?(e="N",b++):(e=null,j===0&&f('"N"')),e===null&&(c.charCodeAt(b)===110?(e="n",b++):(e=null,j===0&&f('"n"'))),e!==null)if(c.charCodeAt(b)===71?(g="G",b++):(g=null,j===0&&f('"G"')),g===null&&(c.charCodeAt(b)===103?(g="g",b++):(g=null,j===0&&f('"g"'))),g!==null){i=[];for(h=o();h!==null;)i.push(h),h=o();if(i!==null)if(c.charCodeAt(b)===40?(h="(",b++):(h=null,j===0&&f('"("')),h!==null){l=[];for(m=o();m!==null;)l.push(m),m=o();if(l!==null)if(m=N(),m!==null){n=[];for(q=o();q!==null;)n.push(q),q=o();n!==
null?(c.charCodeAt(b)===41?(q=")",b++):(q=null,j===0&&f('")"')),q!==null?a=[a,d,e,g,i,h,l,m,n,q]:(a=null,b=v)):(a=null,b=v)}else a=null,b=v;else a=null,b=v}else a=null,b=v;else a=null,b=v}else a=null,b=v;else a=null,b=v;else a=null,b=v;else a=null,b=v;a!==null&&(a=function(a,b){var c={token:"expression",expressionType:"builtincall",builtincall:"lang"};c.args=[b];return c}(A,a[7]));a===null&&(b=A);if(a===null){v=A=b;c.substr(b,11)==="LANGMATCHES"?(a="LANGMATCHES",b+=11):(a=null,j===0&&f('"LANGMATCHES"'));
if(a!==null){d=[];for(e=o();e!==null;)d.push(e),e=o();if(d!==null)if(c.charCodeAt(b)===40?(e="(",b++):(e=null,j===0&&f('"("')),e!==null){g=[];for(i=o();i!==null;)g.push(i),i=o();if(g!==null)if(i=N(),i!==null){h=[];for(l=o();l!==null;)h.push(l),l=o();if(h!==null)if(c.charCodeAt(b)===44?(l=",",b++):(l=null,j===0&&f('","')),l!==null){m=[];for(n=o();n!==null;)m.push(n),n=o();if(m!==null)if(n=N(),n!==null){q=[];for(r=o();r!==null;)q.push(r),r=o();q!==null?(c.charCodeAt(b)===41?(r=")",b++):(r=null,j===
0&&f('")"')),r!==null?a=[a,d,e,g,i,h,l,m,n,q,r]:(a=null,b=v)):(a=null,b=v)}else a=null,b=v;else a=null,b=v}else a=null,b=v;else a=null,b=v}else a=null,b=v;else a=null,b=v}else a=null,b=v;else a=null,b=v}else a=null,b=v;a!==null&&(a=function(a,b,c){a={token:"expression",expressionType:"builtincall",builtincall:"langmatches"};a.args=[b,c];return a}(A,a[4],a[8]));a===null&&(b=A);if(a===null){v=A=b;c.charCodeAt(b)===68?(a="D",b++):(a=null,j===0&&f('"D"'));a===null&&(c.charCodeAt(b)===100?(a="d",b++):
(a=null,j===0&&f('"d"')));if(a!==null)if(c.charCodeAt(b)===65?(d="A",b++):(d=null,j===0&&f('"A"')),d===null&&(c.charCodeAt(b)===97?(d="a",b++):(d=null,j===0&&f('"a"'))),d!==null)if(c.charCodeAt(b)===84?(e="T",b++):(e=null,j===0&&f('"T"')),e===null&&(c.charCodeAt(b)===116?(e="t",b++):(e=null,j===0&&f('"t"'))),e!==null)if(c.charCodeAt(b)===65?(g="A",b++):(g=null,j===0&&f('"A"')),g===null&&(c.charCodeAt(b)===97?(g="a",b++):(g=null,j===0&&f('"a"'))),g!==null)if(c.charCodeAt(b)===84?(i="T",b++):(i=null,
j===0&&f('"T"')),i===null&&(c.charCodeAt(b)===116?(i="t",b++):(i=null,j===0&&f('"t"'))),i!==null)if(c.charCodeAt(b)===89?(h="Y",b++):(h=null,j===0&&f('"Y"')),h===null&&(c.charCodeAt(b)===121?(h="y",b++):(h=null,j===0&&f('"y"'))),h!==null)if(c.charCodeAt(b)===80?(l="P",b++):(l=null,j===0&&f('"P"')),l===null&&(c.charCodeAt(b)===112?(l="p",b++):(l=null,j===0&&f('"p"'))),l!==null)if(c.charCodeAt(b)===69?(m="E",b++):(m=null,j===0&&f('"E"')),m===null&&(c.charCodeAt(b)===101?(m="e",b++):(m=null,j===0&&f('"e"'))),
m!==null){n=[];for(q=o();q!==null;)n.push(q),q=o();if(n!==null)if(c.charCodeAt(b)===40?(q="(",b++):(q=null,j===0&&f('"("')),q!==null){r=[];for(t=o();t!==null;)r.push(t),t=o();if(r!==null)if(t=N(),t!==null){z=[];for(s=o();s!==null;)z.push(s),s=o();z!==null?(c.charCodeAt(b)===41?(s=")",b++):(s=null,j===0&&f('")"')),s!==null?a=[a,d,e,g,i,h,l,m,n,q,r,t,z,s]:(a=null,b=v)):(a=null,b=v)}else a=null,b=v;else a=null,b=v}else a=null,b=v;else a=null,b=v}else a=null,b=v;else a=null,b=v;else a=null,b=v;else a=
null,b=v;else a=null,b=v;else a=null,b=v;else a=null,b=v;else a=null,b=v;a!==null&&(a=function(a,b){var c={token:"expression",expressionType:"builtincall",builtincall:"datatype"};c.args=[b];return c}(A,a[11]));a===null&&(b=A);if(a===null){v=A=b;c.substr(b,5)==="BOUND"?(a="BOUND",b+=5):(a=null,j===0&&f('"BOUND"'));if(a!==null){d=[];for(e=o();e!==null;)d.push(e),e=o();if(d!==null)if(c.charCodeAt(b)===40?(e="(",b++):(e=null,j===0&&f('"("')),e!==null){g=[];for(i=o();i!==null;)g.push(i),i=o();if(g!==null)if(i=
V(),i!==null){h=[];for(l=o();l!==null;)h.push(l),l=o();h!==null?(c.charCodeAt(b)===41?(l=")",b++):(l=null,j===0&&f('")"')),l!==null?a=[a,d,e,g,i,h,l]:(a=null,b=v)):(a=null,b=v)}else a=null,b=v;else a=null,b=v}else a=null,b=v;else a=null,b=v}else a=null,b=v;a!==null&&(a=function(a,b){var c={token:"expression",expressionType:"builtincall",builtincall:"bound"};c.args=[b];return c}(A,a[4]));a===null&&(b=A);if(a===null){v=A=b;c.substr(b,3)==="IRI"?(a="IRI",b+=3):(a=null,j===0&&f('"IRI"'));if(a!==null){d=
[];for(e=o();e!==null;)d.push(e),e=o();if(d!==null)if(c.charCodeAt(b)===40?(e="(",b++):(e=null,j===0&&f('"("')),e!==null){g=[];for(i=o();i!==null;)g.push(i),i=o();if(g!==null)if(i=N(),i!==null){h=[];for(l=o();l!==null;)h.push(l),l=o();h!==null?(c.charCodeAt(b)===41?(l=")",b++):(l=null,j===0&&f('")"')),l!==null?a=[a,d,e,g,i,h,l]:(a=null,b=v)):(a=null,b=v)}else a=null,b=v;else a=null,b=v}else a=null,b=v;else a=null,b=v}else a=null,b=v;a!==null&&(a=function(a,b){var c={token:"expression",expressionType:"builtincall",
builtincall:"iri"};c.args=[b];return c}(A,a[4]));a===null&&(b=A);if(a===null){v=A=b;c.substr(b,3)==="URI"?(a="URI",b+=3):(a=null,j===0&&f('"URI"'));if(a!==null){d=[];for(e=o();e!==null;)d.push(e),e=o();if(d!==null)if(c.charCodeAt(b)===40?(e="(",b++):(e=null,j===0&&f('"("')),e!==null){g=[];for(i=o();i!==null;)g.push(i),i=o();if(g!==null)if(i=N(),i!==null){h=[];for(l=o();l!==null;)h.push(l),l=o();h!==null?(c.charCodeAt(b)===41?(l=")",b++):(l=null,j===0&&f('")"')),l!==null?a=[a,d,e,g,i,h,l]:(a=null,
b=v)):(a=null,b=v)}else a=null,b=v;else a=null,b=v}else a=null,b=v;else a=null,b=v}else a=null,b=v;a!==null&&(a=function(a,b){var c={token:"expression",expressionType:"builtincall",builtincall:"uri"};c.args=[b];return c}(A,a[4]));a===null&&(b=A);if(a===null){v=A=b;c.substr(b,5)==="BNODE"?(a="BNODE",b+=5):(a=null,j===0&&f('"BNODE"'));if(a!==null){d=[];for(e=o();e!==null;)d.push(e),e=o();if(d!==null){m=b;c.charCodeAt(b)===40?(e="(",b++):(e=null,j===0&&f('"("'));if(e!==null){g=[];for(i=o();i!==null;)g.push(i),
i=o();if(g!==null)if(i=N(),i!==null){h=[];for(l=o();l!==null;)h.push(l),l=o();h!==null?(c.charCodeAt(b)===41?(l=")",b++):(l=null,j===0&&f('")"')),l!==null?e=[e,g,i,h,l]:(e=null,b=m)):(e=null,b=m)}else e=null,b=m;else e=null,b=m}else e=null,b=m;e===null&&(e=ra());e!==null?a=[a,d,e]:(a=null,b=v)}else a=null,b=v}else a=null,b=v;a!==null&&(a=function(a,b){var c={token:"expression",expressionType:"builtincall",builtincall:"bnode"};c.args=b.length===5?[b[2]]:null;return c}(A,a[2]));a===null&&(b=A);if(a===
null){v=A=b;c.substr(b,8)==="COALESCE"?(a="COALESCE",b+=8):(a=null,j===0&&f('"COALESCE"'));if(a!==null){d=[];for(e=o();e!==null;)d.push(e),e=o();d!==null?(e=za(),e!==null?a=[a,d,e]:(a=null,b=v)):(a=null,b=v)}else a=null,b=v;a!==null&&(a=function(a,b){var c={token:"expression",expressionType:"builtincall",builtincall:"coalesce"};c.args=b;return c}(A,a[2]));a===null&&(b=A);if(a===null){v=A=b;c.substr(b,2)==="IF"?(a="IF",b+=2):(a=null,j===0&&f('"IF"'));if(a!==null){d=[];for(e=o();e!==null;)d.push(e),
e=o();if(d!==null)if(c.charCodeAt(b)===40?(e="(",b++):(e=null,j===0&&f('"("')),e!==null){g=[];for(i=o();i!==null;)g.push(i),i=o();if(g!==null)if(i=N(),i!==null){h=[];for(l=o();l!==null;)h.push(l),l=o();if(h!==null)if(c.charCodeAt(b)===44?(l=",",b++):(l=null,j===0&&f('","')),l!==null){m=[];for(n=o();n!==null;)m.push(n),n=o();if(m!==null)if(n=N(),n!==null){q=[];for(r=o();r!==null;)q.push(r),r=o();if(q!==null)if(c.charCodeAt(b)===44?(r=",",b++):(r=null,j===0&&f('","')),r!==null){t=[];for(z=o();z!==null;)t.push(z),
z=o();if(t!==null)if(z=N(),z!==null){s=[];for(w=o();w!==null;)s.push(w),w=o();s!==null?(c.charCodeAt(b)===41?(w=")",b++):(w=null,j===0&&f('")"')),w!==null?a=[a,d,e,g,i,h,l,m,n,q,r,t,z,s,w]:(a=null,b=v)):(a=null,b=v)}else a=null,b=v;else a=null,b=v}else a=null,b=v;else a=null,b=v}else a=null,b=v;else a=null,b=v}else a=null,b=v;else a=null,b=v}else a=null,b=v;else a=null,b=v}else a=null,b=v;else a=null,b=v}else a=null,b=v;a!==null&&(a=function(a,b,c,d){a={token:"expression",expressionType:"builtincall",
builtincall:"if"};a.args=[b,c,d];return a}(A,a[4],a[8],a[12]));a===null&&(b=A);if(a===null){v=A=b;c.substr(b,9)==="ISLITERAL"?(a="ISLITERAL",b+=9):(a=null,j===0&&f('"ISLITERAL"'));if(a!==null){d=[];for(e=o();e!==null;)d.push(e),e=o();if(d!==null)if(c.charCodeAt(b)===40?(e="(",b++):(e=null,j===0&&f('"("')),e!==null){g=[];for(i=o();i!==null;)g.push(i),i=o();if(g!==null)if(i=N(),i!==null){h=[];for(l=o();l!==null;)h.push(l),l=o();h!==null?(c.charCodeAt(b)===41?(l=")",b++):(l=null,j===0&&f('")"')),l!==
null?a=[a,d,e,g,i,h,l]:(a=null,b=v)):(a=null,b=v)}else a=null,b=v;else a=null,b=v}else a=null,b=v;else a=null,b=v}else a=null,b=v;a!==null&&(a=function(a,b){var c={token:"expression",expressionType:"builtincall",builtincall:"isliteral"};c.args=[b];return c}(A,a[4]));a===null&&(b=A);if(a===null){v=A=b;c.substr(b,7)==="ISBLANK"?(a="ISBLANK",b+=7):(a=null,j===0&&f('"ISBLANK"'));if(a!==null){d=[];for(e=o();e!==null;)d.push(e),e=o();if(d!==null)if(c.charCodeAt(b)===40?(e="(",b++):(e=null,j===0&&f('"("')),
e!==null){g=[];for(i=o();i!==null;)g.push(i),i=o();if(g!==null)if(i=N(),i!==null){h=[];for(l=o();l!==null;)h.push(l),l=o();h!==null?(c.charCodeAt(b)===41?(l=")",b++):(l=null,j===0&&f('")"')),l!==null?a=[a,d,e,g,i,h,l]:(a=null,b=v)):(a=null,b=v)}else a=null,b=v;else a=null,b=v}else a=null,b=v;else a=null,b=v}else a=null,b=v;a!==null&&(a=function(a,b){var c={token:"expression",expressionType:"builtincall",builtincall:"isblank"};c.args=[b];return c}(A,a[4]));a===null&&(b=A);if(a===null){v=A=b;c.substr(b,
8)==="SAMETERM"?(a="SAMETERM",b+=8):(a=null,j===0&&f('"SAMETERM"'));if(a!==null){d=[];for(e=o();e!==null;)d.push(e),e=o();if(d!==null)if(c.charCodeAt(b)===40?(e="(",b++):(e=null,j===0&&f('"("')),e!==null){g=[];for(i=o();i!==null;)g.push(i),i=o();if(g!==null)if(i=N(),i!==null){h=[];for(l=o();l!==null;)h.push(l),l=o();if(h!==null)if(c.charCodeAt(b)===44?(l=",",b++):(l=null,j===0&&f('","')),l!==null){m=[];for(n=o();n!==null;)m.push(n),n=o();if(m!==null)if(n=N(),n!==null){q=[];for(r=o();r!==null;)q.push(r),
r=o();q!==null?(c.charCodeAt(b)===41?(r=")",b++):(r=null,j===0&&f('")"')),r!==null?a=[a,d,e,g,i,h,l,m,n,q,r]:(a=null,b=v)):(a=null,b=v)}else a=null,b=v;else a=null,b=v}else a=null,b=v;else a=null,b=v}else a=null,b=v;else a=null,b=v}else a=null,b=v;else a=null,b=v}else a=null,b=v;a!==null&&(a=function(a,b,c){a={token:"expression",expressionType:"builtincall",builtincall:"sameterm"};a.args=[b,c];return a}(A,a[4],a[8]));a===null&&(b=A);if(a===null){v=A=b;c.charCodeAt(b)===73?(a="I",b++):(a=null,j===
0&&f('"I"'));a===null&&(c.charCodeAt(b)===105?(a="i",b++):(a=null,j===0&&f('"i"')));if(a!==null)if(c.charCodeAt(b)===83?(d="S",b++):(d=null,j===0&&f('"S"')),d===null&&(c.charCodeAt(b)===115?(d="s",b++):(d=null,j===0&&f('"s"'))),d!==null)if(c.charCodeAt(b)===85?(e="U",b++):(e=null,j===0&&f('"U"')),e===null&&(c.charCodeAt(b)===117?(e="u",b++):(e=null,j===0&&f('"u"'))),e!==null)if(c.charCodeAt(b)===82?(g="R",b++):(g=null,j===0&&f('"R"')),g===null&&(c.charCodeAt(b)===114?(g="r",b++):(g=null,j===0&&f('"r"'))),
g!==null)if(c.charCodeAt(b)===73?(i="I",b++):(i=null,j===0&&f('"I"')),i===null&&(c.charCodeAt(b)===105?(i="i",b++):(i=null,j===0&&f('"i"'))),i!==null){h=[];for(l=o();l!==null;)h.push(l),l=o();if(h!==null)if(c.charCodeAt(b)===40?(l="(",b++):(l=null,j===0&&f('"("')),l!==null){m=[];for(n=o();n!==null;)m.push(n),n=o();if(m!==null)if(n=N(),n!==null){q=[];for(r=o();r!==null;)q.push(r),r=o();q!==null?(c.charCodeAt(b)===41?(r=")",b++):(r=null,j===0&&f('")"')),r!==null?a=[a,d,e,g,i,h,l,m,n,q,r]:(a=null,b=
v)):(a=null,b=v)}else a=null,b=v;else a=null,b=v}else a=null,b=v;else a=null,b=v}else a=null,b=v;else a=null,b=v;else a=null,b=v;else a=null,b=v;else a=null,b=v;a!==null&&(a=function(a,b){var c={token:"expression",expressionType:"builtincall",builtincall:"isuri"};c.args=[b];return c}(A,a[8]));a===null&&(b=A);if(a===null){v=A=b;c.charCodeAt(b)===73?(a="I",b++):(a=null,j===0&&f('"I"'));a===null&&(c.charCodeAt(b)===105?(a="i",b++):(a=null,j===0&&f('"i"')));if(a!==null)if(c.charCodeAt(b)===83?(d="S",
b++):(d=null,j===0&&f('"S"')),d===null&&(c.charCodeAt(b)===115?(d="s",b++):(d=null,j===0&&f('"s"'))),d!==null)if(c.charCodeAt(b)===73?(e="I",b++):(e=null,j===0&&f('"I"')),e===null&&(c.charCodeAt(b)===105?(e="i",b++):(e=null,j===0&&f('"i"'))),e!==null)if(c.charCodeAt(b)===82?(g="R",b++):(g=null,j===0&&f('"R"')),g===null&&(c.charCodeAt(b)===114?(g="r",b++):(g=null,j===0&&f('"r"'))),g!==null)if(c.charCodeAt(b)===73?(i="I",b++):(i=null,j===0&&f('"I"')),i===null&&(c.charCodeAt(b)===105?(i="i",b++):(i=
null,j===0&&f('"i"'))),i!==null){h=[];for(l=o();l!==null;)h.push(l),l=o();if(h!==null)if(c.charCodeAt(b)===40?(l="(",b++):(l=null,j===0&&f('"("')),l!==null){m=[];for(n=o();n!==null;)m.push(n),n=o();if(m!==null)if(n=N(),n!==null){q=[];for(r=o();r!==null;)q.push(r),r=o();q!==null?(c.charCodeAt(b)===41?(r=")",b++):(r=null,j===0&&f('")"')),r!==null?a=[a,d,e,g,i,h,l,m,n,q,r]:(a=null,b=v)):(a=null,b=v)}else a=null,b=v;else a=null,b=v}else a=null,b=v;else a=null,b=v}else a=null,b=v;else a=null,b=v;else a=
null,b=v;else a=null,b=v;else a=null,b=v;a!==null&&(a=function(a,b){var c={token:"expression",expressionType:"builtincall",builtincall:"isuri"};c.args=[b];return c}(A,a[8]));a===null&&(b=A);a===null&&(a=dc(),a===null&&(a=ec(),a===null&&(a=fc())))}}}}}}}}}}}}}}j--;j===0&&a===null&&f("[106] BuiltInCall");return a}function dc(){var a,d,e,g,i,h,l,m,n,q,r,t,z,s,w,A,v,F,y,G;j++;y=F=b;c.charCodeAt(b)===82?(a="R",b++):(a=null,j===0&&f('"R"'));a===null&&(c.charCodeAt(b)===114?(a="r",b++):(a=null,j===0&&f('"r"')));
if(a!==null)if(c.charCodeAt(b)===69?(d="E",b++):(d=null,j===0&&f('"E"')),d===null&&(c.charCodeAt(b)===101?(d="e",b++):(d=null,j===0&&f('"e"'))),d!==null)if(c.charCodeAt(b)===71?(e="G",b++):(e=null,j===0&&f('"G"')),e===null&&(c.charCodeAt(b)===103?(e="g",b++):(e=null,j===0&&f('"g"'))),e!==null)if(c.charCodeAt(b)===69?(g="E",b++):(g=null,j===0&&f('"E"')),g===null&&(c.charCodeAt(b)===101?(g="e",b++):(g=null,j===0&&f('"e"'))),g!==null)if(c.charCodeAt(b)===88?(i="X",b++):(i=null,j===0&&f('"X"')),i===null&&
(c.charCodeAt(b)===120?(i="x",b++):(i=null,j===0&&f('"x"'))),i!==null){h=[];for(l=o();l!==null;)h.push(l),l=o();if(h!==null)if(c.charCodeAt(b)===40?(l="(",b++):(l=null,j===0&&f('"("')),l!==null){m=[];for(n=o();n!==null;)m.push(n),n=o();if(m!==null)if(n=N(),n!==null){q=[];for(r=o();r!==null;)q.push(r),r=o();if(q!==null)if(c.charCodeAt(b)===44?(r=",",b++):(r=null,j===0&&f('","')),r!==null){t=[];for(z=o();z!==null;)t.push(z),z=o();if(t!==null)if(z=N(),z!==null){s=[];for(w=o();w!==null;)s.push(w),w=o();
if(s!==null){G=b;c.charCodeAt(b)===44?(w=",",b++):(w=null,j===0&&f('","'));if(w!==null){A=[];for(v=o();v!==null;)A.push(v),v=o();A!==null?(v=N(),v!==null?w=[w,A,v]:(w=null,b=G)):(w=null,b=G)}else w=null,b=G;w=w!==null?w:"";if(w!==null){A=[];for(v=o();v!==null;)A.push(v),v=o();A!==null?(c.charCodeAt(b)===41?(v=")",b++):(v=null,j===0&&f('")"')),v!==null?a=[a,d,e,g,i,h,l,m,n,q,r,t,z,s,w,A,v]:(a=null,b=y)):(a=null,b=y)}else a=null,b=y}else a=null,b=y}else a=null,b=y;else a=null,b=y}else a=null,b=y;else a=
null,b=y}else a=null,b=y;else a=null,b=y}else a=null,b=y;else a=null,b=y}else a=null,b=y;else a=null,b=y;else a=null,b=y;else a=null,b=y;else a=null,b=y;a!==null&&(a=function(a,b,c,d){a={token:"expression",expressionType:"regex"};a.text=b;a.pattern=c;a.flags=d[2];return a}(F,a[8],a[12],a[14]));a===null&&(b=F);j--;j===0&&a===null&&f("[107] RegexExpression");return a}function ec(){var a,d,e,g,i,h,l,m,n,q;j++;q=n=b;c.charCodeAt(b)===69?(a="E",b++):(a=null,j===0&&f('"E"'));a===null&&(c.charCodeAt(b)===
101?(a="e",b++):(a=null,j===0&&f('"e"')));if(a!==null)if(c.charCodeAt(b)===88?(d="X",b++):(d=null,j===0&&f('"X"')),d===null&&(c.charCodeAt(b)===120?(d="x",b++):(d=null,j===0&&f('"x"'))),d!==null)if(c.charCodeAt(b)===73?(e="I",b++):(e=null,j===0&&f('"I"')),e===null&&(c.charCodeAt(b)===105?(e="i",b++):(e=null,j===0&&f('"i"'))),e!==null)if(c.charCodeAt(b)===83?(g="S",b++):(g=null,j===0&&f('"S"')),g===null&&(c.charCodeAt(b)===115?(g="s",b++):(g=null,j===0&&f('"s"'))),g!==null)if(c.charCodeAt(b)===84?
(i="T",b++):(i=null,j===0&&f('"T"')),i===null&&(c.charCodeAt(b)===116?(i="t",b++):(i=null,j===0&&f('"t"'))),i!==null)if(c.charCodeAt(b)===83?(h="S",b++):(h=null,j===0&&f('"S"')),h===null&&(c.charCodeAt(b)===115?(h="s",b++):(h=null,j===0&&f('"s"'))),h!==null){l=[];for(m=o();m!==null;)l.push(m),m=o();l!==null?(m=Y(),m!==null?a=[a,d,e,g,i,h,l,m]:(a=null,b=q)):(a=null,b=q)}else a=null,b=q;else a=null,b=q;else a=null,b=q;else a=null,b=q;else a=null,b=q;else a=null,b=q;a!==null&&(a=function(a,b){var c=
{token:"expression",expressionType:"builtincall",builtincall:"exists"};c.args=[b];return c}(n,a[7]));a===null&&(b=n);j--;j===0&&a===null&&f("[108] ExistsFunc");return a}function fc(){var a,d,e,g,i,h,l,m,n,q,r,t,z,s;j++;s=z=b;c.charCodeAt(b)===78?(a="N",b++):(a=null,j===0&&f('"N"'));a===null&&(c.charCodeAt(b)===110?(a="n",b++):(a=null,j===0&&f('"n"')));if(a!==null)if(c.charCodeAt(b)===79?(d="O",b++):(d=null,j===0&&f('"O"')),d===null&&(c.charCodeAt(b)===111?(d="o",b++):(d=null,j===0&&f('"o"'))),d!==
null)if(c.charCodeAt(b)===84?(e="T",b++):(e=null,j===0&&f('"T"')),e===null&&(c.charCodeAt(b)===116?(e="t",b++):(e=null,j===0&&f('"t"'))),e!==null){g=[];for(i=o();i!==null;)g.push(i),i=o();if(g!==null)if(c.charCodeAt(b)===69?(i="E",b++):(i=null,j===0&&f('"E"')),i===null&&(c.charCodeAt(b)===101?(i="e",b++):(i=null,j===0&&f('"e"'))),i!==null)if(c.charCodeAt(b)===88?(h="X",b++):(h=null,j===0&&f('"X"')),h===null&&(c.charCodeAt(b)===120?(h="x",b++):(h=null,j===0&&f('"x"'))),h!==null)if(c.charCodeAt(b)===
73?(l="I",b++):(l=null,j===0&&f('"I"')),l===null&&(c.charCodeAt(b)===105?(l="i",b++):(l=null,j===0&&f('"i"'))),l!==null)if(c.charCodeAt(b)===83?(m="S",b++):(m=null,j===0&&f('"S"')),m===null&&(c.charCodeAt(b)===115?(m="s",b++):(m=null,j===0&&f('"s"'))),m!==null)if(c.charCodeAt(b)===84?(n="T",b++):(n=null,j===0&&f('"T"')),n===null&&(c.charCodeAt(b)===116?(n="t",b++):(n=null,j===0&&f('"t"'))),n!==null)if(c.charCodeAt(b)===83?(q="S",b++):(q=null,j===0&&f('"S"')),q===null&&(c.charCodeAt(b)===115?(q="s",
b++):(q=null,j===0&&f('"s"'))),q!==null){r=[];for(t=o();t!==null;)r.push(t),t=o();r!==null?(t=Y(),t!==null?a=[a,d,e,g,i,h,l,m,n,q,r,t]:(a=null,b=s)):(a=null,b=s)}else a=null,b=s;else a=null,b=s;else a=null,b=s;else a=null,b=s;else a=null,b=s;else a=null,b=s;else a=null,b=s}else a=null,b=s;else a=null,b=s;else a=null,b=s;a!==null&&(a=function(a,b){var c={token:"expression",expressionType:"builtincall",builtincall:"notexists"};c.args=[b];return c}(z,a[11]));a===null&&(b=z);j--;j===0&&a===null&&f("[109] NotExistsFunc");
return a}function cc(){var a,d,e,g,i,h,l,m,n,q,r,t,z,s,w,A,v,y,F;j++;y=v=b;c.charCodeAt(b)===67?(a="C",b++):(a=null,j===0&&f('"C"'));a===null&&(c.charCodeAt(b)===99?(a="c",b++):(a=null,j===0&&f('"c"')));if(a!==null)if(c.charCodeAt(b)===79?(d="O",b++):(d=null,j===0&&f('"O"')),d===null&&(c.charCodeAt(b)===111?(d="o",b++):(d=null,j===0&&f('"o"'))),d!==null)if(c.charCodeAt(b)===85?(e="U",b++):(e=null,j===0&&f('"U"')),e===null&&(c.charCodeAt(b)===117?(e="u",b++):(e=null,j===0&&f('"u"'))),e!==null)if(c.charCodeAt(b)===
78?(g="N",b++):(g=null,j===0&&f('"N"')),g===null&&(c.charCodeAt(b)===110?(g="n",b++):(g=null,j===0&&f('"n"'))),g!==null)if(c.charCodeAt(b)===84?(i="T",b++):(i=null,j===0&&f('"T"')),i===null&&(c.charCodeAt(b)===116?(i="t",b++):(i=null,j===0&&f('"t"'))),i!==null){h=[];for(l=o();l!==null;)h.push(l),l=o();if(h!==null)if(c.charCodeAt(b)===40?(l="(",b++):(l=null,j===0&&f('"("')),l!==null){m=[];for(n=o();n!==null;)m.push(n),n=o();if(m!==null)if(F=b,c.charCodeAt(b)===68?(n="D",b++):(n=null,j===0&&f('"D"')),
n===null&&(c.charCodeAt(b)===100?(n="d",b++):(n=null,j===0&&f('"d"'))),n!==null?(c.charCodeAt(b)===73?(q="I",b++):(q=null,j===0&&f('"I"')),q===null&&(c.charCodeAt(b)===105?(q="i",b++):(q=null,j===0&&f('"i"'))),q!==null?(c.charCodeAt(b)===83?(r="S",b++):(r=null,j===0&&f('"S"')),r===null&&(c.charCodeAt(b)===115?(r="s",b++):(r=null,j===0&&f('"s"'))),r!==null?(c.charCodeAt(b)===84?(t="T",b++):(t=null,j===0&&f('"T"')),t===null&&(c.charCodeAt(b)===116?(t="t",b++):(t=null,j===0&&f('"t"'))),t!==null?(c.charCodeAt(b)===
73?(z="I",b++):(z=null,j===0&&f('"I"')),z===null&&(c.charCodeAt(b)===105?(z="i",b++):(z=null,j===0&&f('"i"'))),z!==null?(c.charCodeAt(b)===78?(s="N",b++):(s=null,j===0&&f('"N"')),s===null&&(c.charCodeAt(b)===110?(s="n",b++):(s=null,j===0&&f('"n"'))),s!==null?(c.charCodeAt(b)===67?(w="C",b++):(w=null,j===0&&f('"C"')),w===null&&(c.charCodeAt(b)===99?(w="c",b++):(w=null,j===0&&f('"c"'))),w!==null?(c.charCodeAt(b)===84?(A="T",b++):(A=null,j===0&&f('"T"')),A===null&&(c.charCodeAt(b)===116?(A="t",b++):
(A=null,j===0&&f('"t"'))),A!==null?n=[n,q,r,t,z,s,w,A]:(n=null,b=F)):(n=null,b=F)):(n=null,b=F)):(n=null,b=F)):(n=null,b=F)):(n=null,b=F)):(n=null,b=F)):(n=null,b=F),n=n!==null?n:"",n!==null){q=[];for(r=o();r!==null;)q.push(r),r=o();if(q!==null)if(c.charCodeAt(b)===42?(r="*",b++):(r=null,j===0&&f('"*"')),r===null&&(r=N()),r!==null){t=[];for(z=o();z!==null;)t.push(z),z=o();if(t!==null)if(c.charCodeAt(b)===41?(z=")",b++):(z=null,j===0&&f('")"')),z!==null){s=[];for(w=o();w!==null;)s.push(w),w=o();s!==
null?a=[a,d,e,g,i,h,l,m,n,q,r,t,z,s]:(a=null,b=y)}else a=null,b=y;else a=null,b=y}else a=null,b=y;else a=null,b=y}else a=null,b=y;else a=null,b=y}else a=null,b=y;else a=null,b=y}else a=null,b=y;else a=null,b=y;else a=null,b=y;else a=null,b=y;else a=null,b=y;a!==null&&(a=function(a,b,c){exp={token:"expression",expressionType:"aggregate",aggregateType:"count"};exp.distinct=b!=""?"DISTINCT":b;exp.expression=c;return exp}(v,a[8],a[10]));a===null&&(b=v);if(a===null){y=v=b;c.charCodeAt(b)===83?(a="S",b++):
(a=null,j===0&&f('"S"'));a===null&&(c.charCodeAt(b)===115?(a="s",b++):(a=null,j===0&&f('"s"')));if(a!==null)if(c.charCodeAt(b)===85?(d="U",b++):(d=null,j===0&&f('"U"')),d===null&&(c.charCodeAt(b)===117?(d="u",b++):(d=null,j===0&&f('"u"'))),d!==null)if(c.charCodeAt(b)===77?(e="M",b++):(e=null,j===0&&f('"M"')),e===null&&(c.charCodeAt(b)===109?(e="m",b++):(e=null,j===0&&f('"m"'))),e!==null){g=[];for(i=o();i!==null;)g.push(i),i=o();if(g!==null)if(c.charCodeAt(b)===40?(i="(",b++):(i=null,j===0&&f('"("')),
i!==null){h=[];for(l=o();l!==null;)h.push(l),l=o();if(h!==null)if(F=b,c.charCodeAt(b)===68?(l="D",b++):(l=null,j===0&&f('"D"')),l===null&&(c.charCodeAt(b)===100?(l="d",b++):(l=null,j===0&&f('"d"'))),l!==null?(c.charCodeAt(b)===73?(m="I",b++):(m=null,j===0&&f('"I"')),m===null&&(c.charCodeAt(b)===105?(m="i",b++):(m=null,j===0&&f('"i"'))),m!==null?(c.charCodeAt(b)===83?(n="S",b++):(n=null,j===0&&f('"S"')),n===null&&(c.charCodeAt(b)===115?(n="s",b++):(n=null,j===0&&f('"s"'))),n!==null?(c.charCodeAt(b)===
84?(q="T",b++):(q=null,j===0&&f('"T"')),q===null&&(c.charCodeAt(b)===116?(q="t",b++):(q=null,j===0&&f('"t"'))),q!==null?(c.charCodeAt(b)===73?(r="I",b++):(r=null,j===0&&f('"I"')),r===null&&(c.charCodeAt(b)===105?(r="i",b++):(r=null,j===0&&f('"i"'))),r!==null?(c.charCodeAt(b)===78?(t="N",b++):(t=null,j===0&&f('"N"')),t===null&&(c.charCodeAt(b)===110?(t="n",b++):(t=null,j===0&&f('"n"'))),t!==null?(c.charCodeAt(b)===67?(z="C",b++):(z=null,j===0&&f('"C"')),z===null&&(c.charCodeAt(b)===99?(z="c",b++):
(z=null,j===0&&f('"c"'))),z!==null?(c.charCodeAt(b)===84?(s="T",b++):(s=null,j===0&&f('"T"')),s===null&&(c.charCodeAt(b)===116?(s="t",b++):(s=null,j===0&&f('"t"'))),s!==null?l=[l,m,n,q,r,t,z,s]:(l=null,b=F)):(l=null,b=F)):(l=null,b=F)):(l=null,b=F)):(l=null,b=F)):(l=null,b=F)):(l=null,b=F)):(l=null,b=F),l=l!==null?l:"",l!==null){m=[];for(n=o();n!==null;)m.push(n),n=o();if(m!==null)if(n=N(),n!==null){q=[];for(r=o();r!==null;)q.push(r),r=o();if(q!==null)if(c.charCodeAt(b)===41?(r=")",b++):(r=null,j===
0&&f('")"')),r!==null){t=[];for(z=o();z!==null;)t.push(z),z=o();t!==null?a=[a,d,e,g,i,h,l,m,n,q,r,t]:(a=null,b=y)}else a=null,b=y;else a=null,b=y}else a=null,b=y;else a=null,b=y}else a=null,b=y;else a=null,b=y}else a=null,b=y;else a=null,b=y}else a=null,b=y;else a=null,b=y;else a=null,b=y;a!==null&&(a=function(a,b,c){exp={token:"expression",expressionType:"aggregate",aggregateType:"sum"};exp.distinct=b!=""?"DISTINCT":b;exp.expression=c;return exp}(v,a[6],a[8]));a===null&&(b=v);if(a===null){y=v=b;
c.charCodeAt(b)===77?(a="M",b++):(a=null,j===0&&f('"M"'));a===null&&(c.charCodeAt(b)===109?(a="m",b++):(a=null,j===0&&f('"m"')));if(a!==null)if(c.charCodeAt(b)===73?(d="I",b++):(d=null,j===0&&f('"I"')),d===null&&(c.charCodeAt(b)===105?(d="i",b++):(d=null,j===0&&f('"i"'))),d!==null)if(c.charCodeAt(b)===78?(e="N",b++):(e=null,j===0&&f('"N"')),e===null&&(c.charCodeAt(b)===110?(e="n",b++):(e=null,j===0&&f('"n"'))),e!==null){g=[];for(i=o();i!==null;)g.push(i),i=o();if(g!==null)if(c.charCodeAt(b)===40?
(i="(",b++):(i=null,j===0&&f('"("')),i!==null){h=[];for(l=o();l!==null;)h.push(l),l=o();if(h!==null)if(F=b,c.charCodeAt(b)===68?(l="D",b++):(l=null,j===0&&f('"D"')),l===null&&(c.charCodeAt(b)===100?(l="d",b++):(l=null,j===0&&f('"d"'))),l!==null?(c.charCodeAt(b)===73?(m="I",b++):(m=null,j===0&&f('"I"')),m===null&&(c.charCodeAt(b)===105?(m="i",b++):(m=null,j===0&&f('"i"'))),m!==null?(c.charCodeAt(b)===83?(n="S",b++):(n=null,j===0&&f('"S"')),n===null&&(c.charCodeAt(b)===115?(n="s",b++):(n=null,j===0&&
f('"s"'))),n!==null?(c.charCodeAt(b)===84?(q="T",b++):(q=null,j===0&&f('"T"')),q===null&&(c.charCodeAt(b)===116?(q="t",b++):(q=null,j===0&&f('"t"'))),q!==null?(c.charCodeAt(b)===73?(r="I",b++):(r=null,j===0&&f('"I"')),r===null&&(c.charCodeAt(b)===105?(r="i",b++):(r=null,j===0&&f('"i"'))),r!==null?(c.charCodeAt(b)===78?(t="N",b++):(t=null,j===0&&f('"N"')),t===null&&(c.charCodeAt(b)===110?(t="n",b++):(t=null,j===0&&f('"n"'))),t!==null?(c.charCodeAt(b)===67?(z="C",b++):(z=null,j===0&&f('"C"')),z===null&&
(c.charCodeAt(b)===99?(z="c",b++):(z=null,j===0&&f('"c"'))),z!==null?(c.charCodeAt(b)===84?(s="T",b++):(s=null,j===0&&f('"T"')),s===null&&(c.charCodeAt(b)===116?(s="t",b++):(s=null,j===0&&f('"t"'))),s!==null?l=[l,m,n,q,r,t,z,s]:(l=null,b=F)):(l=null,b=F)):(l=null,b=F)):(l=null,b=F)):(l=null,b=F)):(l=null,b=F)):(l=null,b=F)):(l=null,b=F),l=l!==null?l:"",l!==null){m=[];for(n=o();n!==null;)m.push(n),n=o();if(m!==null)if(n=N(),n!==null){q=[];for(r=o();r!==null;)q.push(r),r=o();if(q!==null)if(c.charCodeAt(b)===
41?(r=")",b++):(r=null,j===0&&f('")"')),r!==null){t=[];for(z=o();z!==null;)t.push(z),z=o();t!==null?a=[a,d,e,g,i,h,l,m,n,q,r,t]:(a=null,b=y)}else a=null,b=y;else a=null,b=y}else a=null,b=y;else a=null,b=y}else a=null,b=y;else a=null,b=y}else a=null,b=y;else a=null,b=y}else a=null,b=y;else a=null,b=y;else a=null,b=y;a!==null&&(a=function(a,b,c){exp={token:"expression",expressionType:"aggregate",aggregateType:"min"};exp.distinct=b!=""?"DISTINCT":b;exp.expression=c;return exp}(v,a[6],a[8]));a===null&&
(b=v);if(a===null){y=v=b;c.charCodeAt(b)===77?(a="M",b++):(a=null,j===0&&f('"M"'));a===null&&(c.charCodeAt(b)===109?(a="m",b++):(a=null,j===0&&f('"m"')));if(a!==null)if(c.charCodeAt(b)===65?(d="A",b++):(d=null,j===0&&f('"A"')),d===null&&(c.charCodeAt(b)===97?(d="a",b++):(d=null,j===0&&f('"a"'))),d!==null)if(c.charCodeAt(b)===88?(e="X",b++):(e=null,j===0&&f('"X"')),e===null&&(c.charCodeAt(b)===120?(e="x",b++):(e=null,j===0&&f('"x"'))),e!==null){g=[];for(i=o();i!==null;)g.push(i),i=o();if(g!==null)if(c.charCodeAt(b)===
40?(i="(",b++):(i=null,j===0&&f('"("')),i!==null){h=[];for(l=o();l!==null;)h.push(l),l=o();if(h!==null)if(F=b,c.charCodeAt(b)===68?(l="D",b++):(l=null,j===0&&f('"D"')),l===null&&(c.charCodeAt(b)===100?(l="d",b++):(l=null,j===0&&f('"d"'))),l!==null?(c.charCodeAt(b)===73?(m="I",b++):(m=null,j===0&&f('"I"')),m===null&&(c.charCodeAt(b)===105?(m="i",b++):(m=null,j===0&&f('"i"'))),m!==null?(c.charCodeAt(b)===83?(n="S",b++):(n=null,j===0&&f('"S"')),n===null&&(c.charCodeAt(b)===115?(n="s",b++):(n=null,j===
0&&f('"s"'))),n!==null?(c.charCodeAt(b)===84?(q="T",b++):(q=null,j===0&&f('"T"')),q===null&&(c.charCodeAt(b)===116?(q="t",b++):(q=null,j===0&&f('"t"'))),q!==null?(c.charCodeAt(b)===73?(r="I",b++):(r=null,j===0&&f('"I"')),r===null&&(c.charCodeAt(b)===105?(r="i",b++):(r=null,j===0&&f('"i"'))),r!==null?(c.charCodeAt(b)===78?(t="N",b++):(t=null,j===0&&f('"N"')),t===null&&(c.charCodeAt(b)===110?(t="n",b++):(t=null,j===0&&f('"n"'))),t!==null?(c.charCodeAt(b)===67?(z="C",b++):(z=null,j===0&&f('"C"')),z===
null&&(c.charCodeAt(b)===99?(z="c",b++):(z=null,j===0&&f('"c"'))),z!==null?(c.charCodeAt(b)===84?(s="T",b++):(s=null,j===0&&f('"T"')),s===null&&(c.charCodeAt(b)===116?(s="t",b++):(s=null,j===0&&f('"t"'))),s!==null?l=[l,m,n,q,r,t,z,s]:(l=null,b=F)):(l=null,b=F)):(l=null,b=F)):(l=null,b=F)):(l=null,b=F)):(l=null,b=F)):(l=null,b=F)):(l=null,b=F),l=l!==null?l:"",l!==null){m=[];for(n=o();n!==null;)m.push(n),n=o();if(m!==null)if(n=N(),n!==null){q=[];for(r=o();r!==null;)q.push(r),r=o();if(q!==null)if(c.charCodeAt(b)===
41?(r=")",b++):(r=null,j===0&&f('")"')),r!==null){t=[];for(z=o();z!==null;)t.push(z),z=o();t!==null?a=[a,d,e,g,i,h,l,m,n,q,r,t]:(a=null,b=y)}else a=null,b=y;else a=null,b=y}else a=null,b=y;else a=null,b=y}else a=null,b=y;else a=null,b=y}else a=null,b=y;else a=null,b=y}else a=null,b=y;else a=null,b=y;else a=null,b=y;a!==null&&(a=function(a,b,c){exp={token:"expression",expressionType:"aggregate",aggregateType:"max"};exp.distinct=b!=""?"DISTINCT":b;exp.expression=c;return exp}(v,a[6],a[8]));a===null&&
(b=v);if(a===null){y=v=b;c.charCodeAt(b)===65?(a="A",b++):(a=null,j===0&&f('"A"'));a===null&&(c.charCodeAt(b)===97?(a="a",b++):(a=null,j===0&&f('"a"')));if(a!==null)if(c.charCodeAt(b)===86?(d="V",b++):(d=null,j===0&&f('"V"')),d===null&&(c.charCodeAt(b)===118?(d="v",b++):(d=null,j===0&&f('"v"'))),d!==null)if(c.charCodeAt(b)===71?(e="G",b++):(e=null,j===0&&f('"G"')),e===null&&(c.charCodeAt(b)===103?(e="g",b++):(e=null,j===0&&f('"g"'))),e!==null){g=[];for(i=o();i!==null;)g.push(i),i=o();if(g!==null)if(c.charCodeAt(b)===
40?(i="(",b++):(i=null,j===0&&f('"("')),i!==null){h=[];for(l=o();l!==null;)h.push(l),l=o();if(h!==null)if(F=b,c.charCodeAt(b)===68?(l="D",b++):(l=null,j===0&&f('"D"')),l===null&&(c.charCodeAt(b)===100?(l="d",b++):(l=null,j===0&&f('"d"'))),l!==null?(c.charCodeAt(b)===73?(m="I",b++):(m=null,j===0&&f('"I"')),m===null&&(c.charCodeAt(b)===105?(m="i",b++):(m=null,j===0&&f('"i"'))),m!==null?(c.charCodeAt(b)===83?(n="S",b++):(n=null,j===0&&f('"S"')),n===null&&(c.charCodeAt(b)===115?(n="s",b++):(n=null,j===
0&&f('"s"'))),n!==null?(c.charCodeAt(b)===84?(q="T",b++):(q=null,j===0&&f('"T"')),q===null&&(c.charCodeAt(b)===116?(q="t",b++):(q=null,j===0&&f('"t"'))),q!==null?(c.charCodeAt(b)===73?(r="I",b++):(r=null,j===0&&f('"I"')),r===null&&(c.charCodeAt(b)===105?(r="i",b++):(r=null,j===0&&f('"i"'))),r!==null?(c.charCodeAt(b)===78?(t="N",b++):(t=null,j===0&&f('"N"')),t===null&&(c.charCodeAt(b)===110?(t="n",b++):(t=null,j===0&&f('"n"'))),t!==null?(c.charCodeAt(b)===67?(z="C",b++):(z=null,j===0&&f('"C"')),z===
null&&(c.charCodeAt(b)===99?(z="c",b++):(z=null,j===0&&f('"c"'))),z!==null?(c.charCodeAt(b)===84?(s="T",b++):(s=null,j===0&&f('"T"')),s===null&&(c.charCodeAt(b)===116?(s="t",b++):(s=null,j===0&&f('"t"'))),s!==null?l=[l,m,n,q,r,t,z,s]:(l=null,b=F)):(l=null,b=F)):(l=null,b=F)):(l=null,b=F)):(l=null,b=F)):(l=null,b=F)):(l=null,b=F)):(l=null,b=F),l=l!==null?l:"",l!==null){m=[];for(n=o();n!==null;)m.push(n),n=o();if(m!==null)if(n=N(),n!==null){q=[];for(r=o();r!==null;)q.push(r),r=o();if(q!==null)if(c.charCodeAt(b)===
41?(r=")",b++):(r=null,j===0&&f('")"')),r!==null){t=[];for(z=o();z!==null;)t.push(z),z=o();t!==null?a=[a,d,e,g,i,h,l,m,n,q,r,t]:(a=null,b=y)}else a=null,b=y;else a=null,b=y}else a=null,b=y;else a=null,b=y}else a=null,b=y;else a=null,b=y}else a=null,b=y;else a=null,b=y}else a=null,b=y;else a=null,b=y;else a=null,b=y;a!==null&&(a=function(a,b,c){exp={token:"expression",expressionType:"aggregate",aggregateType:"avg"};exp.distinct=b!=""?"DISTINCT":b;exp.expression=c;return exp}(v,a[6],a[8]));a===null&&
(b=v)}}}}j--;j===0&&a===null&&f("[110] Aggregate");return a}function bc(){var a,c,d,e;j++;e=d=b;a=W();a!==null?(c=vb(),c=c!==null?c:"",c!==null?a=[a,c]:(a=null,b=e)):(a=null,b=e);a!==null&&(a=function(a,b,c){a={token:"expression",expressionType:"irireforfunction"};a.iriref=b;a.args=c.value;return a}(d,a[0],a[1]));a===null&&(b=d);j--;j===0&&a===null&&f("[117] IRIrefOrFunction");return a}function Ra(){var a,d,e,g,i,h;j++;i=g=b;a=gc();a!==null?(d=hc(),d===null&&(h=b,c.substr(b,2)==="^^"?(d="^^",b+=2):
(d=null,j===0&&f('"^^"')),d!==null?(e=W(),e!==null?d=[d,e]:(d=null,b=h)):(d=null,b=h)),d=d!==null?d:"",d!==null?a=[a,d]:(a=null,b=i)):(a=null,b=i);a!==null&&(a=function(a,b,c){return typeof c==="string"&&c.length>0?{token:"literal",value:b.value,lang:c.slice(1),type:null}:typeof c==="object"?(c.shift(),{token:"literal",value:b.value,lang:null,type:c[0]}):{token:"literal",value:b.value,lang:null,type:null}}(g,a[0],a[1]));a===null&&(b=g);j--;j===0&&a===null&&f("[112] RDFLiteral");return a}function Sa(){var a;
j++;a=ic();a===null&&(a=jc(),a===null&&(a=Ca()));j--;j===0&&a===null&&f("[113] NumericLiteral");return a}function ic(){var a;j++;a=cb();a===null&&(a=db(),a===null&&(a=ia()));j--;j===0&&a===null&&f("[114] NumericLiteralUnsigned");return a}function jc(){var a;j++;a=kc();a===null&&(a=lc(),a===null&&(a=mc()));j--;j===0&&a===null&&f("[115] NumericLiteralPositive");return a}function Ca(){var a;j++;a=nc();a===null&&(a=oc(),a===null&&(a=pc()));j--;j===0&&a===null&&f("[116] NumericLiteralNegative");return a}
function Ta(){var a,d,e,g,i,h,l;j++;l=h=b;c.charCodeAt(b)===84?(a="T",b++):(a=null,j===0&&f('"T"'));a===null&&(c.charCodeAt(b)===116?(a="t",b++):(a=null,j===0&&f('"t"')));a!==null?(c.charCodeAt(b)===82?(d="R",b++):(d=null,j===0&&f('"R"')),d===null&&(c.charCodeAt(b)===114?(d="r",b++):(d=null,j===0&&f('"r"'))),d!==null?(c.charCodeAt(b)===85?(e="U",b++):(e=null,j===0&&f('"U"')),e===null&&(c.charCodeAt(b)===117?(e="u",b++):(e=null,j===0&&f('"u"'))),e!==null?(c.charCodeAt(b)===69?(g="E",b++):(g=null,j===
0&&f('"E"')),g===null&&(c.charCodeAt(b)===101?(g="e",b++):(g=null,j===0&&f('"e"'))),g!==null?a=[a,d,e,g]:(a=null,b=l)):(a=null,b=l)):(a=null,b=l)):(a=null,b=l);a!==null&&(a=lit={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#boolean",value:!0});a===null&&(b=h);a===null&&(l=h=b,c.charCodeAt(b)===70?(a="F",b++):(a=null,j===0&&f('"F"')),a===null&&(c.charCodeAt(b)===102?(a="f",b++):(a=null,j===0&&f('"f"'))),a!==null?(c.charCodeAt(b)===65?(d="A",b++):(d=null,j===0&&f('"A"')),d===null&&
(c.charCodeAt(b)===97?(d="a",b++):(d=null,j===0&&f('"a"'))),d!==null?(c.charCodeAt(b)===76?(e="L",b++):(e=null,j===0&&f('"L"')),e===null&&(c.charCodeAt(b)===108?(e="l",b++):(e=null,j===0&&f('"l"'))),e!==null?(c.charCodeAt(b)===83?(g="S",b++):(g=null,j===0&&f('"S"')),g===null&&(c.charCodeAt(b)===115?(g="s",b++):(g=null,j===0&&f('"s"'))),g!==null?(c.charCodeAt(b)===69?(i="E",b++):(i=null,j===0&&f('"E"')),i===null&&(c.charCodeAt(b)===101?(i="e",b++):(i=null,j===0&&f('"e"'))),i!==null?a=[a,d,e,g,i]:(a=
null,b=l)):(a=null,b=l)):(a=null,b=l)):(a=null,b=l)):(a=null,b=l),a!==null&&(a=lit={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#boolean",value:!1}),a===null&&(b=h));j--;j===0&&a===null&&f("[117] BooleanLiteral");return a}function gc(){var a,c;j++;c=b;a=qc();a!==null&&(a={token:"string",value:a});a===null&&(b=c);a===null&&(c=b,a=rc(),a!==null&&(a={token:"string",value:a}),a===null&&(b=c),a===null&&(c=b,a=sc(),a!==null&&(a={token:"string",value:a}),a===null&&(b=c),a===null&&(c=
b,a=tc(),a!==null&&(a={token:"string",value:a}),a===null&&(b=c))));j--;j===0&&a===null&&f("[118] String");return a}function W(){var a,c;j++;c=b;a=wa();a!==null&&(a={token:"uri",prefix:null,suffix:null,value:a});a===null&&(b=c);a===null&&(c=b,a=uc(),a===null&&(b=c));j--;j===0&&a===null&&f("[119] IRIref");return a}function uc(){var a,c;j++;c=b;a=vc();a!==null&&(a={token:"uri",prefix:a[0],suffix:a[1],value:null});a===null&&(b=c);a===null&&(c=b,a=Oa(),a!==null&&(a={token:"uri",prefix:a,suffix:"",value:null}),
a===null&&(b=c));j--;j===0&&a===null&&f("[120] PrefixedName");return a}function ac(){var a,c;j++;c=b;a=wc();a!==null&&(a={token:"blank",label:a});a===null&&(b=c);a===null&&(c=b,a=xc(),a!==null&&(ja++,a={token:"blank",label:"_:"+ja}),a===null&&(b=c));j--;j===0&&a===null&&f("[121] BlankNode");return a}function wa(){var a,d,e,g,i;j++;i=g=b;c.charCodeAt(b)===60?(a="<",b++):(a=null,j===0&&f('"<"'));if(a!==null){d=[];/^[^<>"{}|^`\\]/.test(c.charAt(b))?(e=c.charAt(b),b++):(e=null,j===0&&f('[^<>"{}|^`\\\\]'));
for(;e!==null;)d.push(e),/^[^<>"{}|^`\\]/.test(c.charAt(b))?(e=c.charAt(b),b++):(e=null,j===0&&f('[^<>"{}|^`\\\\]'));d!==null?(c.charCodeAt(b)===62?(e=">",b++):(e=null,j===0&&f('">"')),e!==null?a=[a,d,e]:(a=null,b=i)):(a=null,b=i)}else a=null,b=i;a!==null&&(a=a[1].join(""));a===null&&(b=g);j--;j===0&&a===null&&f("[122] IRI_REF");return a}function Oa(){var a,d,e,g;j++;g=e=b;a=mb();a=a!==null?a:"";a!==null?(c.charCodeAt(b)===58?(d=":",b++):(d=null,j===0&&f('":"')),d!==null?a=[a,d]:(a=null,b=g)):(a=
null,b=g);a!==null&&(a=a[0]);a===null&&(b=e);j--;j===0&&a===null&&f("[123] PNAME_NS");return a}function vc(){var a,c,d,e;j++;e=d=b;a=Oa();a!==null?(c=zb(),c!==null?a=[a,c]:(a=null,b=e)):(a=null,b=e);a!==null&&(a=[a[0],a[1]]);a===null&&(b=d);j--;j===0&&a===null&&f("[124] PNAME_LN");return a}function wc(){var a,d,e,g;j++;g=e=b;c.substr(b,2)==="_:"?(a="_:",b+=2):(a=null,j===0&&f('"_:"'));a!==null?(d=zb(),d!==null?a=[a,d]:(a=null,b=g)):(a=null,b=g);a!==null&&(a=a[1]);a===null&&(b=e);j--;j===0&&a===null&&
f("[125] BLANK_NODE_LABEL");return a}function Yb(){var a,d,e,g;j++;g=e=b;c.charCodeAt(b)===63?(a="?",b++):(a=null,j===0&&f('"?"'));a!==null?(d=eb(),d!==null?a=[a,d]:(a=null,b=g)):(a=null,b=g);a!==null&&(a={value:a[1],parameterized:!1,required:!1});a===null&&(b=e);j--;j===0&&a===null&&f("[126] VAR1");return a}function Zb(){var a,d,e,g;j++;g=e=b;c.charCodeAt(b)===36?(a="$",b++):(a=null,j===0&&f('"$"'));a!==null?(d=eb(),d!==null?a=[a,d]:(a=null,b=g)):(a=null,b=g);a!==null&&(a={value:a[1],parameterized:!0,
required:!1});a===null&&(b=e);j--;j===0&&a===null&&f("[127] VAR2");return a}function $b(){var a,d,e,g;j++;g=e=b;c.charCodeAt(b)===37?(a="%",b++):(a=null,j===0&&f('"%"'));a!==null?(d=eb(),d!==null?a=[a,d]:(a=null,b=g)):(a=null,b=g);a!==null&&(a={value:a[1],parameterized:!0,required:!0});a===null&&(b=e);j--;j===0&&a===null&&f("[127collustra] VAR3");return a}function hc(){var a,d,e,g,i,h,l,m,n;j++;m=l=b;c.charCodeAt(b)===64?(a="@",b++):(a=null,j===0&&f('"@"'));if(a!==null){/^[a-zA-Z]/.test(c.charAt(b))?
(e=c.charAt(b),b++):(e=null,j===0&&f("[a-zA-Z]"));if(e!==null)for(d=[];e!==null;)d.push(e),/^[a-zA-Z]/.test(c.charAt(b))?(e=c.charAt(b),b++):(e=null,j===0&&f("[a-zA-Z]"));else d=null;if(d!==null){e=[];n=b;c.charCodeAt(b)===45?(g="-",b++):(g=null,j===0&&f('"-"'));if(g!==null){/^[a-zA-Z0-9]/.test(c.charAt(b))?(h=c.charAt(b),b++):(h=null,j===0&&f("[a-zA-Z0-9]"));if(h!==null)for(i=[];h!==null;)i.push(h),/^[a-zA-Z0-9]/.test(c.charAt(b))?(h=c.charAt(b),b++):(h=null,j===0&&f("[a-zA-Z0-9]"));else i=null;
i!==null?g=[g,i]:(g=null,b=n)}else g=null,b=n;for(;g!==null;)if(e.push(g),n=b,c.charCodeAt(b)===45?(g="-",b++):(g=null,j===0&&f('"-"')),g!==null){/^[a-zA-Z0-9]/.test(c.charAt(b))?(h=c.charAt(b),b++):(h=null,j===0&&f("[a-zA-Z0-9]"));if(h!==null)for(i=[];h!==null;)i.push(h),/^[a-zA-Z0-9]/.test(c.charAt(b))?(h=c.charAt(b),b++):(h=null,j===0&&f("[a-zA-Z0-9]"));else i=null;i!==null?g=[g,i]:(g=null,b=n)}else g=null,b=n;e!==null?a=[a,d,e]:(a=null,b=m)}else a=null,b=m}else a=null,b=m;a!==null&&(a=a[2].length===
0?("@"+a[1].join("")).toLowerCase():("@"+a[1].join("")+"-"+a[2][0][1].join("")).toLowerCase());a===null&&(b=l);j--;j===0&&a===null&&f("[128] LANGTAG");return a}function ia(){var a,d,e;j++;e=b;/^[0-9]/.test(c.charAt(b))?(d=c.charAt(b),b++):(d=null,j===0&&f("[0-9]"));if(d!==null)for(a=[];d!==null;)a.push(d),/^[0-9]/.test(c.charAt(b))?(d=c.charAt(b),b++):(d=null,j===0&&f("[0-9]"));else a=null;a!==null&&(a=function(a,b){lit={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#integer"};lit.value=
ba(b);return lit}(e,a));a===null&&(b=e);j--;j===0&&a===null&&f("[129] INTEGER");return a}function db(){var a,d,e,g,i,h;j++;h=i=b;/^[0-9]/.test(c.charAt(b))?(d=c.charAt(b),b++):(d=null,j===0&&f("[0-9]"));if(d!==null)for(a=[];d!==null;)a.push(d),/^[0-9]/.test(c.charAt(b))?(d=c.charAt(b),b++):(d=null,j===0&&f("[0-9]"));else a=null;if(a!==null)if(c.charCodeAt(b)===46?(d=".",b++):(d=null,j===0&&f('"."')),d!==null){e=[];/^[0-9]/.test(c.charAt(b))?(g=c.charAt(b),b++):(g=null,j===0&&f("[0-9]"));for(;g!==
null;)e.push(g),/^[0-9]/.test(c.charAt(b))?(g=c.charAt(b),b++):(g=null,j===0&&f("[0-9]"));e!==null?a=[a,d,e]:(a=null,b=h)}else a=null,b=h;else a=null,b=h;a!==null&&(a=function(a,b,c,d){lit={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#decimal"};lit.value=ba([b,c,d]);return lit}(i,a[0],a[1],a[2]));a===null&&(b=i);if(a===null){h=i=b;c.charCodeAt(b)===46?(a=".",b++):(a=null,j===0&&f('"."'));if(a!==null){/^[0-9]/.test(c.charAt(b))?(e=c.charAt(b),b++):(e=null,j===0&&f("[0-9]"));if(e!==
null)for(d=[];e!==null;)d.push(e),/^[0-9]/.test(c.charAt(b))?(e=c.charAt(b),b++):(e=null,j===0&&f("[0-9]"));else d=null;d!==null?a=[a,d]:(a=null,b=h)}else a=null,b=h;a!==null&&(a=function(a,b,c){lit={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#decimal"};lit.value=ba([b,c]);return lit}(i,a[0],a[1]));a===null&&(b=i)}j--;j===0&&a===null&&f("[130] DECIMAL");return a}function cb(){var a,d,e,g,i,h;j++;h=i=b;/^[0-9]/.test(c.charAt(b))?(d=c.charAt(b),b++):(d=null,j===0&&f("[0-9]"));if(d!==
null)for(a=[];d!==null;)a.push(d),/^[0-9]/.test(c.charAt(b))?(d=c.charAt(b),b++):(d=null,j===0&&f("[0-9]"));else a=null;if(a!==null)if(c.charCodeAt(b)===46?(d=".",b++):(d=null,j===0&&f('"."')),d!==null){e=[];/^[0-9]/.test(c.charAt(b))?(g=c.charAt(b),b++):(g=null,j===0&&f("[0-9]"));for(;g!==null;)e.push(g),/^[0-9]/.test(c.charAt(b))?(g=c.charAt(b),b++):(g=null,j===0&&f("[0-9]"));e!==null?(g=fb(),g!==null?a=[a,d,e,g]:(a=null,b=h)):(a=null,b=h)}else a=null,b=h;else a=null,b=h;a!==null&&(a=function(a,
b,c,d,f){lit={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#double"};lit.value=ba([b,c,d,f]);return lit}(i,a[0],a[1],a[2],a[3]));a===null&&(b=i);if(a===null){h=i=b;c.charCodeAt(b)===46?(a=".",b++):(a=null,j===0&&f('"."'));if(a!==null){/^[0-9]/.test(c.charAt(b))?(e=c.charAt(b),b++):(e=null,j===0&&f("[0-9]"));if(e!==null)for(d=[];e!==null;)d.push(e),/^[0-9]/.test(c.charAt(b))?(e=c.charAt(b),b++):(e=null,j===0&&f("[0-9]"));else d=null;d!==null?(e=fb(),e!==null?a=[a,d,e]:(a=null,b=
h)):(a=null,b=h)}else a=null,b=h;a!==null&&(a=function(a,b,c,d){lit={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#double"};lit.value=ba([b,c,d]);return lit}(i,a[0],a[1],a[2]));a===null&&(b=i);if(a===null){h=i=b;/^[0-9]/.test(c.charAt(b))?(d=c.charAt(b),b++):(d=null,j===0&&f("[0-9]"));if(d!==null)for(a=[];d!==null;)a.push(d),/^[0-9]/.test(c.charAt(b))?(d=c.charAt(b),b++):(d=null,j===0&&f("[0-9]"));else a=null;a!==null?(d=fb(),d!==null?a=[a,d]:(a=null,b=h)):(a=null,b=h);a!==null&&
(a=function(a,b,c){lit={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#double"};lit.value=ba([b,c]);return lit}(i,a[0],a[1]));a===null&&(b=i)}}j--;j===0&&a===null&&f("[131] DOUBLE");return a}function mc(){var a,d,e,g;j++;g=e=b;c.charCodeAt(b)===43?(a="+",b++):(a=null,j===0&&f('"+"'));a!==null?(d=ia(),d!==null?a=[a,d]:(a=null,b=g)):(a=null,b=g);a!==null&&(a=function(a,b){b.value="+"+b.value;return b}(e,a[1]));a===null&&(b=e);j--;j===0&&a===null&&f("[132] INTEGER_POSITIVE");return a}
function lc(){var a,d,e,g;j++;g=e=b;c.charCodeAt(b)===43?(a="+",b++):(a=null,j===0&&f('"+"'));a!==null?(d=db(),d!==null?a=[a,d]:(a=null,b=g)):(a=null,b=g);a!==null&&(a=function(a,b){b.value="+"+b.value;return b}(e,a[1]));a===null&&(b=e);j--;j===0&&a===null&&f("[133] DECIMAL_POSITIVE");return a}function kc(){var a,d,e,g;j++;g=e=b;c.charCodeAt(b)===43?(a="+",b++):(a=null,j===0&&f('"+"'));a!==null?(d=cb(),d!==null?a=[a,d]:(a=null,b=g)):(a=null,b=g);a!==null&&(a=function(a,b){b.value="+"+b.value;return b}(e,
a[1]));a===null&&(b=e);j--;j===0&&a===null&&f("[134] DOUBLE_POSITIVE");return a}function pc(){var a,d,e,g;j++;g=e=b;c.charCodeAt(b)===45?(a="-",b++):(a=null,j===0&&f('"-"'));a!==null?(d=ia(),d!==null?a=[a,d]:(a=null,b=g)):(a=null,b=g);a!==null&&(a=function(a,b){b.value="-"+b.value;return b}(e,a[1]));a===null&&(b=e);j--;j===0&&a===null&&f("[135] INTEGER_NEGATIVE");return a}function oc(){var a,d,e,g;j++;g=e=b;c.charCodeAt(b)===45?(a="-",b++):(a=null,j===0&&f('"-"'));a!==null?(d=db(),d!==null?a=[a,d]:
(a=null,b=g)):(a=null,b=g);a!==null&&(a=function(a,b){b.value="-"+b.value;return b}(e,a[1]));a===null&&(b=e);j--;j===0&&a===null&&f("[136] DECIMAL_NEGATIVE");return a}function nc(){var a,d,e,g;j++;g=e=b;c.charCodeAt(b)===45?(a="-",b++):(a=null,j===0&&f('"-"'));a!==null?(d=cb(),d!==null?a=[a,d]:(a=null,b=g)):(a=null,b=g);a!==null&&(a=function(a,b){b.value="-"+b.value;return b}(e,a[1]));a===null&&(b=e);j--;j===0&&a===null&&f("[137] DOUBLE_NEGATIVE");return a}function fb(){var a,d,e,g,i,h;j++;h=i=b;
/^[eE]/.test(c.charAt(b))?(a=c.charAt(b),b++):(a=null,j===0&&f("[eE]"));if(a!==null)if(/^[+\-]/.test(c.charAt(b))?(d=c.charAt(b),b++):(d=null,j===0&&f("[+\\-]")),d=d!==null?d:"",d!==null){/^[0-9]/.test(c.charAt(b))?(g=c.charAt(b),b++):(g=null,j===0&&f("[0-9]"));if(g!==null)for(e=[];g!==null;)e.push(g),/^[0-9]/.test(c.charAt(b))?(g=c.charAt(b),b++):(g=null,j===0&&f("[0-9]"));else e=null;e!==null?a=[a,d,e]:(a=null,b=h)}else a=null,b=h;else a=null,b=h;a!==null&&(a=ba([a[0],a[1],a[2]]));a===null&&(b=
i);j--;j===0&&a===null&&f("[138] EXPONENT");return a}function sc(){var a,d,e,g,i;j++;i=g=b;c.charCodeAt(b)===39?(a="'",b++):(a=null,j===0&&f('"\'"'));if(a!==null){d=[];/^[^'\\\n\r]/.test(c.charAt(b))?(e=c.charAt(b),b++):(e=null,j===0&&f("[^'\\\\\\n\\r]"));for(e===null&&(e=ka());e!==null;)d.push(e),/^[^'\\\n\r]/.test(c.charAt(b))?(e=c.charAt(b),b++):(e=null,j===0&&f("[^'\\\\\\n\\r]")),e===null&&(e=ka());d!==null?(c.charCodeAt(b)===39?(e="'",b++):(e=null,j===0&&f('"\'"')),e!==null?a=[a,d,e]:(a=null,
b=i)):(a=null,b=i)}else a=null,b=i;a!==null&&(a=ba(a[1]));a===null&&(b=g);j--;j===0&&a===null&&f("[139] STRING_LITERAL1");return a}function tc(){var a,d,e,g,i;j++;i=g=b;c.charCodeAt(b)===34?(a='"',b++):(a=null,j===0&&f('"\\""'));if(a!==null){d=[];/^[^"\\\n\r]/.test(c.charAt(b))?(e=c.charAt(b),b++):(e=null,j===0&&f('[^"\\\\\\n\\r]'));for(e===null&&(e=ka());e!==null;)d.push(e),/^[^"\\\n\r]/.test(c.charAt(b))?(e=c.charAt(b),b++):(e=null,j===0&&f('[^"\\\\\\n\\r]')),e===null&&(e=ka());d!==null?(c.charCodeAt(b)===
34?(e='"',b++):(e=null,j===0&&f('"\\""')),e!==null?a=[a,d,e]:(a=null,b=i)):(a=null,b=i)}else a=null,b=i;a!==null&&(a=ba(a[1]));a===null&&(b=g);j--;j===0&&a===null&&f("[140] STRING_LITERAL2");return a}function qc(){var a,d,e,g,i;j++;i=g=b;c.substr(b,3)==="'''"?(a="'''",b+=3):(a=null,j===0&&f("\"'''\""));if(a!==null){d=[];/^[^'\\]/.test(c.charAt(b))?(e=c.charAt(b),b++):(e=null,j===0&&f("[^'\\\\]"));for(e===null&&(e=ka());e!==null;)d.push(e),/^[^'\\]/.test(c.charAt(b))?(e=c.charAt(b),b++):(e=null,j===
0&&f("[^'\\\\]")),e===null&&(e=ka());d!==null?(c.substr(b,3)==="'''"?(e="'''",b+=3):(e=null,j===0&&f("\"'''\"")),e!==null?a=[a,d,e]:(a=null,b=i)):(a=null,b=i)}else a=null,b=i;a!==null&&(a=ba(a[1]));a===null&&(b=g);j--;j===0&&a===null&&f("[141] STRING_LITERAL_LONG1");return a}function rc(){var a,d,e,g,i;j++;i=g=b;c.substr(b,3)==='"""'?(a='"""',b+=3):(a=null,j===0&&f('"\\"\\"\\""'));if(a!==null){d=[];/^[^"\\]/.test(c.charAt(b))?(e=c.charAt(b),b++):(e=null,j===0&&f('[^"\\\\]'));for(e===null&&(e=ka());e!==
null;)d.push(e),/^[^"\\]/.test(c.charAt(b))?(e=c.charAt(b),b++):(e=null,j===0&&f('[^"\\\\]')),e===null&&(e=ka());d!==null?(c.substr(b,3)==='"""'?(e='"""',b+=3):(e=null,j===0&&f('"\\"\\"\\""')),e!==null?a=[a,d,e]:(a=null,b=i)):(a=null,b=i)}else a=null,b=i;a!==null&&(a=ba(a[1]));a===null&&(b=g);j--;j===0&&a===null&&f("[142] STRING_LITERAL_LONG2");return a}function ka(){var a,d,e;j++;e=b;c.charCodeAt(b)===92?(a="\\",b++):(a=null,j===0&&f('"\\\\"'));a!==null?(/^[tbnrf"']/.test(c.charAt(b))?(d=c.charAt(b),
b++):(d=null,j===0&&f("[tbnrf\"']")),d!==null?a=[a,d]:(a=null,b=e)):(a=null,b=e);j--;j===0&&a===null&&f("[143] ECHAR");return a}function ra(){var a,d,e,g,i;j++;i=g=b;c.charCodeAt(b)===40?(a="(",b++):(a=null,j===0&&f('"("'));if(a!==null){d=[];for(e=o();e!==null;)d.push(e),e=o();d!==null?(c.charCodeAt(b)===41?(e=")",b++):(e=null,j===0&&f('")"')),e!==null?a=[a,d,e]:(a=null,b=i)):(a=null,b=i)}else a=null,b=i;a!==null&&(a={token:"triplesnodecollection",triplesContext:[],chainSubject:[{token:"uri",value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}]});
a===null&&(b=g);j--;j===0&&a===null&&f("[144] NIL");return a}function o(){var a,d;j++;/^[ ]/.test(c.charAt(b))?(a=c.charAt(b),b++):(a=null,j===0&&f("[ ]"));a===null&&(/^[\t]/.test(c.charAt(b))?(a=c.charAt(b),b++):(a=null,j===0&&f("[\\t]")),a===null&&(/^[\r]/.test(c.charAt(b))?(a=c.charAt(b),b++):(a=null,j===0&&f("[\\r]")),a===null&&(/^[\n]/.test(c.charAt(b))?(a=c.charAt(b),b++):(a=null,j===0&&f("[\\n]")),a===null&&(d=b,a=yc(),a===null&&(b=d)))));j--;j===0&&a===null&&f("[145] WS");return a}function yc(){var a,
d,e,g,i;j++;i=g=b;c.charCodeAt(b)===35?(a="#",b++):(a=null,j===0&&f('"#"'));if(a!==null){d=[];/^[^\n\r]/.test(c.charAt(b))?(e=c.charAt(b),b++):(e=null,j===0&&f("[^\\n\\r]"));for(;e!==null;)d.push(e),/^[^\n\r]/.test(c.charAt(b))?(e=c.charAt(b),b++):(e=null,j===0&&f("[^\\n\\r]"));d!==null?a=[a,d]:(a=null,b=i)}else a=null,b=i;a!==null&&(a={token:"comment",value:a[1].join("")});a===null&&(b=g);j--;j===0&&a===null&&f(" COMMENT");return a}function xc(){var a,d,e,g;j++;g=b;c.charCodeAt(b)===91?(a="[",b++):
(a=null,j===0&&f('"["'));if(a!==null){d=[];for(e=o();e!==null;)d.push(e),e=o();d!==null?(c.charCodeAt(b)===93?(e="]",b++):(e=null,j===0&&f('"]"')),e!==null?a=[a,d,e]:(a=null,b=g)):(a=null,b=g)}else a=null,b=g;j--;j===0&&a===null&&f("[146] ANON");return a}function Ab(){var a;j++;/^[A-Z]/.test(c.charAt(b))?(a=c.charAt(b),b++):(a=null,j===0&&f("[A-Z]"));a===null&&(/^[a-z]/.test(c.charAt(b))?(a=c.charAt(b),b++):(a=null,j===0&&f("[a-z]")),a===null&&(/^[\xC0-\xD6]/.test(c.charAt(b))?(a=c.charAt(b),b++):
(a=null,j===0&&f("[\\xC0-\\xD6]")),a===null&&(/^[\xD8-\xF6]/.test(c.charAt(b))?(a=c.charAt(b),b++):(a=null,j===0&&f("[\\xD8-\\xF6]")),a===null&&(/^[\xF8-\u02FF]/.test(c.charAt(b))?(a=c.charAt(b),b++):(a=null,j===0&&f("[\\xF8-\\u02FF]")),a===null&&(/^[\u0370-\u037D]/.test(c.charAt(b))?(a=c.charAt(b),b++):(a=null,j===0&&f("[\\u0370-\\u037D]")),a===null&&(/^[\u037F-\u1FFF]/.test(c.charAt(b))?(a=c.charAt(b),b++):(a=null,j===0&&f("[\\u037F-\\u1FFF]")),a===null&&(/^[\u200C-\u200D]/.test(c.charAt(b))?(a=
c.charAt(b),b++):(a=null,j===0&&f("[\\u200C-\\u200D]")),a===null&&(/^[\u2070-\u218F]/.test(c.charAt(b))?(a=c.charAt(b),b++):(a=null,j===0&&f("[\\u2070-\\u218F]")),a===null&&(/^[\u2C00-\u2FEF]/.test(c.charAt(b))?(a=c.charAt(b),b++):(a=null,j===0&&f("[\\u2C00-\\u2FEF]")),a===null&&(/^[\u3001-\uD7FF]/.test(c.charAt(b))?(a=c.charAt(b),b++):(a=null,j===0&&f("[\\u3001-\\uD7FF]")),a===null&&(/^[\uF900-\uFDCF]/.test(c.charAt(b))?(a=c.charAt(b),b++):(a=null,j===0&&f("[\\uF900-\\uFDCF]")),a===null&&(/^[\uFDF0-\uFFFD]/.test(c.charAt(b))?
(a=c.charAt(b),b++):(a=null,j===0&&f("[\\uFDF0-\\uFFFD]")),a===null&&(/^[\u1000-\uEFFF]/.test(c.charAt(b))?(a=c.charAt(b),b++):(a=null,j===0&&f("[\\u1000-\\uEFFF]")))))))))))))));j--;j===0&&a===null&&f("[147] PN_CHARS_BASE");return a}function Da(){var a;j++;a=Ab();a===null&&(c.charCodeAt(b)===95?(a="_",b++):(a=null,j===0&&f('"_"')));j--;j===0&&a===null&&f("[148] PN_CHARS_U");return a}function eb(){var a,d,e,g,i;j++;i=g=b;a=Da();a===null&&(/^[0-9]/.test(c.charAt(b))?(a=c.charAt(b),b++):(a=null,j===
0&&f("[0-9]")));if(a!==null){d=[];e=Da();e===null&&(/^[0-9]/.test(c.charAt(b))?(e=c.charAt(b),b++):(e=null,j===0&&f("[0-9]")),e===null&&(/^[\xB7]/.test(c.charAt(b))?(e=c.charAt(b),b++):(e=null,j===0&&f("[\\xB7]")),e===null&&(/^[\u0300-\u036F]/.test(c.charAt(b))?(e=c.charAt(b),b++):(e=null,j===0&&f("[\\u0300-\\u036F]")),e===null&&(/^[\u203F-\u2040]/.test(c.charAt(b))?(e=c.charAt(b),b++):(e=null,j===0&&f("[\\u203F-\\u2040]"))))));for(;e!==null;)d.push(e),e=Da(),e===null&&(/^[0-9]/.test(c.charAt(b))?
(e=c.charAt(b),b++):(e=null,j===0&&f("[0-9]")),e===null&&(/^[\xB7]/.test(c.charAt(b))?(e=c.charAt(b),b++):(e=null,j===0&&f("[\\xB7]")),e===null&&(/^[\u0300-\u036F]/.test(c.charAt(b))?(e=c.charAt(b),b++):(e=null,j===0&&f("[\\u0300-\\u036F]")),e===null&&(/^[\u203F-\u2040]/.test(c.charAt(b))?(e=c.charAt(b),b++):(e=null,j===0&&f("[\\u203F-\\u2040]"))))));d!==null?a=[a,d]:(a=null,b=i)}else a=null,b=i;a!==null&&(a=a[0]+a[1].join(""));a===null&&(b=g);j--;j===0&&a===null&&f("[149] VARNAME");return a}function Na(){var a;
j++;a=Da();a===null&&(c.charCodeAt(b)===45?(a="-",b++):(a=null,j===0&&f('"-"')),a===null&&(/^[0-9]/.test(c.charAt(b))?(a=c.charAt(b),b++):(a=null,j===0&&f("[0-9]")),a===null&&(/^[\xB7]/.test(c.charAt(b))?(a=c.charAt(b),b++):(a=null,j===0&&f("[\\xB7]")),a===null&&(/^[\u0300-\u036F]/.test(c.charAt(b))?(a=c.charAt(b),b++):(a=null,j===0&&f("[\\u0300-\\u036F]")),a===null&&(/^[\u203F-\u2040]/.test(c.charAt(b))?(a=c.charAt(b),b++):(a=null,j===0&&f("[\\u203F-\\u2040]")))))));j--;j===0&&a===null&&f("[150] PN_CHARS");
return a}function mb(){var a,d,e,g,i;j++;i=g=b;a=Ab();if(a!==null){d=[];e=Na();e===null&&(c.charCodeAt(b)===46?(e=".",b++):(e=null,j===0&&f('"."')));for(;e!==null;)d.push(e),e=Na(),e===null&&(c.charCodeAt(b)===46?(e=".",b++):(e=null,j===0&&f('"."')));d!==null?a=[a,d]:(a=null,b=i)}else a=null,b=i;a!==null&&(a=function(a,b,c){if(c[c.length-1]==".")throw Error("Wrong PN_PREFIX, cannot finish with '.'");else return b+c.join("")}(g,a[0],a[1]));a===null&&(b=g);j--;j===0&&a===null&&f("[151] PN_PREFIX");
return a}function zb(){var a,d,e,g,i;j++;i=g=b;a=Da();a===null&&(/^[0-9]/.test(c.charAt(b))?(a=c.charAt(b),b++):(a=null,j===0&&f("[0-9]")));if(a!==null){d=[];for(e=Na();e!==null;)d.push(e),e=Na();d!==null?a=[a,d]:(a=null,b=i)}else a=null,b=i;a!==null&&(a=a[0]+a[1].join(""));a===null&&(b=g);j--;j===0&&a===null&&f("[152] PN_LOCAL");return a}function ib(a){a.sort();for(var b=null,c=[],d=0;d<a.length;d++)a[d]!==b&&(c.push(a[d]),b=a[d]);return c}function jb(){for(var a=1,d=1,e=!1,f=0;f<Math.max(b,Ia);f++){var g=
c.charAt(f);g==="\n"?(e||a++,d=1,e=!1):g==="\r"||g==="\u2028"||g==="\u2029"?(a++,d=1,e=!0):(d++,e=!1)}return{line:a,column:d}}var la={DOCUMENT:function(){var a;a=i();a===null&&(a=m());return a},SPARQL:i,Query:g,Prologue:h,BaseDecl:n,PrefixDecl:q,TURTLE:m,statement:r,directive:t,base:w,prefixID:C,SelectQuery:G,SubSelect:E,SelectClause:H,ConstructQuery:I,DescribeQuery:M,AskQuery:L,DatasetClause:O,DefaultGraphClause:P,NamedGraphClause:S,WhereClause:T,SolutionModifier:U,GroupClause:Z,GroupCondition:aa,
HavingClause:da,OrderClause:ea,OrderCondition:ca,LimitOffsetClauses:ma,LimitClause:ga,OffsetClause:ha,BindingsClause:oa,BindingValue:Ha,Update:na,Update1:pa,Load:ta,Clear:ua,Drop:va,Create:Ea,InsertData:Fa,DeleteData:Ga,DeleteWhere:Eb,Modify:Cb,DeleteClause:Db,InsertClause:gb,UsingClause:hb,GraphRef:Ua,GraphRefAll:ob,QuadPattern:qb,QuadData:pb,Quads:rb,QuadsNotTriples:sb,TriplesTemplate:ya,GroupGraphPattern:Y,GroupGraphPatternSub:Hb,TriplesBlock:xa,GraphPatternNotTriples:ub,OptionalGraphPattern:Kb,
GraphGraphPattern:Mb,ServiceGraphPattern:Nb,MinusGraphPattern:Lb,GroupOrUnionGraphPattern:Jb,Filter:Ob,Constraint:Ja,FunctionCall:nb,ArgList:vb,ExpressionList:za,ConstructTemplate:Gb,ConstructTriples:wb,TriplesSameSubject:tb,PropertyListNotEmpty:Ka,PropertyList:Pb,ObjectList:sa,Verb:Xa,TriplesSameSubjectPath:Ib,PropertyListNotEmptyPath:Qb,PropertyListPath:Rb,VerbPath:Ya,PathAlternative:xb,PathSequence:Za,PathElt:yb,PathEltOrInverse:$a,PathMod:Tb,PathPrimary:Sb,PathNegatedPropertySet:Ub,PathOneInPropertySet:La,
TriplesNode:Wa,BlankNodePropertyList:Wb,Collection:Vb,GraphNode:Aa,VarOrTerm:Va,VarOrIRIref:qa,Var:V,GraphTerm:Xb,ConditionalOrExpression:N,ConditionalAndExpression:ab,RelationalExpression:bb,AdditiveExpression:X,MultiplicativeExpression:Ba,UnaryExpression:fa,PrimaryExpression:Ma,BrackettedExpression:Qa,BuiltInCall:Pa,RegexExpression:dc,ExistsFunc:ec,NotExistsFunc:fc,Aggregate:cc,IRIrefOrFunction:bc,RDFLiteral:Ra,NumericLiteral:Sa,NumericLiteralUnsigned:ic,NumericLiteralPositive:jc,NumericLiteralNegative:Ca,
BooleanLiteral:Ta,String:gc,IRIref:W,PrefixedName:uc,BlankNode:ac,IRI_REF:wa,PNAME_NS:Oa,PNAME_LN:vc,BLANK_NODE_LABEL:wc,VAR1:Yb,VAR2:Zb,VAR3:$b,LANGTAG:hc,INTEGER:ia,DECIMAL:db,DOUBLE:cb,INTEGER_POSITIVE:mc,DECIMAL_POSITIVE:lc,DOUBLE_POSITIVE:kc,INTEGER_NEGATIVE:pc,DECIMAL_NEGATIVE:oc,DOUBLE_NEGATIVE:nc,EXPONENT:fb,STRING_LITERAL1:sc,STRING_LITERAL2:tc,STRING_LITERAL_LONG1:qc,STRING_LITERAL_LONG2:rc,ECHAR:ka,NIL:ra,WS:o,COMMENT:yc,ANON:xc,PN_CHARS_BASE:Ab,PN_CHARS_U:Da,VARNAME:eb,PN_CHARS:Na,PN_PREFIX:mb,
PN_LOCAL:zb};if(d!==void 0){if(la[d]===void 0)throw Error("Invalid rule name: "+a(d)+".");}else d="DOCUMENT";var b=0,j=0,Ia=0,lb=[],ba=function(a){for(var b="",c=0;c<a.length;c++)b+=typeof a[c]==="string"?a[c]:a[c].join("");return b},ja=0,Fb=function(a){for(var b="",c=0;c<a.length;c++)b+=a[c];return b.toUpperCase()},la=la[d]();if(la===null||b!==c.length){var la=Math.max(b,Ia),kb=la<c.length?c.charAt(la):null,zc=jb();throw new this.SyntaxError(ib(lb),kb,la,zc.line,zc.column);}return la},toSource:function(){return this._source},
SyntaxError:function(c,d,f,i,g){this.name="SyntaxError";this.expected=c;this.found=d;this.message=function(c,d){var e,f;switch(c.length){case 0:e="end of input";break;case 1:e=c[0];break;default:e=c.slice(0,c.length-1).join(", ")+" or "+c[c.length-1]}f=d?a(d):"end of input";return"Expected "+e+" but "+f+" found."}(c,d);this.offset=f;this.line=i;this.column=g}};d.SyntaxError.prototype=Error.prototype;return d}();var r={defaultContext:{rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",
owl:"http://www.w3.org/2002/07/owl#",xsd:"http://www.w3.org/2001/XMLSchema#",dcterms:"http://purl.org/dc/terms/",foaf:"http://xmlns.com/foaf/0.1/",cal:"http://www.w3.org/2002/12/cal/ical#",vcard:"http://www.w3.org/2006/vcard/ns# ",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",cc:"http://creativecommons.org/ns#",sioc:"http://rdfs.org/sioc/ns#",doap:"http://usefulinc.com/ns/doap#",com:"http://purl.org/commerce#",ps:"http://purl.org/payswarm#",gr:"http://purl.org/goodrelations/v1#",sig:"http://purl.org/signature#",
ccard:"http://purl.org/commerce/creditcard#"},UrisMap:function(){this.defaultNs="";this.interfaceProperties=["get","remove","set","setDefault","addAll","resolve","shrink"]}};r.UrisMap.prototype.values=function(){var a={},d;for(d in this)!w.include(this.interfaceProperties,d)&&typeof this[d]!=="function"&&d!=="defaultNs"&&d!=="interfaceProperties"&&(a[d]=this[d]);return a};r.UrisMap.prototype.get=function(a){if(a.indexOf(" ")!=-1)throw"Prefix must not contain any whitespaces";return this[a]};r.UrisMap.prototype.remove=
function(a){if(a.indexOf(" ")!=-1)throw"Prefix must not contain any whitespaces";delete this[a];return null};r.UrisMap.prototype.set=function(a,d){if(a.indexOf(" ")!=-1)throw"Prefix must not contain any whitespaces";this[a]=d};r.UrisMap.prototype.setDefault=function(a){this.defaultNs=a};r.UrisMap.prototype.addAll=function(a,d){for(var c in a)w.include(this.interfaceProperties,c)||(this[c]!=null?d===!0&&(this[c]=a[c]):this[c]=a[c]);return this};r.UrisMap.prototype.resolve=function(a){var d=a.split(":"),
a=d[0],d=d[1];return a===""?this.defaultNs==null?null:this.defaultNs+d:this[a]!=null?this[a]+d:null};r.UrisMap.prototype.shrink=function(a){for(var d in this){var c=this[d];if(a.indexOf(c)===0&&c!==""&&d!="defaultNs")return a=a.split(c)[1],d+":"+a}return a};r.Profile=function(){this.prefixes=new r.UrisMap;this.terms=new r.UrisMap};r.Profile.prototype.importProfile=function(a,d){this.prefixes.addAll(a.prefixes,d);this.terms.addAll(a.terms,d)};r.Profile.prototype.resolve=function(a){return a.indexOf(":")!=
-1?this.prefixes.resolve(a):this.terms[a]!=null?this.terms.resolve(a):null};r.Profile.prototype.setDefaultPrefix=function(a){this.prefixes.setDefault(a)};r.Profile.prototype.setDefaultVocabulary=function(a){this.terms.setDefault(a)};r.Profile.prototype.setPrefix=function(a,d){this.prefixes.set(a,d)};r.Profile.prototype.setTerm=function(a,d){this.terms.set(a,d)};r.RDFEnvironment=function(){this.blankNodeCounter=0;var a=this;this.filters={s:function(a){return function(d){return d.subject.equals(a)}},
p:function(a){return function(d){return d.predicate.equals(a)}},o:function(a){return function(d){return d.object.equals(a)}},sp:function(a,d){return function(f){return f.subject.equals(a)&&f.predicate.equals(d)}},so:function(a,d){return function(f){return f.subject.equals(a)&&f.object.equals(d)}},po:function(a,d){return function(f){return f.predicate.equals(a)&&f.object.equals(d)}},spo:function(a,d,f){return function(i){return i.subject.equals(a)&&i.predicate.equals(d)&&i.object.equals(f)}},describes:function(a){return function(d){return d.subject.equals(a)||
d.object.equals(a)}},type:function(c){var d=a.resolve("rdf:type");return function(a){return a.predicate.equals(d)&&a.object.equals(c)}}};for(var d in r.defaultContext)this.prefixes.set(d,r.defaultContext[d])};w["extends"](r.Profile,r.RDFEnvironment);r.RDFEnvironment.prototype.createBlankNode=function(){var a=new r.BlankNode(this.blankNodeCounter);this.blankNodeCounter++;return a};r.RDFEnvironment.prototype.createNamedNode=function(a){var d=this.resolve(a);return d!=null?new r.NamedNode(d):new r.NamedNode(a)};
r.RDFEnvironment.prototype.createLiteral=function(a,d,c){return c!=null?new r.Literal(a,d,c.toString()):new r.Literal(a,d,c)};r.RDFEnvironment.prototype.createTriple=function(a,d,c){return new r.Triple(a,d,c)};r.RDFEnvironment.prototype.createGraph=function(a){var d=new r.Graph;if(a!=null)for(var c=0;c<a.length;c++)d.add(a[c]);return d};r.RDFEnvironment.prototype.createAction=function(a,d){return function(c){return a(c)?d(c):c}};r.RDFEnvironment.prototype.createProfile=function(a){return a===!0?new r.RDFEnvironment.Profile:
(a=new r.RDFEnvironment.Profile,a.importProfile(this),a)};r.RDFEnvironment.prototype.createTermMap=function(a){if(a===!0)return new r.UrisMap;else{var a=this.terms.values(),d=new r.UrisMap,c;for(c in a)d[c]=a[c];return d}};r.RDFEnvironment.prototype.createPrefixMap=function(a){if(a===!0)return new r.UrisMap;else{var a=this.prefixes.values(),d=new r.UrisMap,c;for(c in a)d[c]=a[c];return d}};r.RDFNode=function(a){this.interfaceName=a;this.attributes=["interfaceName","nominalValue"]};r.RDFNode.prototype.equals=
function(a){if(a.interfaceName==null)return this.valueOf()==a;else{for(var d in this.attributes){var c=this.attributes[d];if(this[c]!=a[c])return!1}return!0}};r.BlankNode=function(a){r.RDFNode.call(this,"BlankNode");this.nominalValue="_:"+a;this.bnodeId=a};w["extends"](r.RDFNode,r.BlankNode);r.BlankNode.prototype.toString=function(){return this.nominalValue};r.BlankNode.prototype.toNT=function(){return this.nominalValue};r.BlankNode.prototype.valueOf=function(){return this.nominalValue};r.Literal=
function(a,d,c){r.RDFNode.call(this,"Literal");this.nominalValue=a;if(d!=null)this.language=d;else if(c!=null)this.datatype=c};w["extends"](r.RDFNode,r.Literal);r.Literal.prototype.toString=function(){var a='"'+this.nominalValue+'"';if(this.language!=null)a=a+"@"+this.language;else if(this.datatype!=null||this.type)a=a+"^^<"+(this.datatype||this.type)+">";return a};r.Literal.prototype.toNT=function(){return this.toString()};r.Literal.prototype.valueOf=function(){return h.effectiveTypeValue({token:"literal",
type:this.type||this.datatype,value:this.nominalValue,language:this.language})};r.NamedNode=function(a){r.RDFNode.call(this,"NamedNode");this.nominalValue=a.value!=null?a.value:a};w["extends"](r.RDFNode,r.NamedNode);r.NamedNode.prototype.toString=function(){return this.nominalValue};r.NamedNode.prototype.toNT=function(){return"<"+this.toString()+">"};r.NamedNode.prototype.valueOf=function(){return this.nominalValue};r.Triple=function(a,d,c){this.subject=a;this.predicate=d;this.object=c};r.Triple.prototype.equals=
function(a){return this.subject.equals(a.subject)&&this.predicate.equals(a.predicate)&&this.object.equals(a.object)};r.Triple.prototype.toString=function(){return this.subject.toNT()+" "+this.predicate.toNT()+" "+this.object.toNT()+" . \r\n"};r.Graph=function(){this.triples=[];this.duplicates={};this.actions=[];this.length=0};r.Graph.prototype.add=function(a){for(var d=0;d<this.actions.length;d++)a=this.actions[d](a);d=a.subject.toString()+a.predicate.toString()+a.object.toString();this.duplicates[d]||
(this.duplicates[d]=!0,this.triples.push(a));this.length=this.triples.length;return this};r.Graph.prototype.addAction=function(a,d){this.actions.push(a);if(d==!0)for(var c=0;c<this.triples.length;c++)this.triples[c]=a(this.triples[c]);return this};r.Graph.prototype.addAll=function(a){for(var a=a.toArray(),d=0;d<a.length;d++)this.add(a[d]);this.length=this.triples.length;return this};r.Graph.prototype.remove=function(a){for(var d=null,c=0;c<this.triples.length;c++)if(this.triples[c].equals(a)){delete this.duplicates[a.subject.toString()+
a.predicate.toString()+a.object.toString()];d=c;break}d!=null&&this.triples.splice(d,1);this.length=this.triples.length;return this};r.Graph.prototype.toArray=function(){return this.triples};r.Graph.prototype.some=function(a){for(var d=0;d<this.triples.length;d++)if(a(this.triples[d],this)===!0)return!0;return!1};r.Graph.prototype.every=function(a){for(var d=0;d<this.triples.length;d++)if(a(this.triples[d],this)===!1)return!1;return!0};r.Graph.prototype.filter=function(a){for(var d=new r.Graph,c=
0;c<this.triples.length;c++)a(this.triples[c],this)===!0&&d.add(this.triples[c]);return d};r.Graph.prototype.forEach=function(a){for(var d=0;d<this.triples.length;d++)a(this.triples[d],this)};r.Graph.prototype.merge=function(){for(var a=new r.Graph,d=0;d<this.triples.length;d++)a.add(this.triples[d]);return a};r.Graph.prototype.match=function(a,d,c,e){for(var f=new r.Graph,i=0,g=0;g<this.triples.length;g++){var h=this.triples[g];if(a==null||h.subject.equals(a))if(d==null||h.predicate.equals(d))if(c==
null||h.object.equals(c))if(e==null||i<e)i++,f.add(h);else break}return f};r.Graph.prototype.removeMatches=function(a,d,c){for(var e=[],f=0;f<this.triples.length;f++){var i=this.triples[f];if(a==null||i.subject.equals(a))if(d==null||i.predicate.equals(d))(c==null||i.object.equals(c))&&e.push(i)}for(f=0;f<e.length;f++)this.remove(e[f]);return this};r.Graph.prototype.toNT=function(){var a="";this.forEach(function(d){a+=d.toString()});return a};r.buildRDFResource=function(a,d,c,e){return a.token==="blank"?
r.buildBlankNode(a,d,c,e):a.token==="literal"?r.buildLiteral(a,d,c,e):a.token==="uri"?r.buildNamedNode(a,d,c,e):a.token==="var"?(a=d[a.value],a!=null?r.buildRDFResource(a,d,c,e):null):null};r.buildBlankNode=function(a){if(a.valuetmp!=null)a.value=a.valuetmp;if(a.value.indexOf("_:")===0)a.value=a.value.split("_:")[1];return new r.BlankNode(a.value)};r.buildLiteral=function(a){return new r.Literal(a.value,a.lang,a.type)};r.buildNamedNode=function(a,d,c,e){if(a.value==null&&a.prefix!=null)d=c.resolveNsInEnvironment(a.prefix,
e),a.value=d+a.suffix;return new r.NamedNode(a)};r.rdf=new r.RDFEnvironment;var h={checkFilters:function(a,d,c,e,f,i){var g=a.filter,l=[];if(g==null||a.length!=null)return d;for(a=0;a<g.length;a++){for(var d=h.run(g[a].value,d,c,e,f,i),n=[],q=0;q<d.length;q++)d[q].__nullify__!=null?l.push(d[q]):n.push(d[q]);d=n}return d.concat(l)}};h.boundVars=function(a){if(a.expressionType!=null){var d=a.expressionType;if(d=="relationalexpression")return d=a.op2,h.boundVars(a.op1)+h.boundVars(d);else if(d=="conditionalor"||
d=="conditionaland"){for(var c=[],d=0;d<a.operands;d++)c=c.concat(h.boundVars(a.operands[d]));return c}else if(d=="builtincall")if(a.args==null)return[];else{c=[];for(d=0;d<a.args.length;d++)c=c.concat(h.boundVars(a.args[d]));return c}else if(d=="multiplicativeexpression"){c=h.boundVars(a.factor);for(d=0;d<a.factors.length;d++)c=c.concat(h.boundVars(a.factors[d].expression));return c}else if(d=="additiveexpression"){c=h.boundVars(a.summand);for(d=0;d<a.summands.length;d++)c=c.concat(h.boundVars(a.summands[d].expression));
return c}else if(d=="regex")return c=h.boundVars(a.expression1),c.concat(h.boundVars(a.expression2));else if(d=="unaryexpression")return h.boundVars(a.expression);else if(d=="atomic")return a.primaryexpression=="var"?[a.value]:[]}else throw console.log("ERROR"),console.log(a),"Cannot find bound expressions in a no expression token";};h.run=function(a,d,c,e,f,i){for(var g=i.copyDenormalizedBindings(d,f.outCache),l=[],n=0;n<d.length;n++){var q=h.runFilter(a,g[n],i,e,f),q=h.ebv(q);h.isEbvError(q)?c&&
(q={__nullify__:!0,bindings:d[n]},l.push(q)):q===!0?l.push(d[n]):c&&(q={__nullify__:!0,bindings:d[n]},l.push(q))}return l};h.collect=function(a,d,c,e,f){for(var i=f.copyDenormalizedBindings(d,e.outCache),g=[],l=0;l<i.length;l++){var n=h.runFilter(a,i[l],f,c,e);g.push({binding:d[l],value:n})}return g};h.runDistinct=function(){};h.runAggregator=function(a,d,c,e,f){if(d==null||d.length===0)return h.ebvError();else if(a.token==="variable"&&a.kind=="var")return d[0][a.value.value];else if(a.token==="variable"&&
a.kind==="aliased")if(a.expression.expressionType==="atomic"&&a.expression.primaryexpression==="var")return d[0][a.expression.value.value];else if(a.expression.expressionType==="aggregate")if(a.expression.aggregateType==="max"){for(var i=null,g=0;g<d.length;g++){var l=d[g],l=h.runFilter(a.expression.expression,l,c,e,f);h.isEbvError(l)||(i===null?i=l:h.runLtFunction(i,l).value===!0&&(i=l))}return i===null?h.ebvError():i}else if(a.expression.aggregateType==="min"){i=null;for(g=0;g<d.length;g++)l=d[g],
l=h.runFilter(a.expression.expression,l,c,e,f),h.isEbvError(l)||(i===null?i=l:h.runGtFunction(i,l).value===!0&&(i=l));return i===null?h.ebvError():i}else if(a.expression.aggregateType==="count"){var i={},n=0;if(a.expression.expression==="*")if(a.expression.distinct!=null&&a.expression.distinct!="")for(g=0;g<d.length;g++){var l=d[g],q=w.hashTerm(l);i[q]==null&&(i[q]=!0,n++)}else n=d.length;else for(g=0;g<d.length;g++)l=d[g],l=h.runFilter(a.expression.expression,l,c,e,f),h.isEbvError(l)||(a.expression.distinct!=
null&&a.expression.distinct!=""?(q=w.hashTerm(l),i[q]==null&&(i[q]=!0,n++)):n++);return{token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:""+n}}else if(a.expression.aggregateType==="avg"){for(var i={},m={token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:"0"},g=n=0;g<d.length;g++)l=d[g],l=h.runFilter(a.expression.expression,l,c,e,f),h.isEbvError(l)||(a.expression.distinct!=null&&a.expression.distinct!=""?(q=w.hashTerm(l),i[q]==null&&(i[q]=!0,h.isNumeric(l)&&
(m=h.runSumFunction(m,l),n++))):h.isNumeric(l)&&(m=h.runSumFunction(m,l),n++));a=h.runDivFunction(m,{token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:""+n});a.value=""+a.value;return a}else if(a.expression.aggregateType==="sum"){i={};m={token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:"0"};for(g=0;g<d.length;g++)l=d[g],l=h.runFilter(a.expression.expression,l,c,e,f),h.isEbvError(l)||(a.expression.distinct!=null&&a.expression.distinct!=""?(q=w.hashTerm(l),i[q]==
null&&(i[q]=!0,h.isNumeric(l)&&(m=h.runSumFunction(m,l)))):h.isNumeric(l)&&(m=h.runSumFunction(m,l)));m.value=""+m.value;return m}else return l=h.runFilter(aggregate.expression,d[0],e,{blanks:{},outCache:{}})};h.runFilter=function(a,d,c,e,f){if(a.expressionType!=null){var i=a.expressionType;if(i=="relationalexpression"){var i=h.runFilter(a.op1,d,c,e,f),g=h.runFilter(a.op2,d,c,e,f);return h.runRelationalFilter(a,i,g,d,c,e,f)}else if(i=="conditionalor")return h.runOrFunction(a,d,c,e,f);else if(i=="conditionaland")return h.runAndFunction(a,
d,c,e,f);else if(i=="additiveexpression")return h.runAddition(a.summand,a.summands,d,c,e,f);else if(i=="builtincall")return h.runBuiltInCall(a.builtincall,a.args,d,c,e,f);else if(i=="multiplicativeexpression")return h.runMultiplication(a.factor,a.factors,d,c,e,f);else if(i=="unaryexpression")return h.runUnaryExpression(a.unaryexpression,a.expression,d,c,e,f);else if(i=="irireforfunction")return h.runIriRefOrFunction(a.iriref,a.args,d,c,e,f);else if(i=="regex")return h.runRegex(a.text,a.pattern,a.flags,
d,c,e,f);else if(i=="custom")return h.runBuiltInCall(a.name,a.args,d,c,e,f);else if(i=="atomic")if(a.primaryexpression=="var")return d[a.value.value];else{if(typeof a.value=="object"&&!(a.value.type==null||typeof a.value.type!="object"))a.value.type=w.lexicalFormBaseUri(a.value.type,f);return a.value}else throw"Unknown filter expression type";}else throw"Cannot find bound expressions in a no expression token";};h.isRDFTerm=function(a){return a==null?!1:a.token&&a.token=="literal"||a.token&&a.token==
"uri"||a.token&&a.token=="blank"?!0:!1};h.RDFTermEquality=function(a,d,c,e){return a.token==="literal"&&d.token==="literal"?a.lang==d.lang&&a.type==d.type&&a.value==d.value?!0:a.type!=null&&d.type!=null?h.ebvError():h.isSimpleLiteral(a)&&d.type!=null?h.ebvError():h.isSimpleLiteral(d)&&a.type!=null?h.ebvError():!1:a.token==="uri"&&d.token==="uri"?w.lexicalFormBaseUri(a,e)==w.lexicalFormBaseUri(d,e):a.token==="blank"&&d.token==="blank"?a.value==d.value:!1};h.isInteger=function(a){return a==null?!1:
a.token==="literal"?a.type=="http://www.w3.org/2001/XMLSchema#integer"||a.type=="http://www.w3.org/2001/XMLSchema#decimal"||a.type=="http://www.w3.org/2001/XMLSchema#double"||a.type=="http://www.w3.org/2001/XMLSchema#nonPositiveInteger"||a.type=="http://www.w3.org/2001/XMLSchema#negativeInteger"||a.type=="http://www.w3.org/2001/XMLSchema#long"||a.type=="http://www.w3.org/2001/XMLSchema#int"||a.type=="http://www.w3.org/2001/XMLSchema#short"||a.type=="http://www.w3.org/2001/XMLSchema#byte"||a.type==
"http://www.w3.org/2001/XMLSchema#nonNegativeInteger"||a.type=="http://www.w3.org/2001/XMLSchema#unsignedLong"||a.type=="http://www.w3.org/2001/XMLSchema#unsignedInt"||a.type=="http://www.w3.org/2001/XMLSchema#unsignedShort"||a.type=="http://www.w3.org/2001/XMLSchema#unsignedByte"||a.type=="http://www.w3.org/2001/XMLSchema#positiveInteger"?!0:!1:!1};h.isFloat=function(a){return a==null?!1:a.token==="literal"?a.type=="http://www.w3.org/2001/XMLSchema#float"?!0:!1:!1};h.isDecimal=function(a){return a==
null?!1:a.token==="literal"?a.type=="http://www.w3.org/2001/XMLSchema#decimal"?!0:!1:!1};h.isDouble=function(a){return a==null?!1:a.token==="literal"?a.type=="http://www.w3.org/2001/XMLSchema#double"?!0:!1:!1};h.isNumeric=function(a){return a==null?!1:a.token==="literal"?a.type=="http://www.w3.org/2001/XMLSchema#integer"||a.type=="http://www.w3.org/2001/XMLSchema#decimal"||a.type=="http://www.w3.org/2001/XMLSchema#float"||a.type=="http://www.w3.org/2001/XMLSchema#double"||a.type=="http://www.w3.org/2001/XMLSchema#nonPositiveInteger"||
a.type=="http://www.w3.org/2001/XMLSchema#negativeInteger"||a.type=="http://www.w3.org/2001/XMLSchema#long"||a.type=="http://www.w3.org/2001/XMLSchema#int"||a.type=="http://www.w3.org/2001/XMLSchema#short"||a.type=="http://www.w3.org/2001/XMLSchema#byte"||a.type=="http://www.w3.org/2001/XMLSchema#nonNegativeInteger"||a.type=="http://www.w3.org/2001/XMLSchema#unsignedLong"||a.type=="http://www.w3.org/2001/XMLSchema#unsignedInt"||a.type=="http://www.w3.org/2001/XMLSchema#unsignedShort"||a.type=="http://www.w3.org/2001/XMLSchema#unsignedByte"||
a.type=="http://www.w3.org/2001/XMLSchema#positiveInteger"?!0:!1:!1};h.isSimpleLiteral=function(a){return a&&a.token=="literal"?a.type==null&&a.lang==null?!0:!1:!1};h.isXsdType=function(a,d){return d&&d.token=="literal"?d.type=="http://www.w3.org/2001/XMLSchema#"+a:!1};h.ebv=function(a){if(a==null||h.isEbvError(a))return h.ebvError();else if(a.token&&a.token==="literal")if(a.type=="http://www.w3.org/2001/XMLSchema#integer"||a.type=="http://www.w3.org/2001/XMLSchema#decimal"||a.type=="http://www.w3.org/2001/XMLSchema#double"||
a.type=="http://www.w3.org/2001/XMLSchema#nonPositiveInteger"||a.type=="http://www.w3.org/2001/XMLSchema#negativeInteger"||a.type=="http://www.w3.org/2001/XMLSchema#long"||a.type=="http://www.w3.org/2001/XMLSchema#int"||a.type=="http://www.w3.org/2001/XMLSchema#short"||a.type=="http://www.w3.org/2001/XMLSchema#byte"||a.type=="http://www.w3.org/2001/XMLSchema#nonNegativeInteger"||a.type=="http://www.w3.org/2001/XMLSchema#unsignedLong"||a.type=="http://www.w3.org/2001/XMLSchema#unsignedInt"||a.type==
"http://www.w3.org/2001/XMLSchema#unsignedShort"||a.type=="http://www.w3.org/2001/XMLSchema#unsignedByte"||a.type=="http://www.w3.org/2001/XMLSchema#positiveInteger"){var d=parseFloat(a.value);return isNaN(d)?!1:parseFloat(a.value)!=0}else return a.type==="http://www.w3.org/2001/XMLSchema#boolean"?a.value==="true"||a.value===!0||a.value==="True":a.type==="http://www.w3.org/2001/XMLSchema#string"?a.value!="":a.type==="http://www.w3.org/2001/XMLSchema#dateTime"?new Date(a.value)!=null:h.isEbvError(a)?
a:a.type==null?a.value!=""?!0:!1:h.ebvError();else return a.value===!0};h.effectiveBooleanValue=h.ebv;h.ebvTrue=function(){return{token:"literal",type:"http://www.w3.org/2001/XMLSchema#boolean",value:!0}};h.ebvFalse=function(){return{token:"literal",type:"http://www.w3.org/2001/XMLSchema#boolean",value:!1}};h.ebvError=function(){return{token:"literal",type:"https://github.com/antoniogarrote/js-tools/types#error",value:null}};h.isEbvError=function(a){return typeof a=="object"&&a!=null?a.type==="https://github.com/antoniogarrote/js-tools/types#error":
!1};h.ebvBoolean=function(a){return h.isEbvError(a)?a:a===!0?h.ebvTrue():h.ebvFalse()};h.runRelationalFilter=function(a,d,c,e,f,i,g){a=a.operator;if(a==="=")return h.runEqualityFunction(d,c,e,f,i,g);else if(a==="!="){d=h.runEqualityFunction(d,c,e,f,i,g);if(!h.isEbvError(d))d.value=!d.value;return d}else if(a==="<")return h.runLtFunction(d,c,e);else if(a===">")return h.runGtFunction(d,c,e);else if(a==="<=")return h.runLtEqFunction(d,c,e);else if(a===">=")return h.runGtEqFunction(d,c,e);else throw"Error applying relational filter, unknown operator";
};h.effectiveTypeValue=function(a){if(a.token=="literal")if(a.type=="http://www.w3.org/2001/XMLSchema#integer")return a=parseInt(a.value);else if(a.type=="http://www.w3.org/2001/XMLSchema#decimal")return a=parseFloat(a.value);else if(a.type=="http://www.w3.org/2001/XMLSchema#float")return a=parseFloat(a.value);else if(a.type=="http://www.w3.org/2001/XMLSchema#double")return a=parseFloat(a.value);else if(a.type=="http://www.w3.org/2001/XMLSchema#nonPositiveInteger")return a=parseFloat(a.value);else if(a.type==
"http://www.w3.org/2001/XMLSchema#negativeInteger")return a=parseInt(a.value);else if(a.type=="http://www.w3.org/2001/XMLSchema#long")return a=parseInt(a.value);else if(a.type=="http://www.w3.org/2001/XMLSchema#int")return a=parseInt(a.value);else if(a.type=="http://www.w3.org/2001/XMLSchema#short")return a=parseInt(a.value);else if(a.type=="http://www.w3.org/2001/XMLSchema#byte")return a=parseInt(a.value);else if(a.type=="http://www.w3.org/2001/XMLSchema#nonNegativeInteger")return a=parseInt(a.value);
else if(a.type=="http://www.w3.org/2001/XMLSchema#unsignedLong")return a=parseInt(a.value);else if(a.type=="http://www.w3.org/2001/XMLSchema#unsignedInt")return a=parseInt(a.value);else if(a.type=="http://www.w3.org/2001/XMLSchema#unsignedShort")return a=parseInt(a.value);else if(a.type=="http://www.w3.org/2001/XMLSchema#unsignedByte")return a=parseInt(a.value);else if(a.type=="http://www.w3.org/2001/XMLSchema#positiveInteger")return a=parseInt(a.value);else if(a.type=="http://www.w3.org/2001/XMLSchema#date"||
a.type=="http://www.w3.org/2001/XMLSchema#dateTime")try{return w.parseISO8601(a.value)}catch(d){return null}else return a.type=="http://www.w3.org/2001/XMLSchema#boolean"?a.value===!0||a.value==="true"||a.value==="1"||a.value===1||a.value===!0?!0:a.value===!1||a.value==="false"||a.value==="0"||a.value===0||a.value===!1?!1:void 0:a.type=="http://www.w3.org/2001/XMLSchema#string"?a.value===null||a.value===void 0?void 0:""+a.value:a.value;else throw console.log("not implemented yet"),console.log(a),
"value not supported in operations yet";};h.runOrFunction=function(a,d,c,e,f){for(var i=null,g=0;g<a.operands.length;g++){var l=h.runFilter(a.operands[g],d,c,e,f);h.isEbvError(l)==!1&&(l=h.ebv(l));i==null?i=l:h.isEbvError(l)?i=h.isEbvError(i)?h.ebvError():i===!0?!0:h.ebvError():l===!0?i=!0:h.isEbvError(i)&&(i=h.ebvError())}return h.ebvBoolean(i)};h.runAndFunction=function(a,d,c,e,f){for(var i=null,g=0;g<a.operands.length;g++){var l=h.runFilter(a.operands[g],d,c,e,f);h.isEbvError(l)==!1&&(l=h.ebv(l));
i==null?i=l:h.isEbvError(l)?i=h.isEbvError(i)?h.ebvError():i===!0?h.ebvError():!1:l===!0?h.isEbvError(i)&&(i=h.ebvError()):i=!1}return h.ebvBoolean(i)};h.runEqualityFunction=function(a,d,c,e,f,i){if(h.isEbvError(a)||h.isEbvError(d))return h.ebvError();if(h.isNumeric(a)&&h.isNumeric(d))return c=h.effectiveTypeValue(a),f=h.effectiveTypeValue(d),isNaN(c)||isNaN(f)?h.ebvBoolean(h.RDFTermEquality(a,d,e,i)):h.ebvBoolean(c==f);else if((h.isSimpleLiteral(a)||h.isXsdType("string",a))&&(h.isSimpleLiteral(d)||
h.isXsdType("string",d)))return h.ebvBoolean(h.effectiveTypeValue(a)==h.effectiveTypeValue(d));else if(h.isXsdType("boolean",a)&&h.isXsdType("boolean",d))return h.ebvBoolean(h.effectiveTypeValue(a)==h.effectiveTypeValue(d));else if((h.isXsdType("dateTime",a)||h.isXsdType("date",a))&&(h.isXsdType("dateTime",d)||h.isXsdType("date",d))){if(h.isXsdType("dateTime",a)&&h.isXsdType("date",d))return h.ebvFalse();if(h.isXsdType("date",a)&&h.isXsdType("dateTime",d))return h.ebvFalse();a=w.compareDateComponents(a.value,
d.value);return a!=null?a==0?h.ebvTrue():h.ebvFalse():h.ebvError()}else return h.isRDFTerm(a)&&h.isRDFTerm(d)?h.ebvBoolean(h.RDFTermEquality(a,d,e,i)):h.ebvFalse()};h.runGtFunction=function(a,d){if(h.isEbvError(a)||h.isEbvError(d))return h.ebvError();if(h.isNumeric(a)&&h.isNumeric(d))return h.ebvBoolean(h.effectiveTypeValue(a)>h.effectiveTypeValue(d));else if(h.isSimpleLiteral(a)&&h.isSimpleLiteral(d))return h.ebvBoolean(h.effectiveTypeValue(a)>h.effectiveTypeValue(d));else if(h.isXsdType("string",
a)&&h.isXsdType("string",d))return h.ebvBoolean(h.effectiveTypeValue(a)>h.effectiveTypeValue(d));else if(h.isXsdType("boolean",a)&&h.isXsdType("boolean",d))return h.ebvBoolean(h.effectiveTypeValue(a)>h.effectiveTypeValue(d));else if((h.isXsdType("dateTime",a)||h.isXsdType("date",a))&&(h.isXsdType("dateTime",d)||h.isXsdType("date",d))){if(h.isXsdType("dateTime",a)&&h.isXsdType("date",d))return h.ebvFalse();if(h.isXsdType("date",a)&&h.isXsdType("dateTime",d))return h.ebvFalse();var c=w.compareDateComponents(a.value,
d.value);return c!=null?c==1?h.ebvTrue():h.ebvFalse():h.ebvError()}else return h.ebvFalse()};h.runTotalGtFunction=function(a,d){return h.isEbvError(a)||h.isEbvError(d)?h.ebvError():h.isNumeric(a)&&h.isNumeric(d)||h.isSimpleLiteral(a)&&h.isSimpleLiteral(d)||h.isXsdType("string",a)&&h.isSimpleLiteral("string",d)||h.isXsdType("boolean",a)&&h.isSimpleLiteral("boolean",d)||h.isXsdType("dateTime",a)&&h.isSimpleLiteral("dateTime",d)?h.runGtFunction(a,d,[]):a.token&&a.token==="uri"&&d.token&&d.token==="uri"?
h.ebvBoolean(a.value>d.value):a.token&&a.token==="literal"&&d.token&&d.token==="literal"?h.ebvBoolean(""+a.value+a.type+a.lang>""+d.value+d.type+d.lang):a.token&&a.token==="blank"&&d.token&&d.token==="blank"?h.ebvBoolean(a.value>d.value):a.value&&d.value?h.ebvBoolean(a.value>d.value):h.ebvTrue()};h.runLtFunction=function(a,d){if(h.isEbvError(a)||h.isEbvError(d))return h.ebvError();if(h.isNumeric(a)&&h.isNumeric(d))return h.ebvBoolean(h.effectiveTypeValue(a)<h.effectiveTypeValue(d));else if(h.isSimpleLiteral(a)&&
h.isSimpleLiteral(d))return h.ebvBoolean(h.effectiveTypeValue(a)<h.effectiveTypeValue(d));else if(h.isXsdType("string",a)&&h.isXsdType("string",d))return h.ebvBoolean(h.effectiveTypeValue(a)<h.effectiveTypeValue(d));else if(h.isXsdType("boolean",a)&&h.isXsdType("boolean",d))return h.ebvBoolean(h.effectiveTypeValue(a)<h.effectiveTypeValue(d));else if((h.isXsdType("dateTime",a)||h.isXsdType("date",a))&&(h.isXsdType("dateTime",d)||h.isXsdType("date",d))){if(h.isXsdType("dateTime",a)&&h.isXsdType("date",
d))return h.ebvFalse();if(h.isXsdType("date",a)&&h.isXsdType("dateTime",d))return h.ebvFalse();var c=w.compareDateComponents(a.value,d.value);return c!=null?c==-1?h.ebvTrue():h.ebvFalse():h.ebvError()}else return h.ebvFalse()};h.runGtEqFunction=function(a,d){if(h.isEbvError(a)||h.isEbvError(d))return h.ebvError();if(h.isNumeric(a)&&h.isNumeric(d))return h.ebvBoolean(h.effectiveTypeValue(a)>=h.effectiveTypeValue(d));else if(h.isSimpleLiteral(a)&&h.isSimpleLiteral(d))return h.ebvBoolean(h.effectiveTypeValue(a)>=
h.effectiveTypeValue(d));else if(h.isXsdType("string",a)&&h.isXsdType("string",d))return h.ebvBoolean(h.effectiveTypeValue(a)>=h.effectiveTypeValue(d));else if(h.isXsdType("boolean",a)&&h.isXsdType("boolean",d))return h.ebvBoolean(h.effectiveTypeValue(a)>=h.effectiveTypeValue(d));else if((h.isXsdType("dateTime",a)||h.isXsdType("date",a))&&(h.isXsdType("dateTime",d)||h.isXsdType("date",d))){if(h.isXsdType("dateTime",a)&&h.isXsdType("date",d))return h.ebvFalse();if(h.isXsdType("date",a)&&h.isXsdType("dateTime",
d))return h.ebvFalse();var c=w.compareDateComponents(a.value,d.value);return c!=null?c!=-1?h.ebvTrue():h.ebvFalse():h.ebvError()}else return h.ebvFalse()};h.runLtEqFunction=function(a,d){if(h.isEbvError(a)||h.isEbvError(d))return h.ebvError();if(h.isNumeric(a)&&h.isNumeric(d))return h.ebvBoolean(h.effectiveTypeValue(a)<=h.effectiveTypeValue(d));else if(h.isSimpleLiteral(a)&&h.isSimpleLiteral(d))return h.ebvBoolean(h.effectiveTypeValue(a)<=h.effectiveTypeValue(d));else if(h.isXsdType("string",a)&&
h.isXsdType("string",d))return h.ebvBoolean(h.effectiveTypeValue(a)<=h.effectiveTypeValue(d));else if(h.isXsdType("boolean",a)&&h.isXsdType("boolean",d))return h.ebvBoolean(h.effectiveTypeValue(a)<=h.effectiveTypeValue(d));else if((h.isXsdType("dateTime",a)||h.isXsdType("date",a))&&(h.isXsdType("dateTime",d)||h.isXsdType("date",d))){if(h.isXsdType("dateTime",a)&&h.isXsdType("date",d))return h.ebvFalse();if(h.isXsdType("date",a)&&h.isXsdType("dateTime",d))return h.ebvFalse();var c=w.compareDateComponents(a.value,
d.value);return c!=null?c!=1?h.ebvTrue():h.ebvFalse():h.ebvError()}else return h.ebvFalse()};h.runAddition=function(a,d,c,e,f,i){var g=h.runFilter(a,c,e,f,i);if(h.isEbvError(g))return h.ebvError();a=g;if(h.isNumeric(g)){for(g=0;g<d.length;g++){var l=h.runFilter(d[g].expression,c,e,f,i);if(h.isNumeric(l))d[g].operator==="+"?a=h.runSumFunction(a,l):d[g].operator==="-"&&(a=h.runSubFunction(a,l));else return h.ebvFalse()}return a}else return h.ebvFalse()};h.runSumFunction=function(a,d){if(h.isEbvError(a)||
h.isEbvError(d))return h.ebvError();var c=h.effectiveTypeValue(a)+h.effectiveTypeValue(d);return h.isDouble(a)||h.isDouble(d)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#double",value:c}:h.isFloat(a)||h.isFloat(d)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#float",value:c}:h.isDecimal(a)||h.isDecimal(d)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#decimal",value:c}:{token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:c}};h.runSubFunction=function(a,
d){if(h.isEbvError(a)||h.isEbvError(d))return h.ebvError();var c=h.effectiveTypeValue(a)-h.effectiveTypeValue(d);return h.isDouble(a)||h.isDouble(d)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#double",value:c}:h.isFloat(a)||h.isFloat(d)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#float",value:c}:h.isDecimal(a)||h.isDecimal(d)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#decimal",value:c}:{token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:c}};
h.runMultiplication=function(a,d,c,e,f,i){a=h.runFilter(a,c,e,f,i);if(h.isEbvError(a))return a;var g=a;if(h.isNumeric(a)){for(var l=0;l<d.length;l++){var n=h.runFilter(d[l].expression,c,e,f,i);if(h.isEbvError(n))return a;if(h.isNumeric(n))d[l].operator==="*"?g=h.runMulFunction(g,n):d[l].operator==="/"&&(g=h.runDivFunction(g,n));else return h.ebvFalse()}return g}else return h.ebvFalse()};h.runMulFunction=function(a,d){if(h.isEbvError(a)||h.isEbvError(d))return h.ebvError();var c=h.effectiveTypeValue(a)*
h.effectiveTypeValue(d);return h.isDouble(a)||h.isDouble(d)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#double",value:c}:h.isFloat(a)||h.isFloat(d)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#float",value:c}:h.isDecimal(a)||h.isDecimal(d)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#decimal",value:c}:{token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:c}};h.runDivFunction=function(a,d){if(h.isEbvError(a)||h.isEbvError(d))return h.ebvError();var c=
h.effectiveTypeValue(a)/h.effectiveTypeValue(d);return h.isDouble(a)||h.isDouble(d)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#double",value:c}:h.isFloat(a)||h.isFloat(d)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#float",value:c}:h.isDecimal(a)||h.isDecimal(d)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#decimal",value:c}:{token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:c}};h.runBuiltInCall=function(a,d,c,e,f,i){if(a==="notexists"||a==="exists"){var g=
JSON.parse(JSON.stringify(d[0])),g=e.abstractQueryTree.parseSelect({pattern:g},c),g=e.abstractQueryTree.bind(g.pattern,c),c=e.executeSelectUnit([{kind:"*"}],f,g,i);return a==="exists"?h.ebvBoolean(c.length!==0):h.ebvBoolean(c.length===0)}else{for(var g=[],l=0;l<d.length;l++)if(d[l].token==="var")g.push(d[l]);else{var n=h.runFilter(d[l],c,e,f,i);if(h.isEbvError(n))return n;g.push(n)}if(a==="str")return g[0].token==="literal"?{token:"literal",type:null,value:""+g[0].value}:g[0].token==="uri"?{token:"literal",
type:null,value:g[0].value}:h.ebvFalse();else if(a==="lang")return g[0].token==="literal"?g[0].lang!=null?{token:"literal",value:""+g[0].lang}:{token:"literal",value:""}:h.ebvError();else if(a==="datatype")return g[0].token==="literal"?(a=g[0],a.type!=null?typeof a.type==="string"?{token:"uri",value:a.type,prefix:null,suffix:null}:a.type:a.lang==null?{token:"uri",value:"http://www.w3.org/2001/XMLSchema#string",prefix:null,suffix:null}:h.ebvError()):h.ebvError();else if(a==="isliteral")return g[0].token===
"literal"?h.ebvTrue():h.ebvFalse();else if(a==="isblank")return g[0].token==="blank"?h.ebvTrue():h.ebvFalse();else if(a==="isuri"||a==="isiri")return g[0].token==="uri"?h.ebvTrue():h.ebvFalse();else if(a==="sameterm")return a=h.RDFTermEquality(g[0],g[1],e,i),h.isEbvError(a)&&(a=!1),h.ebvBoolean(a);else if(a==="langmatches")return a=g[0],c=g[1],a.token==="literal"&&c.token==="literal"?c.value==="*"&&a.value!=""?h.ebvTrue():h.ebvBoolean(a.value.toLowerCase().indexOf(c.value.toLowerCase())===0):h.ebvError();
else if(a==="bound")return a=g[0].value,a==null?h.ebvError():c[a]!=null?h.ebvTrue():h.ebvFalse();else if(e.customFns[a]!=null)return e.customFns[a](h,g);else throw"Builtin call "+a+" not implemented yet";}};h.runUnaryExpression=function(a,d,c,e,f,i){d=h.runFilter(d,c,e,f,i);if(h.isEbvError(d))return d;if(a==="!"){var g=h.ebv(d);return h.isEbvError(g)?h.ebvFalse():h.ebvBoolean(!g)}else if(a==="+")return h.isNumeric(d)?d:h.ebvError();else if(a==="-")if(h.isNumeric(d)){a={};for(g in d)a[g]=d[g];a.value=
-a.value;return a}else return h.ebvError()};h.runRegex=function(a,d,c,e,f,i,g){if(a!=null)a=h.runFilter(a,e,f,i,g);else return h.ebvError();if(d!=null)d=h.runFilter(d,e,f,i,g);else return h.ebvError();c!=null&&(c=h.runFilter(c,e,f,i,g));if(d!=null&&d.token==="literal"&&(c==null||c.token==="literal"))d=d.value,c=c==null?null:c.value;else return h.ebvError();if(a!=null&&a.token=="var")if(e[a.value]!=null)a=e[a.value];else return h.ebvError();else if(a!=null&&a.token==="literal")if(a.type==null||h.isXsdType("string",
a))a=a.value;else return h.ebvError();else return h.ebvError();return(c==null?RegExp(d):RegExp(d,c.toLowerCase())).exec(a)?h.ebvTrue():h.ebvFalse()};h.normalizeLiteralDatatype=function(a,d,c){if(!(a.value.type==null||typeof a.value.type!="object"))a.value.type=w.lexicalFormBaseUri(a.value.type,c);return a};h.runIriRefOrFunction=function(a,d,c,e,f,i){if(d==null)return a;else{for(var g=[],l=0;l<d.length;l++)g.push(h.runFilter(d[l],c,e,f,i));a=w.lexicalFormBaseUri(a,i);if(a=="http://www.w3.org/2001/XMLSchema#integer"||
a=="http://www.w3.org/2001/XMLSchema#decimal"||a=="http://www.w3.org/2001/XMLSchema#double"||a=="http://www.w3.org/2001/XMLSchema#nonPositiveInteger"||a=="http://www.w3.org/2001/XMLSchema#negativeInteger"||a=="http://www.w3.org/2001/XMLSchema#long"||a=="http://www.w3.org/2001/XMLSchema#int"||a=="http://www.w3.org/2001/XMLSchema#short"||a=="http://www.w3.org/2001/XMLSchema#byte"||a=="http://www.w3.org/2001/XMLSchema#nonNegativeInteger"||a=="http://www.w3.org/2001/XMLSchema#unsignedLong"||a=="http://www.w3.org/2001/XMLSchema#unsignedInt"||
a=="http://www.w3.org/2001/XMLSchema#unsignedShort"||a=="http://www.w3.org/2001/XMLSchema#unsignedByte"||a=="http://www.w3.org/2001/XMLSchema#positiveInteger")if(g=g[0],g.token==="literal")if(g=h.normalizeLiteralDatatype(g,e,i),g.type=="http://www.w3.org/2001/XMLSchema#integer"||g.type=="http://www.w3.org/2001/XMLSchema#decimal"||g.type=="http://www.w3.org/2001/XMLSchema#double"||g.type=="http://www.w3.org/2001/XMLSchema#nonPositiveInteger"||g.type=="http://www.w3.org/2001/XMLSchema#negativeInteger"||
g.type=="http://www.w3.org/2001/XMLSchema#long"||g.type=="http://www.w3.org/2001/XMLSchema#int"||g.type=="http://www.w3.org/2001/XMLSchema#short"||g.type=="http://www.w3.org/2001/XMLSchema#byte"||g.type=="http://www.w3.org/2001/XMLSchema#nonNegativeInteger"||g.type=="http://www.w3.org/2001/XMLSchema#unsignedLong"||g.type=="http://www.w3.org/2001/XMLSchema#unsignedInt"||g.type=="http://www.w3.org/2001/XMLSchema#unsignedShort"||g.type=="http://www.w3.org/2001/XMLSchema#unsignedByte"||g.type=="http://www.w3.org/2001/XMLSchema#positiveInteger")return g.type=
a,g;else if(g.type=="http://www.w3.org/2001/XMLSchema#boolean")return h.ebv(g)==!0?(g.type=a,g.value=1):(g.type=a,g.value=0),g;else if(g.type=="http://www.w3.org/2001/XMLSchema#float"||g.type=="http://www.w3.org/2001/XMLSchema#double")return g.type=a,g.value=parseInt(g.value),g;else if(g.type=="http://www.w3.org/2001/XMLSchema#string"||g.type==null){if(g.value.split(".").length>2)return h.ebvError();else if(g.value.split("-").length>2)return h.ebvError();else if(g.value.split("/").length>2)return h.ebvError();
else if(g.value.split("+").length>2)return h.ebvError();if(a=="http://www.w3.org/2001/XMLSchema#decimal"&&(g.value.indexOf("e")!=-1||g.value.indexOf("E")!=-1))return h.ebvError();if(a=="http://www.w3.org/2001/XMLSchema#int"||a=="http://www.w3.org/2001/XMLSchema#integer")if(g.value.indexOf("e")!=-1||g.value.indexOf("E")!=-1||g.value.indexOf(".")!=-1)return h.ebvError();try{return g.value=parseInt(parseFloat(g.value)),isNaN(g.value)?h.ebvError():(g.type=a,g)}catch(n){return h.ebvError()}}else return h.ebvError();
else return h.ebvError();else if(a=="http://www.w3.org/2001/XMLSchema#boolean")return g=g[0],g.token==="literal"&&g.type==null?g.value==="true"||g.value==="1"?h.ebvTrue():g.value==="false"||g.value==="0"?h.ebvFalse():h.ebvError():g.token==="literal"?h.isEbvError(g)?g:h.ebvBoolean(g):h.ebvError();else if(a=="http://www.w3.org/2001/XMLSchema#string")if(g=g[0],g.token==="literal")if(g=h.normalizeLiteralDatatype(g,e,i),g.type=="http://www.w3.org/2001/XMLSchema#integer"||g.type=="http://www.w3.org/2001/XMLSchema#decimal"||
g.type=="http://www.w3.org/2001/XMLSchema#double"||g.type=="http://www.w3.org/2001/XMLSchema#nonPositiveInteger"||g.type=="http://www.w3.org/2001/XMLSchema#negativeInteger"||g.type=="http://www.w3.org/2001/XMLSchema#long"||g.type=="http://www.w3.org/2001/XMLSchema#int"||g.type=="http://www.w3.org/2001/XMLSchema#short"||g.type=="http://www.w3.org/2001/XMLSchema#byte"||g.type=="http://www.w3.org/2001/XMLSchema#nonNegativeInteger"||g.type=="http://www.w3.org/2001/XMLSchema#unsignedLong"||g.type=="http://www.w3.org/2001/XMLSchema#unsignedInt"||
g.type=="http://www.w3.org/2001/XMLSchema#unsignedShort"||g.type=="http://www.w3.org/2001/XMLSchema#unsignedByte"||g.type=="http://www.w3.org/2001/XMLSchema#positiveInteger"||g.type=="http://www.w3.org/2001/XMLSchema#float")return g.type=a,g.value=""+g.value,g;else if(g.type=="http://www.w3.org/2001/XMLSchema#string")return g;else if(g.type=="http://www.w3.org/2001/XMLSchema#boolean")return h.ebv(g)?(g.type=a,g.value="true"):(g.type=a,g.value="false"),g;else if(g.type=="http://www.w3.org/2001/XMLSchema#dateTime"||
g.type=="http://www.w3.org/2001/XMLSchema#date"){g.type=a;if(typeof g.value!="string")g.value=w.iso8601(g.value);return g}else return g.type==null?(g.value=""+g.value,g.type=a,g):h.ebvError();else return g.token==="uri"?{token:"literal",value:w.lexicalFormBaseUri(g,i),type:a,lang:null}:h.ebvError();else if(a=="http://www.w3.org/2001/XMLSchema#dateTime"||a=="http://www.w3.org/2001/XMLSchema#date")if(g=g[0],g.type=="http://www.w3.org/2001/XMLSchema#dateTime"||g.type=="http://www.w3.org/2001/XMLSchema#date")return g;
else if(g.type=="http://www.w3.org/2001/XMLSchema#string"||g.type==null)try{return g.value=w.iso8601(w.parseStrictISO8601(g.value)),g.type=a,g}catch(q){return h.ebvError()}else return h.ebvError();else if(a=="http://www.w3.org/2001/XMLSchema#float")if(g=g[0],g.token==="literal")if(g=h.normalizeLiteralDatatype(g,e,i),g.type=="http://www.w3.org/2001/XMLSchema#decimal"||g.type=="http://www.w3.org/2001/XMLSchema#int")return g.type=a,g.value=parseFloat(g.value),g;else if(g.type=="http://www.w3.org/2001/XMLSchema#boolean")return h.ebv(g)==
!0?(g.type=a,g.value=1):(g.type=a,g.value=0),g;else if(g.type=="http://www.w3.org/2001/XMLSchema#float"||g.type=="http://www.w3.org/2001/XMLSchema#double")return g.type=a,g.value=parseFloat(g.value),g;else if(g.type=="http://www.w3.org/2001/XMLSchema#string")try{return g.value=parseFloat(g.value),isNaN(g.value)?h.ebvError():(g.type=a,g)}catch(m){return h.ebvError()}else if(g.type==null){if(g.value.split(".").length>2)return h.ebvError();else if(g.value.split("-").length>2)return h.ebvError();else if(g.value.split("/").length>
2)return h.ebvError();else if(g.value.split("+").length>2)return h.ebvError();try{return g.value=parseFloat(g.value),isNaN(g.value)?h.ebvError():(g.type=a,g)}catch(r){return h.ebvError()}}else return h.ebvError();else return h.ebvError();else return h.ebvError()}};var C={variablesInBGP:function(a){var d=a.variables;if(d)return d;var c=a.value||a,d=[],e;for(e in c)c[e]&&c[e].token==="var"?d.push(c[e].value):c[e]&&c[e].token==="blank"&&d.push("blank:"+c[e].value);return a.variables=d},connected:function(a,
d){for(var c="/"+a.vars.join("/")+"/",e=0;e<d.vars.length;e++)if(c.indexOf("/"+d.vars[e]+"/")!=-1)return!0;return!1},variablesIntersectionBGP:function(a,d){for(var c=C.variablesInBGP(a).sort(),e=C.variablesInBGP(d).sort(),f=0,i=0,g=[];f<c.length&&i<e.length;)c[f]===e[i]?(g.push(c[f]),f++,i++):c[f]<e[i]?f++:i++;return g},executeAndBGPsGroups:function(a){for(var d={},c={},e=0,f=0;f<a.length;f++){var i=a[f],g={},h={},n=[],q;for(q in i)q!="_cost"&&(i[q].token==="var"?n.push(i[q].value):i[q].token==="blank"&&
n.push(i[q].value));var m=!1,r={},t;for(t in c){for(var y=c[t],m=!1,w=0;w<n.length;w++)if(y.indexOf("/"+n[w]+"/")!=-1){m=!0;break}m?r[t]=!0:(g[t]=d[t],h[t]=c[t])}if(m){var m=[],w=y="",G;for(G in r)y+=G,m=m.concat(d[G]),w=c[G];w=w+n.join("/")+"/";m.push(i);g[y]=m;h[y]=w}else g[e]=[i],h[e]="/"+n.join("/")+"/",e++;d=g;c=h}a=[];for(e in d)a.push(d[e]);return a},intersectionSize:function(a,d){for(var c=d.i.split("_"),e=0;e<c.length;e++)if(c[e]!=""&&a.i.indexOf("_"+c[e]+"_")!=-1)return 1;return 0},createJoinTree:function(a,
d){for(var c="/"+a.vars.join("/")+"/",e=a.vars.concat([]),f=[],i=0;i<d.vars.length;i++)c.indexOf("/"+d.vars[i]+"/")!=-1?d.vars[i].indexOf("_:")==0?f.push("blank:"+d.vars[i]):f.push(d.vars[i]):e.push(d.vars[i]);for(var g=d.i.split("_"),h=a.i.split("_"),c={},i=0;i<g.length;i++)g[i]!=""&&(c[g[i]]=!0);for(i=0;i<h.length;i++)h[i]!=""&&(c[h[i]]=!0);var i=[],n;for(n in c)i.push(n);return{left:a,right:d,cost:a.cost+d.cost,i:"_"+i.sort().join("_")+"_",vars:e,join:f}}};C.executeBushyTree=function(a,d,c,e){if(a.left==
null)return C.executeEmptyJoinBGP(a.right,d,c,e);else if(a.right==null)return C.executeEmptyJoinBGP(a.left,d,c,e);else{var f=C.executeBushyTree(a.left,d,c,e);if(f!=null)return d=C.executeBushyTree(a.right,d,c,e),d!=null?C.joinBindings2(a.join,f,d):null}};C.executeAndBGPsDPSize=function(a,d,c,e){for(var f=C.executeAndBGPsGroups(a),a=[],i=0;i<f.length;i++){var g=f[i];c.computeCosts(g,e);var h={},n={},q={},m=1,r=null,t={};q["1"]=[];for(var y=0;y<g.length;y++){var m=[],w;for(w in g[y])w!="_cost"&&(g[y][w].token===
"var"?m.push(g[y][w].value):g[y][w].token==="blank"&&m.push(g[y][w].value));n["_"+y+"_"]={left:g[y],right:null,cost:g[y]._cost,i:"_"+y+"_",vars:m};m={left:g[y],right:null,cost:g[y]._cost,i:"_"+y+"_",vars:m};h["_"+y+"_"]=m;delete g[y]._cost;t["_"+y+"_"]=!0;q["1"].push("_"+y+"_");if(r==null||r.cost>m.cost)r=m}for(var G=2;G<=g.length;G++)for(var E=1;E<G;E++)for(var H=q[""+E]||[],I=q[""+(G-E)]||[],y=0;y<H.length;y++)for(var M=0;M<I.length;M++)if(H[y]!==I[M]){var L=n[H[y]],O=n[I[M]];if(C.intersectionSize(L,
O)==0&&C.connected(L,O)&&(m=G,O=C.createJoinTree(h[L.i],h[O.i]),!t[O.i])){t[O.i]=!0;var P=O.cost+1;if(h[O.i]!=null)P=h[O.i].cost;L=q[G]||[];L.push(O.i);n[O.i]=O;q[G]=L;P>O.cost&&(m===G&&(r=O),h[O.i]=O)}}a.push(r)}L=null;for(i=0;i<a.length;i++)w=C.executeBushyTree(a[i],d,c,e),L=L==null?w:C.crossProductBindings(L,w);return L};C.executeEmptyJoinBGP=function(a,d,c,e){return C.executeBGPDatasets(a,d,c,e)};C.executeBGPDatasets=function(a,d,c,e){var f={};if(a.graph==null){for(var i=[],g=0;g<d.implicit.length;g++)if(f[d.implicit[g].oid]==
null){f[d.implicit[g].oid]=!0;a.graph=d.implicit[g];var h=c.rangeQuery(a,e),h=C.buildBindingsFromRange(h,a);i.push(h)}return a=C.unionManyBindings(i)}else if(a.graph.token==="var"){for(var n=a.graph.value,i=[],g=0;g<d.named.length;g++)if(f[d.named[g].oid]==null)if(f[d.named[g].oid]=!0,a.graph=d.named[g],h=c.rangeQuery(a,e),h!=null){for(var h=C.buildBindingsFromRange(h,a),q=0;q<h.length;q++)h[q][n]=d.named[g].oid;i.push(h)}else return null;return a=C.unionManyBindings(i||[])}else return h=c.rangeQuery(a,
e),h!=null?h=C.buildBindingsFromRange(h,a):null};C.buildBindingsFromRange=function(a,d){C.variablesInBGP(d);var c={},e=d.value||d,c={};for(n in e)e[n]&&e[n].token==="var"?c[n]=e[n].value:e[n]&&e[n].token==="blank"&&(c[n]="blank:"+e[n].value);e=[];if(a!=null)for(var f=0;f<a.length;f++){var i={},g=a[f],h=!1,n;for(n in c){var q=g[n];if(i[c[n]]==null||i[c[n]]===q)i[c[n]]=q;else{h=!0;break}}h||e.push(i)}return e};C.areCompatibleBindings=function(a,d){for(var c in a)if(d[c]!=null&&d[c]!=a[c])return!1;return!0};
C.mergeBindings=function(a,d){var c={},e;for(e in a)c[e]=a[e];for(e in d)c[e]=d[e];return c};C.joinBindings2=function(a,d,c){for(var e={},f,i,g,h,n=[],q=0;q<d.length;q++){f=d[q];h=e;for(var m=0;m<a.length;m++)i=a[m],i=f[i],m==a.length-1?(g=h[i]||[],g.push(f),h[i]=g):(g=h[i]||{},h=h[i]=g)}for(q=0;q<c.length;q++){f=c[q];h=e;for(m=0;m<a.length;m++)if(i=a[m],i=f[i],h[i]!=null)if(m==a.length-1)for(d=0;d<h[i].length;d++)n.push(C.mergeBindings(h[i][d],f));else h=h[i]}return n};C.joinBindings=function(a,
d){for(var c=[],e=0;e<a.length;e++)for(var f=a[e],i=0;i<d.length;i++){var g=d[i];C.areCompatibleBindings(f,g)&&c.push(C.mergeBindings(f,g))}return c};C.augmentMissingBindings=function(a,d){for(var c in d)a[c]==null&&(a[c]=null);return a};C.leftOuterJoinBindings=function(a,d){for(var c=[],e=0;e<a.length;e++){for(var f=a[e],i=!1,g=0;g<d.length;g++){var h=d[g];C.areCompatibleBindings(f,h)&&(i=!0,c.push(C.mergeBindings(f,h)))}i===!1&&(C.augmentMissingBindings(f,h),c.push(f))}return c};C.crossProductBindings=
function(a,d){for(var c=[],e=0;e<a.length;e++)for(var f=a[e],i=0;i<d.length;i++)c.push(C.mergeBindings(f,d[i]));return c};C.unionBindings=function(a,d){return a.concat(d)};C.unionManyBindings=function(a){for(var d=[],c=0;c<a.length;c++)d=C.unionBindings(d,a[c]);return d};var E={},ma=C;E.QueryEngine=function(a){if(arguments.length!=0)this.backend=a.backend,this.lexicon=a.lexicon,this.eventsOnBatchLoad=a.eventsOnBatchLoad||!1,this.defaultPrefixes={},this.abstractQueryTree=new P.AbstractQueryTree,this.rdfLoader=
new ea.RDFLoader(a.communication),this.callbacksBackend=new H.CallbacksBackend(this),this.customFns=a.customFns||{}};E.QueryEngine.prototype.setCustomFunctions=function(a){this.customFns=a};E.QueryEngine.prototype.registerNsInEnvironment=function(a,d){var c=[];if(a!=null&&a.prefixes!=null)c=a.prefixes;var e={},f;for(f in this.defaultPrefixes)e[f]=this.defaultPrefixes[f];for(f=0;f<c.length;f++){var i=c[f];if(i.token==="prefix")e[i.prefix]=i.local}d.namespaces=e;d.base=a!=null&&a.base&&typeof a.base===
"object"?a.base.value:null};E.QueryEngine.prototype.applyModifier=function(a,d){if(a=="DISTINCT"){for(var c={},e=[],f=0;f<d.length;f++){var i=d[f],g="",h;for(h in i){var n=i[h];n==null?g=g+h+"null":n.token=="literal"?(n.value!=null&&(g+=n.value),n.lang!=null&&(g+=n.lang),n.type!=null&&(g+=n.type)):g=n.value?g+h+n.value:g+h+n}c[g]==null&&(e.push(i),c[g]=!0)}return e}else return d};E.QueryEngine.prototype.applyLimitOffset=function(a,d,c){if(d==null&&a==null)return c;a==null&&(a=0);d=d==null?c.length:
a+d;return c.slice(a,d)};E.QueryEngine.prototype.applySingleOrderBy=function(a,d,c,e){for(var f=[],i=0;i<a.length;i++){var g=h.collect(a[i].expression,[d],c,e,this);f.push(g[0].value)}return{binding:d,value:f}};E.QueryEngine.prototype.applyOrderBy=function(a,d,c,e){var f=this,i=[];if(a!=null&&a.length>0){for(var g=0;g<d.length;g++){var h=f.applySingleOrderBy(a,d[g],c,e);i.push(h)}i.sort(function(c,d){return f.compareFilteredBindings(c,d,a,e)});d=[];for(g=0;g<i.length;g++)d.push(i[g].binding)}return d};
E.QueryEngine.prototype.compareFilteredBindings=function(a,d,c,e){for(var f=0;;){if(f==a.value.length)return 0;var i=c[f].direction;if(a.value[f]==null&&d.value[f]==null)f++;else{if(a.value[f]==null)a={value:!1};else if(d.value[f]==null)a={value:!0};else if(a.value[f].token==="blank"&&d.value[f].token==="blank"){f++;continue}else if(a.value[f].token==="blank")a={value:!1};else if(d.value[f].token==="blank")a={value:!0};else if(a.value[f].token==="uri"&&d.value[f].token==="uri")if(h.runEqualityFunction(a.value[f],
d.value[f],[],this,e).value==!0){f++;continue}else a=h.runTotalGtFunction(a.value[f],d.value[f],[]);else if(a.value[f].token==="uri")a={value:!1};else if(d.value[f].token==="uri")a={value:!0};else if(a.value[f].token==="literal"&&d.value[f].token==="literal"&&a.value[f].type==null&&d.value[f].type==null)if(h.runEqualityFunction(a.value[f],d.value[f],[],this,e).value==!0){f++;continue}else a=h.runTotalGtFunction(a.value[f],d.value[f],[]);else if(a.value[f].token==="literal"&&a.value[f].type==null)a=
{value:!1};else if(d.value[f].token==="literal"&&d.value[f].type==null)a={value:!0};else if(h.runEqualityFunction(a.value[f],d.value[f],[],this,e).value==!0){f++;continue}else a=h.runTotalGtFunction(a.value[f],d.value[f],[]);return a.value==!0?i==="ASC"?1:-1:i==="ASC"?-1:1}}};E.QueryEngine.prototype.removeDefaultGraphBindings=function(a,d){for(var c=[],e={},f=0;f<d.named.length;f++)e[d.named[f].oid]=!0;for(f=0;f<d.implicit.length;f++)e[d.implicit[f].oid]==null&&c.push(d.implicit[f].oid);c=[];for(f=
0;f<a.length;f++){var i=a[f],g=!1,h;for(h in i){for(var n=0;n<e.length;n++)if(i[h]===e[n]){g=!0;break}if(g)break}g||c.push(i)}return c};E.QueryEngine.prototype.aggregateBindings=function(a,d,c,e){for(var d=this.copyDenormalizedBindings(d,e.outCache),f={},i=0;i<a.length;i++){var g=h.runAggregator(a[i],d,this,c,e);a[i].alias?f[a[i].alias.value]=g:f[a[i].value.value]=g}return f};E.QueryEngine.prototype.projectBindings=function(a,d,c){if(a[0].kind==="*")return d;else{for(var e=[],f=0;f<d.length;f++){for(var i=
d[f],g={},l=!0,n=0;n<a.length;n++)if(a[n].token=="variable"&&a[n].kind!="aliased")g[a[n].value.value]=i[a[n].value.value];else if(a[n].token=="variable"&&a[n].kind=="aliased"){var q=h.runFilter(a[n].expression,i,this,c,{blanks:{},outCache:{}});if(h.isEbvError(q)){l=!1;break}else g[a[n].alias.value]=q}l===!0&&e.push(g)}return e}};E.QueryEngine.prototype.resolveNsInEnvironment=function(a,d){return d.namespaces[a]};E.QueryEngine.prototype.termCost=function(a,d){if(a.token==="uri"){var c=w.lexicalFormBaseUri(a,
d);return c==null?0:this.lexicon.resolveUriCost(c)}else return a.token==="literal"?this.lexicon.resolveLiteralCost(w.lexicalFormLiteral(a,d)):a.token==="blank"?this.lexicon.resolveBlankCost(a.value):a.token==="var"?this.lexicon.oidCounter/3:null};E.QueryEngine.prototype.normalizeTerm=function(a,d,c){if(a.token==="uri")return d=w.lexicalFormBaseUri(a,d),d==null?null:c?this.lexicon.registerUri(d):this.lexicon.resolveUri(d);else if(a.token==="literal")return d=w.lexicalFormLiteral(a,d),a=c?this.lexicon.registerLiteral(d):
this.lexicon.resolveLiteral(d);else if(a.token==="blank"){var e=a.value,a=d.blanks[e];a==null&&(a=c?this.lexicon.registerBlank(e):this.lexicon.resolveBlank(e),d.blanks[e]=a);return a}else return a.token==="var"?a.value:null};E.QueryEngine.prototype.normalizeDatasets=function(a,d){for(var c=0;c<a.length;c++){var e=a[c];if(e.value===this.lexicon.defaultGraphUri)e.oid=this.lexicon.defaultGraphOid;else{var f=this.normalizeTerm(e,d,!1);if(f!=null)e.oid=f;else return null}}return!0};E.QueryEngine.prototype.normalizeQuad=
function(a,d,c){var e=null,f=null,i=e=null,g;if(a.graph==null)i=0;else if(g=this.normalizeTerm(a.graph,d,c),g!=null)i=g,c===!0&&a.graph.token!="var"&&this.lexicon.registerGraph(g);else return null;g=this.normalizeTerm(a.subject,d,c);if(g!=null)e=g;else return null;g=this.normalizeTerm(a.predicate,d,c);if(g!=null)f=g;else return null;g=this.normalizeTerm(a.object,d,c);return g==null?null:{subject:e,predicate:f,object:g,graph:i}};E.QueryEngine.prototype.quadCost=function(a,d){var c=null,e=null,f=null,
i=null,i=a.graph==null?this.lexicon.oidCounter/4:this.termCost(a.graph,d),c=this.termCost(a.subject,d),e=this.termCost(a.predicate,d),f=this.termCost(a.object,d);return i+c+e+f};E.QueryEngine.prototype.denormalizeBindingsList=function(a,d){for(var c=[],e=0;e<a.length;e++){var f=this.denormalizeBindings(a[e],d);c.push(f)}return c};E.QueryEngine.prototype.copyDenormalizedBindings=function(a,d){for(var c=[],e=0;e<a.length;e++){for(var f={},i=a[e],g=w.keys(i),h=0;h<g.length;h++){var n=i[g[h]];if(n==null)f[g[h]]=
null;else if(typeof n==="object")f[g[h]]=n;else{var q=d[n];q==null&&(q=this.lexicon.retrieve(n),d[n]=q);f[g[h]]=q}}c.push(f)}return c};E.QueryEngine.prototype.denormalizeBindings=function(a,d){for(var c=w.keys(a),e=d.outCache,f=0;f<c.length;f++){var i=a[c[f]];if(i==null)a[c[f]]=null;else if(e[i]!=null)a[c[f]]=e[i];else{var g=this.lexicon.retrieve(i);a[c[f]]=g;g.token==="blank"&&(d.blanks[g.value]=i)}}return a};E.QueryEngine.prototype.execute=function(a,d,c,e){a=w.normalizeUnicodeLiterals(a);a=this.abstractQueryTree.parseQueryString(a);
if(a==null)d(!1,"Error parsing query string");else if(a.token==="query"&&a.kind=="update"){this.callbacksBackend.startGraphModification();var f=this;this.executeUpdate(a,function(a,c){f.lexicon.updateAfterWrite&&f.lexicon.updateAfterWrite();a?f.callbacksBackend.endGraphModification(function(){d(a,c)}):(f.callbacksBackend.cancelGraphModification(),d(a,c))})}else a.token==="query"&&a.kind=="query"&&this.executeQuery(a,d,c,e)};E.QueryEngine.prototype.executeQuery=function(a,d,c,e){var f=a.units,i=this,
g={blanks:{},outCache:{}};this.registerNsInEnvironment(a.prologue,g);var h=i.abstractQueryTree.parseExecutableUnit(f[0]);if(h.kind==="select")this.executeSelect(h,g,c,e,function(a,c){a?typeof c==="object"&&c.denorm===!0?d(!0,c.bindings):(c=i.denormalizeBindingsList(c,g),c!=null?d(!0,c):d(!1,c)):d(!1,c)});else if(h.kind==="ask")h.projection=[{token:"variable",kind:"*"}],this.executeSelect(h,g,c,e,function(a,c){a?a?c.length>0?d(!0,!0):d(!0,!1):d(!1,c):d(!1,c)});else if(h.kind==="construct")h.projection=
[{token:"variable",kind:"*"}],i=this,this.executeSelect(h,g,c,e,function(a,c){if(a)if(a)if(c=i.denormalizeBindingsList(c,g),c!=null){var e=new r.Graph;if(h.template==null)h.template={triplesContext:h.pattern};for(var f=1,t=[],y=0;y<c.length;y++){for(var w=c[y],G=0;G<t.length;G++)delete t[G].valuetmp;for(G=0;G<h.template.triplesContext.length;G++){for(var E=["subject","predicate","object"],C=h.template.triplesContext[G],H=0;H<E.length;H++){var I=E[H];if(C[I].token==="blank"&&!(C[I].valuetmp&&C[I].valuetmp!=
null)){var L="_:b"+f;f++;C[I].valuetmp=L;t.push(C[I])}}E=r.buildRDFResource(C.subject,w,i,g);H=r.buildRDFResource(C.predicate,w,i,g);C=r.buildRDFResource(C.object,w,i,g);E!=null&&H!=null&&C!=null&&(H=new r.Triple(E,H,C),e.add(H))}}d(!0,e)}else d(!1,c);else d(!1,c);else d(!1,c)})};E.QueryEngine.prototype.executeSelect=function(a,d,c,e,f){if(a.kind==="select"||a.kind==="ask"||a.kind==="construct"||a.kind==="modify"){var i=a.projection,g=a.dataset,h=a.modifier,n=a.limit,q=a.offset,m=a.order;g.implicit=
g["default"];if(c!=null||e!=null)g.implicit=c||[],g.named=e||[];g.implicit!=null&&g.implicit.length===0&&g.named!=null&&g.named.length===0&&g.implicit.push(this.lexicon.defaultGraphUriTerm);if(this.normalizeDatasets(g.implicit.concat(g.named),d)!=null)if(e=this.executeSelectUnit(i,g,a.pattern,d),e!=null){if(a.group!=null&&a.group===""){for(var r=!1,c=0;c<a.projection.length;c++)if(a.projection[c].expression!=null&&a.projection[c].expression.expressionType==="aggregate"){r=!0;break}if(r===!0)a.group=
"singleGroup"}if(a.group&&a.group!="")if(this.checkGroupSemantics(a.group,i)){n=this.groupSolution(e,a.group,g,d);q=[];for(c=0;c<n.length;c++)h=this.aggregateBindings(i,n[c],g,d),q.push(h);f(!0,{bindings:q,denorm:!0})}else f(!1,"Incompatible Group and Projection variables");else d=this.applyOrderBy(m,e,g,d),i=this.projectBindings(i,d,g),i=this.applyModifier(h,i),g=this.removeDefaultGraphBindings(this.applyLimitOffset(q,n,i),g),f(!0,g)}else f(!1,e);else f(!1,"Error normalizing datasets")}else f(!1,
"Cannot execute "+a.kind+" query as a select query")};E.QueryEngine.prototype.groupSolution=function(a,d,c,e){var f=[],i=[],g=!1;if(d==="singleGroup")return[a];else{for(var l=0;l<a.length;l++){for(var n=a[l],q=!0,m=0;m<d.length;m++){var r=d[m],t=null;if(r.token==="var")t=r.value,g==!1&&f.push(t);else if(r.token==="aliased_expression")if(t=r.alias.value,g==!1&&f.push(t),r.expression.primaryexpression==="var")n[r.alias.value]=n[r.expression.value.value];else if(t=this.copyDenormalizedBindings([n],e.outCache),
t=h.runFilter(r.expression,t[0],this,c,e),h.isEbvError(t))q=!1;else{if(t.value!=null)t.value=""+t.value;n[r.alias.value]=t}else t=this.copyDenormalizedBindings([n],e.outCache),t=h.runFilter(r,t[0],this,e),h.isEbvError(t)?q=!1:(n["groupCondition"+env._i]=t,t="groupCondition"+env._i,g==!1&&f.push(t))}g==!1&&(g=!0);q===!0&&i.push(n)}a={};for(l=0;l<i.length;l++){d=i[l];c="";for(m=0;m<f.length;m++)e=d[f[m]],c+=typeof e==="object"?e.value:e;a[c]==null?a[c]=[d]:a[c].push(d)}var f=[],y;for(y in a)f.push(a[y]);
return f}};E.QueryEngine.prototype.executeSelectUnit=function(a,d,c,e){return c.kind==="BGP"?this.executeAndBGP(a,d,c,e):c.kind==="UNION"?this.executeUNION(a,d,c.value,e):c.kind==="JOIN"?this.executeJOIN(a,d,c,e):c.kind==="LEFT_JOIN"?this.executeLEFT_JOIN(a,d,c,e):c.kind==="FILTER"?(a=this.executeSelectUnit(a,d,c.value,e),a!=null?a=h.checkFilters(c,a,!1,d,e,this):[]):c.kind==="EMPTY_PATTERN"?[]:c.kind==="ZERO_OR_MORE_PATH"||c.kind==="ONE_OR_MORE_PATH"?this.executeZeroOrMorePath(c,d,e):(console.log("Cannot execute query pattern "+
c.kind+". Not implemented yet."),null)};E.QueryEngine.prototype.executeZeroOrMorePath=function(a,d,c){var e=[];a.x.token==="var"&&e.push({token:"variable",kind:"var",value:a.x.value});a.y.token==="var"&&e.push({token:"variable",kind:"var",value:a.y.value});e.length===0&&e.push({token:"variable",kind:"*"});if(a.x.token==="var"&&a.y.token==="var"){var f=this.executeAndBGP(e,d,a.path,c),i={},e=[],g,h,n,q,m=a.x.value;h=a.x;for(var r=a.path,t=0;t<f.length;t++)if(g=f[t][m],i[g]==null){q=this.lexicon.retrieve(g);
a.x=q;a.path=this.abstractQueryTree.replace(r,h,q,c);r=w.clone(a.path);h=this.executeZeroOrMorePath(a,d,c);for(var y=0;y<h.length;y++)n=h[y],n[m]=g,e.push(n);h=q}return e}else if(a.x.token!=="var"&&a.y.token==="var"){i={};g=!0;q=[];for(m=[];g==!0||q.length!==0;){g===!0?(f=this.executeAndBGP(e,d,a.path,c),h=a.x,g=!1):(r=this.lexicon.retrieve(q.pop()),f=a.path,f=this.abstractQueryTree.replace(f,h,r,c),f=this.executeAndBGP(e,d,f,c),h=r);for(t=0;t<f.length;t++)r=f[t][a.y.value],i[r]!==!0&&(n={},n[a.y.value]=
r,m.push(n),i[r]=!0,q.push(r))}return m}else throw"Kind of path not supported!";};E.QueryEngine.prototype.executeUNION=function(a,d,c,e){var f=c[0],i=c[1],g=null,l=null;if(c.length!=2)throw"SPARQL algebra UNION with more than two components";g=this.executeSelectUnit(a,d,f,e);if(g==null)return null;l=this.executeSelectUnit(a,d,i,e);if(l==null)return null;a=ma.unionBindings(g,l);return a=h.checkFilters(c,a,!1,d,e,this)};E.QueryEngine.prototype.executeAndBGP=function(a,d,c,e){a=ma.executeAndBGPsDPSize(c.value,
d,this,e);return a!=null?h.checkFilters(c,a,!1,d,e,this):null};E.QueryEngine.prototype.executeLEFT_JOIN=function(a,d,c,e){var f=c.rvalue,i=null,g=null,i=this.executeSelectUnit(a,d,c.lvalue,e);if(i==null)return null;g=this.executeSelectUnit(a,d,f,e);if(g==null)return null;a=ma.leftOuterJoinBindings(i,g);d=h.checkFilters(c,a,!0,d,e,this);if(i.length>1&&g.length>1){var c=[],e={},l;for(l in i[0])e[l]=!0;for(l in g[0])e[l]!=!0&&c.push(l);i=[];g={};for(e=0;e<d.length;e++)if(d[e].__nullify__===!0){for(f=
0;f<c.length;f++)d[e].bindings[c[f]]=null;f=[];a=[];for(l in d[e].bindings)d[e].bindings[l]!=null&&(f.push(l+d[e].bindings[l]),f.sort(),a.push(f.join("")));if(g[f.join("")]==null){for(f=0;f<a.length;f++)g[a[f]]=!0;i.push(d[e].bindings)}}else for(l in i.push(d[e]),f=[],d[e])f.push(l+d[e][l]),f.sort(),g[f.join("")]=!0;return i}else return d};E.QueryEngine.prototype.executeJOIN=function(a,d,c,e){var f=c.lvalue,i=c.rvalue,g=null,l=null,g=this.executeSelectUnit(a,d,f,e);if(g==null)return null;l=this.executeSelectUnit(a,
d,i,e);if(l==null)return null;a=null;if(g.length===0||l.length===0)a=[];else{var a={},n=[],q;for(q in g[0])a[q]=!1;for(q in l[0])a[q]===!1&&n.push(q);a=n.length==0?ma.joinBindings(g,l):this.abstractQueryTree.treeWithUnion(f)||this.abstractQueryTree.treeWithUnion(i)?ma.joinBindings(g,l):ma.joinBindings2(n,g,l)}return a=h.checkFilters(c,a,!1,d,e,this)};E.QueryEngine.prototype.rangeQuery=function(a,d){var c=this.normalizeQuad(a,d,!1);return c!=null?(c=this.backend.range(new Z.Pattern(c)),c==null||c.length==
0?[]:c):(console.log("ERROR normalizing quad"),null)};E.QueryEngine.prototype.executeUpdate=function(a,d){var c=a.units,e=this,f={blanks:{},outCache:{}};this.registerNsInEnvironment(a.prologue,f);for(var i=0;i<c.length;i++){var g=e.abstractQueryTree.parseExecutableUnit(c[i]);if(g.kind==="insertdata"){for(var h=0;h<g.quads.length;h++){var n=g.quads[h];if(e._executeQuadInsert(n,f)!==!0)return d(!1,error)}d(!0)}else if(g.kind==="deletedata"){for(h=0;h<g.quads.length;h++)n=g.quads[h],this._executeQuadDelete(n,
f);d(!0)}else if(g.kind==="modify")this._executeModifyQuery(g,f,d);else if(g.kind==="create")d(!0);else if(g.kind==="load")h={uri:w.lexicalFormBaseUri(g.sourceGraph,f)},g.destinyGraph!=null&&(h={uri:w.lexicalFormBaseUri(g.destinyGraph,f)}),e=this,this.rdfLoader.load(g.sourceGraph.value,h,function(a,c){a==!1?(console.log("Error loading graph"),console.log(c),d(!1,"error batch loading quads")):(c=e.batchLoad(c),d(c!=null,c||"error batch loading quads"))});else if(g.kind==="drop")this._executeClearGraph(g.destinyGraph,
f,d);else if(g.kind==="clear")this._executeClearGraph(g.destinyGraph,f,d);else throw Error("not supported execution unit");}};E.QueryEngine.prototype.batchLoad=function(a,d){var c=null,e=null,f=null,i=null,g=0,h=!0,n={},q,m;this.eventsOnBatchLoad&&this.callbacksBackend.startGraphModification();for(var r=0;r<a.length;r++){m=a[r];if(m.subject.uri||m.subject.token==="uri"){if(q=this.lexicon.registerUri(m.subject.uri||m.subject.value),m.subject.uri!=null)m.subject={token:"uri",value:m.subject.uri},delete m.subject.uri}else if(m.subject.literal||
m.subject.token==="literal"){if(q=this.lexicon.registerLiteral(m.subject.literal||m.subject.value),m.subject.literal!=null)m.subject=this.lexicon.parseLiteral(m.subject.literal),delete m.subject.literal}else if(q=n[m.subject.blank||m.subject.value],q==null&&(q=this.lexicon.registerBlank(m.subject.blank||m.subject.value),n[m.subject.blank||m.subject.value]=q),m.subject.token==null)m.subject.token="blank",m.subject.value=m.subject.blank,delete m.subject.blank;c=q;if(m.predicate.uri||m.predicate.token===
"uri"){if(q=this.lexicon.registerUri(m.predicate.uri||m.predicate.value),m.predicate.uri!=null)m.predicate={token:"uri",value:m.predicate.uri},delete m.subject.uri}else if(m.predicate.literal||m.predicate.token==="literal"){if(q=this.lexicon.registerLiteral(m.predicate.literal||m.predicate.value),m.predicate.literal!=null)m.predicate=this.lexicon.parseLiteral(m.predicate.literal),delete m.predicate.literal}else if(q=n[m.predicate.blank||m.predicate.value],q==null&&(q=this.lexicon.registerBlank(m.predicate.blank||
m.predicate.value),n[m.predicate.blank||m.predicate.value]=q),m.predicate.token==null)m.predicate.token="blank",m.predicate.value=m.predicate.blank,delete m.predicate.blank;e=q;if(m.object.uri||m.object.token==="uri"){if(q=this.lexicon.registerUri(m.object.uri||m.object.value),m.object.uri!=null)m.object={token:"uri",value:m.object.uri},delete m.subject.uri}else if(m.object.literal||m.object.token==="literal"){if(m.object.token==="literal")m.object.value=m.object.type!=null?'"'+m.object.value+'"^^<'+
m.object.type+">":m.object.lang!=null?'"'+m.object.value+'"@'+m.object.lang:'"'+m.object.value+'"';q=this.lexicon.registerLiteral(m.object.literal||m.object.value);if(m.object.literal!=null)m.object=this.lexicon.parseLiteral(m.object.literal),delete m.object.literal}else if(q=n[m.object.blank||m.object.value],q==null&&(q=this.lexicon.registerBlank(m.object.blank||m.object.value),n[m.object.blank||m.object.value]=q),m.object.token==null)m.object.token="blank",m.object.value=m.object.blank,delete m.object.blank;
f=q;if(m.graph.uri||m.graph.token==="uri"){q=this.lexicon.registerUri(m.graph.uri||m.graph.value);if(m.graph.uri!=null)m.graph={token:"uri",value:m.graph.uri},delete m.subject.uri;this.lexicon.registerGraph(q)}else if(m.graph.literal||m.graph.token==="literal"){if(q=this.lexicon.registerLiteral(m.graph.literal||m.graph.value),m.predicate.literal!=null)m.predicate=this.lexicon.parseLiteral(m.predicate.literal),delete m.predicate.literal}else if(q=n[m.graph.blank||m.graph.value],q==null&&(q=this.lexicon.registerBlank(m.graph.blank||
m.graph.value),n[m.graph.blank||m.graph.value]=q),m.graph.token==null)m.graph.token="blank",m.graph.value=m.graph.blank,delete m.graph.blank;i=q;q=m;m={subject:c,predicate:e,object:f,graph:i};c=new Z.NodeKey(m);e=this.backend.search(c);if(!e)if(e=this.backend.index(c),e==!0)this.eventsOnBatchLoad&&this.callbacksBackend.nextGraphModification(H.added,[q,m]),g+=1;else{h=!1;break}}this.lexicon.updateAfterWrite!=null&&this.lexicon.updateAfterWrite();var t=function(){h?d&&d(!0,g):d&&d(!1,null)};this.eventsOnBatchLoad?
this.callbacksBackend.endGraphModification(function(){t()}):t();return h?g:null};E.QueryEngine.prototype.computeCosts=function(a,d){for(var c=0;c<a.length;c++)a[c]._cost=this.quadCost(a[c],d);return a};E.QueryEngine.prototype._executeModifyQuery=function(a,d,c){var e=this,f=!0,i=null,g=["subject","predicate","object","graph"];a.insert=a.insert==null?[]:a.insert;a["delete"]=a["delete"]==null?[]:a["delete"];w.seq(function(c){var g=[],h=[];a["with"]!=null&&g.push(a["with"]);if(a.using!=null)for(var h=
[],m=0;m<a.using.length;m++){var r=a.using[m];r.kind==="named"?h.push(r.uri):g.push(r.uri)}a.dataset={};a.projection=[{token:"variable",kind:"*"}];e.executeSelect(a,d,g,h,function(a,g){a?(g=e.denormalizeBindingsList(g,d),g!=null?i=g:f=!1):f=!1;return c()})},function(c){var h=a["with"];if(f){for(var q=[],m=0;m<a["delete"].length;m++)for(var r=a["delete"][m],t=0;t<i.length;t++){for(var w={},C=i[t],G=0;G<g.length;G++){var E=g[G];E=="graph"&&r[E]==null?w.graph=h:w[E]=r[E].token==="var"?C[r[E].value]:
r[E]}q.push(w)}for(t=0;t<q.length;t++)w=q[t],e._executeQuadDelete(w,d)}c()},function(c){var h=a["with"];if(f){for(var q=[],m=0;m<a.insert.length;m++)for(var r=a.insert[m],t=0;t<i.length;t++){for(var w={},E=i[t],G=0;G<g.length;G++){var C=g[G];C=="graph"&&r[C]==null?w.graph=h:w[C]=r[C].token==="var"?E[r[C].value]:r[C]}q.push(w)}for(m=0;m<q.length;m++)w=q[m],e._executeQuadInsert(w,d)}c()})(function(){c(f)})};E.QueryEngine.prototype._executeQuadInsert=function(a,d){var c=this.normalizeQuad(a,d,!0);if(c!=
null){var e=new Z.NodeKey(c),f=this.backend.search(e);return f?f:(f=this.backend.index(e),f==!0?(this.callbacksBackend.nextGraphModification(H.added,[a,c]),!0):(console.log("ERROR inserting quad"),!1))}else return console.log("ERROR normalizing quad"),!1};E.QueryEngine.prototype._executeQuadDelete=function(a,d){var c=this.normalizeQuad(a,d,!1);if(c!=null){var e=new Z.NodeKey(c);this.backend["delete"](e);return this.lexicon.unregister(a,e)==!0?(this.callbacksBackend.nextGraphModification(H.deleted,
[a,c]),!0):(console.log("ERROR unregistering quad"),!1)}else return console.log("ERROR normalizing quad"),!1};E.QueryEngine.prototype._executeClearGraph=function(a,d,c){if(a==="default")this.execute("DELETE { ?s ?p ?o } WHERE { ?s ?p ?o }",c);else if(a==="named"){var e=this,f=this.lexicon.registeredGraphs(!0);if(f!=null){var i=!1;w.repeat(0,f.length,function(a,c){var d=f[c._i],h=arguments.callee;i?a(h,c):e.execute("DELETE { GRAPH <"+d+"> { ?s ?p ?o } } WHERE { GRAPH <"+d+"> { ?s ?p ?o } }",function(d){i=
!d;a(h,c)})},function(){c(!i)})}else c(!1,"Error deleting named graphs")}else a==="all"?(e=this,this.execute("CLEAR DEFAULT",function(a,d){a?e.execute("CLEAR NAMED",c):c(!1,d)})):a.token=="uri"?(a=w.lexicalFormBaseUri(a,d),a!=null?this.execute("DELETE { GRAPH <"+a+"> { ?s ?p ?o } } WHERE { GRAPH <"+a+"> { ?s ?p ?o } }",c):c(!1,"wrong graph URI")):c(!1,"wrong graph URI")};E.QueryEngine.prototype.checkGroupSemantics=function(a,d){if(a==="singleGroup")return!0;for(var c={},e=0;e<a.length;e++){var f=
a[e];f.token==="var"?c[f.value]=!0:f.token==="aliased_expression"&&(c[f.alias.value]=!0)}for(e=0;e<d.length;e++)if(f=d[e],f.kind==="var"){if(c[f.value.value]==null)return!1}else if(f.kind==="aliased"&&f.expression&&f.expression.primaryexpression==="var"&&c[f.expression.value.value]==null)return!1;return!0};E.QueryEngine.prototype.registerDefaultNamespace=function(a,d){this.defaultPrefixes[a]=d};var H={ANYTHING:{token:"var",value:"_"},added:"added",deleted:"deleted",eventsFlushed:"eventsFlushed",CallbacksBackend:function(a){this.aqt=
new P.AbstractQueryTree;this.engine=a;this.indexMap={};this.observersMap={};this.queriesIndexMap={};this.emptyNotificationsMap={};this.queriesList=[];this.pendingQueries=[];this.matchedQueries=[];this.updateInProgress=null;this.indices=["SPOG","GP","OGS","POG","GSP","OS"];this.componentOrders={SPOG:["subject","predicate","object","graph"],GP:["graph","predicate","subject","object"],OGS:["object","graph","subject","predicate"],POG:["predicate","object","graph","subject"],GSP:["graph","subject","predicate",
"object"],OS:["object","subject","predicate","graph"]};this.callbackCounter=0;this.callbacksMap={};this.callbacksInverseMap={};this.queryCounter=0;this.queriesMap={};this.queriesCallbacksMap={};this.queriesInverseMap={};for(a=0;a<this.indices.length;a++){var d=this.indices[a];this.indexMap[d]={};this.queriesIndexMap[d]={}}}};H.CallbacksBackend.prototype.startGraphModification=function(){this.pendingQueries=[].concat(this.queriesList);this.matchedQueries=[];if(this.updateInProgress==null)this.updateInProgress=
{added:[],deleted:[]}};H.CallbacksBackend.prototype.nextGraphModification=function(a,d){this.updateInProgress[a].push(d)};H.CallbacksBackend.prototype.endGraphModification=function(a){var d=this;if(this.updateInProgress!=null){var c=d.updateInProgress;d.updateInProgress=null;this.sendNotification(H.deleted,c[H.deleted],function(){d.sendNotification(H.added,c[H.added],function(){d.sendEmptyNotification(H.eventsFlushed,null,function(){d.dispatchQueries(function(){a(!0)})})})})}else a(!0)};H.CallbacksBackend.prototype.cancelGraphModification=
function(){this.updateInProgress=null};H.CallbacksBackend.prototype.sendNotification=function(a,d,c){for(var e={},f=0;f<d.length;f++){var i=d[f],g;for(g in this.indexMap){var h=this.indexMap[g],n=this.componentOrders[g];this._searchCallbacksInIndex(h,n,a,i,e);this.pendingQueries.length!=0&&(h=this.queriesIndexMap[g],this._searchQueriesInIndex(h,n,i))}}this.dispatchNotifications(e);c!=null&&c(!0)};H.CallbacksBackend.prototype.sendEmptyNotification=function(a,d,c){for(var e=this.emptyNotificationsMap[a]||
[],f=0;f<e.length;f++)e[f](a,d);c()};H.CallbacksBackend.prototype.dispatchNotifications=function(a){for(var d in a){var c=this.callbacksMap[d],e=a[d][H.deleted];if(e!=null)try{c(H.deleted,e)}catch(f){}for(var i in a[d])if(i!=H.deleted)try{c(i,a[d][i])}catch(g){}}};H.CallbacksBackend.prototype._searchCallbacksInIndex=function(a,d,c,e,f){for(var i=e[1],e=e[0],g=0;g<d.length+1;g++){for(var h=a._||[],n=[],q=0;q<h.length;q++){var m=h[q];this.callbacksMap[m]!=null&&(f[m]=f[m]||{},f[m][c]=f[m][c]||[],f[m][c].push(e),
n.push(m))}a._=n;h=d[g];if(a[""+i[h]]!=null)a=a[""+i[h]];else break}};H.CallbacksBackend.prototype.subscribeEmpty=function(a,d){var c=this.emptyNotificationsMap[a]||[];c.push(d);this.emptyNotificationsMap[a]=c};H.CallbacksBackend.prototype.unsubscribeEmpty=function(a,d){var c=this.emptyNotificationsMap[a];c!=null&&(c=w.remove(c,d));this.emptyNotificationsMap[a]=c};H.CallbacksBackend.prototype.subscribe=function(a,d,c,e,f,i){a=this._tokenizeComponents(a,d,c,e);d={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,
d);a=this.engine.normalizeQuad(a,d,!0);c=this._indexForPattern(new Z.Pattern(a));d=this.componentOrders[c];c=this.indexMap[c];for(e=0;e<d.length;e++){var g=a[d[e]];if(g==="_"){c._==null&&(c._=[]);this.callbackCounter++;c._.push(this.callbackCounter);this.callbacksMap[this.callbackCounter]=f;this.callbacksInverseMap[f]=this.callbackCounter;break}else e===d.length-1?(c[g]=c[g]||{_:[]},this.callbackCounter++,c[g]._.push(this.callbackCounter),this.callbacksMap[this.callbackCounter]=f,this.callbacksInverseMap[f]=
this.callbackCounter):(c[g]=c[g]||{},c=c[g])}i!=null&&i(!0)};H.CallbacksBackend.prototype.unsubscribe=function(a){var d=this.callbacksInverseMap[a];d!=null&&(delete this.callbacksInverseMap[a],delete this.callbacksMap[d])};H.CallbacksBackend.prototype._tokenizeComponents=function(a,d,c,e){var f={};f.subject=a==null?H.ANYTHING:a.indexOf("_:")==0?{token:"blank",value:a}:{token:"uri",value:a};f.predicate=d==null?H.ANYTHING:{token:"uri",value:d};f.object=c==null?H.ANYTHING:{token:"uri",value:c};f.graph=
e==null?H.ANYTHING:{token:"uri",value:e};return f};H.CallbacksBackend.prototype._indexForPattern=function(a){for(var a=a.indexKey,d=this.indices,c=0;c<d.length;c++)for(var e=d[c],f=this.componentOrders[e],i=0;i<f.length;i++){if(w.include(a,f[i])===!1)break;if(i==a.length-1)return e}return"SPOG"};H.CallbacksBackend.prototype.observeNode=function(){var a,d,c,e;arguments.length===4?(a=arguments[0],d=arguments[1],c=arguments[2],e=arguments[3]):(a=arguments[0],d=this.engine.lexicon.defaultGraphUri,c=arguments[1],
e=arguments[2]);d="CONSTRUCT { <"+a+"> ?p ?o } WHERE { GRAPH <"+d+"> { <"+a+"> ?p ?o } }";var f=this,i={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,i);var g=[];this.engine.execute(d,function(d,h){if(d){var q=!1,m=function(a,d){if(a==="eventsFlushed"&&q){q=!1;try{c(h)}catch(e){}}else if(a!=="eventsFlushed"){q=!0;for(var l=0;l<d.length;l++){var m=d[l],w=r.buildRDFResource(m.subject,g,f.engine,i),C=r.buildRDFResource(m.predicate,g,f.engine,i),m=r.buildRDFResource(m.object,g,f.engine,
i);w!=null&&C!=null&&m!=null&&(m=new r.Triple(w,C,m),a===H.added?h.add(m):a===H.deleted&&h.remove(m))}}};f.observersMap[c]=m;f.subscribeEmpty(H.eventsFlushed,m);f.subscribe(a,null,null,null,m,function(){try{c(h)}catch(a){}e&&e(!0)})}else e&&e(!1)})};H.CallbacksBackend.prototype.stopObservingNode=function(a){return(a=this.observersMap[a])?(this.unsubscribe(a),this.unsubscribeEmpty(H.eventsFlushed,a),!0):!1};H.CallbacksBackend.prototype.observeQuery=function(a,d,c){var e=this.aqt.collectBasicTriples(this.aqt.parseSelect(this.aqt.parseQueryString(a).units[0])),
f={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,f);var i,g,h,n=this.queryCounter;this.queryCounter++;this.queriesMap[n]=a;this.queriesInverseMap[a]=n;this.queriesList.push(n);this.queriesCallbacksMap[n]=d;for(var q=0;q<e.length;q++){g=e[q];if(g.graph==null)g.graph=this.engine.lexicon.defaultGraphUriTerm;g=this.engine.normalizeQuad(g,f,!0);i=new Z.Pattern(g);h=this._indexForPattern(i);i=this.componentOrders[h];h=this.queriesIndexMap[h];for(var m=0;m<i.length;m++){var r=g[i[m]];if(typeof r===
"string"){h._==null&&(h._=[]);h._.push(n);break}else m===i.length-1?(h[r]=h[r]||{_:[]},h[r]._.push(n)):(h[r]=h[r]||{},h=h[r])}}this.engine.execute(a,function(a,c){a?d(c):console.log("ERROR in query callback "+c)});c!=null&&c()};H.CallbacksBackend.prototype.stopObservingQuery=function(a){var d=this.queriesInverseMap[a];if(d!=null)delete this.queriesInverseMap[a],delete this.queriesMap[d],this.queriesList=w.remove(this.queriesList,d)};H.CallbacksBackend.prototype._searchQueriesInIndex=function(a,d,
c){for(var c=c[1],e=0;e<d.length+1;e++){for(var f=a._||[],i=[],g=0;g<f.length;g++){var h=f[g];w.include(this.pendingQueries,h)&&(w.remove(this.pendingQueries,h),this.matchedQueries.push(h));this.queriesMap[h]!=null&&i.push(h)}a._=i;f=d[e];if(a[""+c[f]]!=null)a=a[""+c[f]];else break}};H.CallbacksBackend.prototype.dispatchQueries=function(a){var d=this,c,e,f,i,g={};w.repeat(0,this.matchedQueries.length,function(a,h){c=arguments.callee;f=d.matchedQueries[h._i];g[f]==null?(g[f]=!0,e=d.queriesMap[f],i=
d.queriesCallbacksMap[f],w.recur(function(){d.engine.execute(e,function(d,e){if(d)try{i(e)}catch(f){}a(c,h)})})):a(c,h)},function(){a()})};var L={};try{typeof Worker=="undefined"&&(Worker=null)}catch(Fc){Worker=null}if(Worker)L.RDFStoreClient=function(a,d,c){console.log("trying to load "+a);this.connection=Worker.Worker?new Worker.Worker(a):new Worker(a);this.callbacksCounter=1;var e=this;this.rdf=r.rdf;console.log("The worker");console.log(this.connection);e=this;this.connection.onmessage=function(a){e.receive(a)};
this.observingCallbacks={};this.callbacks={0:{cb:function(a,d){a===!0?c(!0,e):c(!1,d)},fn:"create"}};this.connection.postMessage({fn:"create",args:d,callback:"0"})},L.RDFStoreClient.prototype.receive=function(a){a=a.data||a;if(a.fn==="workerRequest:NetworkTransport:load"){var d=this,c=a.callback,a=a.arguments.concat(function(a,e){d.connection.postMessage({fn:"workerRequestResponse",results:[a,e],callback:c})});T.load.apply(T,a)}else{var e=this.callbacks[a.callback];e&&(e.fn==="create"||e.fn==="execute"||
e.fn==="insert"||e.fn=="graph"||e.fn==="node"||e.fn==="insert"||e.fn==="delete"||e.fn==="clear"||e.fn==="load"||e.fn==="startObservingQueryEndCb"||e.fn==="registeredGraphs"?(delete this.callbacks[a.callback],e.cb(a.success,a.result)):e.fn==="startObservingQuery"?e.cb(a.result):e.fn==="startObservingNode"?e.cb(a.result):e.fn==="subscribe"&&e.cb(a.event,a.result))}},L.RDFStoreClient.prototype.registerCallback=function(a,d){var c=""+this.callbacksCounter;this.callbacks[c]={fn:a,cb:d};this.callbacksCounter++;
return c},L.RDFStoreClient.prototype.execute=function(){if(arguments.length===3)this.executeWithEnvironment(arguments[0],arguments[1],arguments[2]);else if(arguments.length===4)this.executeWithEnvironment(arguments[0],arguments[1],arguments[2],arguments[3]);else{var a,d;arguments.length===1?(a=arguments[0],d=function(){}):arguments.length===2&&(a=arguments[0],d=arguments[1]);d=this.registerCallback("execute",d);this.connection.postMessage({fn:"execute",args:[a],callback:d})}},L.RDFStoreClient.prototype.insert=
function(){var a,d,c;if(arguments.length===1)d=arguments[0],this.connection.postMessage({fn:"insert",args:[d]});else if(arguments.length===2)d=arguments[0],c=arguments[1]||function(){},c=this.registerCallback("insert",c),this.connection.postMessage({fn:"insert",args:[d],callback:c});else if(arguments.length===3)d=arguments[0],a=arguments[1],c=arguments[2]||function(){},c=this.registerCallback("insert",c),this.connection.postMessage({fn:"insert",args:[d,a],callback:c});else throw"The triples to insert, an optional graph and callback must be provided";
},L.RDFStoreClient.prototype.graph=function(){var a=null,d=null;if(arguments.length===1)d=arguments[0]||function(){};else if(arguments.length===2)d=arguments[1]||function(){},a=arguments[0];else throw"An optional graph URI and a callback function must be provided";var c=this,e=this.registerCallback("insert",function(a,e){if(a){for(var g,h=0;h<e.triples.length;h++)g=e.triples[h],e.triples[h]=new r.Triple(c.adaptJSInterface(g.subject),c.adaptJSInterface(g.predicate),c.adaptJSInterface(g.object));d(a,
c.rdf.createGraph(e.triples))}else d(a,e)});a==null?this.connection.postMessage({fn:"graph",args:[],callback:e}):this.connection.postMessage({fn:"graph",args:[a],callback:e})},L.RDFStoreClient.prototype.node=function(){var a=null,d=null,c=null;if(arguments.length===2)c=arguments[0],d=arguments[1]||function(){};else if(arguments.length===3)c=arguments[0],a=arguments[1],d=arguments[2]||function(){};else throw"An optional graph URI and a callback function must be provided";var e=this,f=this.registerCallback("insert",
function(a,c){if(a){for(var f,h=0;h<c.triples.length;h++)f=c.triples[h],c.triples[h]=new r.Triple(e.adaptJSInterface(f.subject),e.adaptJSInterface(f.predicate),e.adaptJSInterface(f.object));d(a,e.rdf.createGraph(c.triples))}else d(a,c)});a==null?this.connection.postMessage({fn:"node",args:[c],callback:f}):this.connection.postMessage({fn:"node",args:[c,a],callback:f})},L.RDFStoreClient.prototype.setPrefix=function(a,d){this.rdf.setPrefix(a,d);this.connection.postMessage({fn:"rdf/setPrefix",args:[a,
d],callback:null})},L.RDFStoreClient.prototype.setDefaultPrefix=function(a){this.rdf.setDefaultPrefix(a);this.connection.postMessage({fn:"rdf/setDefaultPrefix",args:[a],callback:null})},L.RDFStoreClient.prototype["delete"]=function(){var a,d,c;if(arguments.length===1)d=arguments[0],this.connection.postMessage({fn:"delete",args:[d]});else if(arguments.length===2)d=arguments[0],c=arguments[1]||function(){},c=this.registerCallback("delete",c),this.connection.postMessage({fn:"delete",args:[d],callback:c});
else if(arguments.length===3)d=arguments[0],a=arguments[1],c=arguments[2]||function(){},c=this.registerCallback("delete",c),this.connection.postMessage({fn:"delete",args:[d,a],callback:c});else throw"The triples to delete, an optional graph and callback must be provided";},L.RDFStoreClient.prototype.clear=function(){var a,d;if(arguments.length===1)d=arguments[0]||function(){},d=this.registerCallback("clear",d),this.connection.postMessage({fn:"clear",args:[],callback:d});else if(arguments.length===
2)a=arguments[0],d=arguments[1]||function(){},d=this.registerCallback("clear",d),this.connection.postMessage({fn:"clear",args:[a],callback:d});else throw"The optional graph and a callback must be provided";},L.RDFStoreClient.prototype.setBatchLoadEvents=function(a){this.connection.postMessage({fn:"setBatchLoadEvents",args:[a]})},L.RDFStoreClient.prototype.registerDefaultNamespace=function(a,d){this.connection.postMessage({fn:"registerDefaultNamespace",args:[a,d]})},L.RDFStoreClient.prototype.registerDefaultProfileNamespaces=
function(){this.connection.postMessage({fn:"registerDefaultProfileNamespaces",args:[]})},L.RDFStoreClient.prototype.load=function(){var a,d,c,e;if(arguments.length===3)a=arguments[0],d=arguments[1],e=arguments[2]||function(){},e=this.registerCallback("load",e),this.connection.postMessage({fn:"load",args:[a,d],callback:e});else if(arguments.length===4)a=arguments[0],d=arguments[1],c=arguments[2],e=arguments[3]||function(){},e=this.registerCallback("load",e),this.connection.postMessage({fn:"load",args:[a,
d,c],callback:e});else if(arguments.length===2)throw"The mediaType of the parser, the data a callback and an optional graph must be provided";},L.RDFStoreClient.prototype.startObservingQuery=function(a,d,c){c!=null?(d=this.registerCallback("startObservingQuery",d),this.observingCallbacks[a]=d,c=this.registerCallback("startObservingQueryEndCb",c),this.connection.postMessage({fn:"startObservingQuery",args:[a],callback:[d,c]})):(d=this.registerCallback("startObservingQuery",d),this.observingCallbacks[a]=
d,this.connection.postMessage({fn:"startObservingQuery",args:[a],callback:[d]}))},L.RDFStoreClient.prototype.stopObservingQuery=function(a){var d=this.observingCallbacks[a];delete this.observingCallbacks[a];delete this.callbacks[d];this.connection.postMessage({fn:"stopObservingQuery",args:[a],callback:[]})},L.RDFStoreClient.prototype.startObservingNode=function(){var a,d,c;if(arguments.length===2){a=arguments[0];c=arguments[1];var e=this,f=this.registerCallback("startObservingNode",function(a){for(var d,
f=0;f<a.triples.length;f++)d=a.triples[f],a.triples[f]=new r.Triple(e.adaptJSInterface(d.subject),e.adaptJSInterface(d.predicate),e.adaptJSInterface(d.object));c(e.rdf.createGraph(a.triples))});this.observingCallbacks[c]=f;this.connection.postMessage({fn:"startObservingNode",args:[a],callback:f})}else arguments.length===3&&(a=arguments[0],d=arguments[1],c=arguments[2],e=this,f=this.registerCallback("startObservingNode",function(a){for(var d,f=0;f<a.triples.length;f++)d=a.triples[f],a.triples[f]=new r.Triple(e.adaptJSInterface(d.subject),
e.adaptJSInterface(d.predicate),e.adaptJSInterface(d.object));c(e.rdf.createGraph(a.triples))}),this.observingCallbacks[c]=f,this.connection.postMessage({fn:"startObservingNode",args:[a,d],callback:f}))},L.RDFStoreClient.prototype.stopObservingNode=function(a){var d=this.observingCallbacks[a];delete this.observingCallbacks[a];delete this.callbacks[d];this.connection.postMessage({fn:"stopObservingNode",args:[d],callback:[]})},L.RDFStoreClient.prototype.subscribe=function(a,d,c,e,f){var i=this,g=this.registerCallback("subscribe",
function(a,c){for(var d,e=0;e<c.length;e++)d=c[e],c[e]=new r.Triple(i.adaptJSInterface(d.subject),i.adaptJSInterface(d.predicate),i.adaptJSInterface(d.object));f(a,c)});this.observingCallbacks[f]=g;this.connection.postMessage({fn:"subscribe",args:[a,d,c,e],callback:g})},L.RDFStoreClient.prototype.unsubscribe=function(a){var d=this.observingCallbacks[a];delete this.observingCallbacks[a];delete this.callbacks[d];this.connection.postMessage({fn:"unsubscribe",args:[d],callback:[]})},L.RDFStoreClient.prototype.registeredGraphs=
function(a){var d=this;this.connection.postMessage({fn:"registeredGraphs",args:[],callback:this.registerCallback("registeredGraphs",function(c,e){if(c)for(var f=0;f<e.length;f++)e[f]=d.adaptJSInterface(e[f]);a(c,e)})})},L.RDFStoreClient.prototype.adaptJSInterface=function(a){if(a.interfaceName==="BlankNode")return new r.BlankNode(a.bnodeId);else if(a.interfaceName==="Literal")return new r.Literal(a.nominalValue,a.language,a.datatype);else if(a.interfaceName==="NamedNode")return new r.NamedNode(a.nominalValue)},
L.RDFStoreClient.prototype.isWebWorkerConnection=!0;var I={},Ec={MongodbQueryEngine:function(){throw"MongoDB backend not supported in the browser version";}};I.VERSION="0.8.1";I.connect=function(){var a,d,c;arguments.length==1&&(a=__dirname,d={},c=arguments[0]);arguments.length==2?(typeof arguments[0]==="string"?(a=arguments[0],d={}):(a=__dirname+"/index.js",d=arguments[0]),c=arguments[1]):(a=arguments[0],d=arguments[1],c=arguments[2]);try{Worker?new L.RDFStoreClient(a,d,function(a,d){c(a,d)}):I.create(d,
function(a){c(!1,a)})}catch(e){I.create(d,function(a){c(!1,a)})}};I.create=function(){return arguments.length==1?new I.Store(arguments[0]):arguments.length==2?new I.Store(arguments[0],arguments[1]):new I.Store};I.Store=function(a,d){var c=null,e=null;if(arguments.length==0)e={};else if(arguments.length==1)e={},c=a;else if(arguments.length>1)e=a,c=d;else throw"An optional argument map and a callback must be provided";e.treeOrder==null&&(e.treeOrder=15);this.functionMap={};var f=this;this.customFns=
{};e.engine==="mongodb"?(this.isMongodb=!0,this.engine=new Ec.MongodbQueryEngine(e),this.engine.readConfiguration(function(){e.overwrite===!0?f.engine.clean(function(){c(f)}):c(f)})):new S.Lexicon(function(a){e.overwrite===!0&&a.clear();new aa.QuadBackend(e,function(d){e.overwrite===!0&&d.clear();e.backend=d;e.lexicon=a;f.engine=new E.QueryEngine(e);c&&c(f)})},e.name)};I.Store.prototype.rdf=r.rdf;I.Store.prototype.rdf.api=r;I.Store.prototype.registerCustomFunction=function(a,d){this.customFns[a]=
d;this.engine.setCustomFunctions(this.customFns)};I.Store.prototype.execute=function(){if(arguments.length===3)this.executeWithEnvironment(arguments[0],arguments[1],arguments[2]);else if(arguments.length===4)this.executeWithEnvironment(arguments[0],arguments[1],arguments[2],arguments[3]);else{var a,d;arguments.length===1?(a=arguments[0],d=function(){}):arguments.length===2&&(a=arguments[0],d=arguments[1]);this.engine.execute(a,d)}};I.Store.prototype.executeWithEnvironment=function(){var a,d,c;if(arguments.length===
3){a=arguments[0];var e=function(){};d=arguments[1];c=arguments[2]}else arguments.length===4&&(a=arguments[0],e=arguments[3],d=arguments[1],c=arguments[2]);for(var f=[],i=[],g=0;g<d.length;g++)f.push({token:"uri",value:d[g]});for(g=0;g<c.length;g++)i.push({token:"uri",value:c[g]});this.engine.execute(a,e,f,i)};I.Store.prototype.graph=function(){var a=null,d=null;if(arguments.length===1)d=arguments[0]||function(){},a=this.engine.lexicon.defaultGraphUri;else if(arguments.length===2)d=arguments[1]||
function(){},a=arguments[0];else throw"An optional graph URI and a callback function must be provided";this.rdf.resolve(a)!=null&&(a=this.rdf.resolve(a));this.engine.execute("CONSTRUCT { ?s ?p ?o } WHERE { GRAPH <"+a+"> { ?s ?p ?o } }",d)};I.Store.prototype.node=function(){var a=null,d=null,c=null;if(arguments.length===2)c=arguments[0],d=arguments[1]||function(){},a=this.engine.lexicon.defaultGraphUri;else if(arguments.length===3)c=arguments[0],a=arguments[1],d=arguments[2]||function(){};else throw"An optional graph URI, node URI and a callback function must be provided";
this.rdf.resolve(a)!=null&&(a=this.rdf.resolve(a));this.rdf.resolve(c)!=null&&(c=this.rdf.resolve(c));this.engine.execute("CONSTRUCT { <"+c+"> ?p ?o } WHERE { GRAPH <"+a+"> { <"+c+"> ?p ?o } }",d)};I.Store.prototype.startObservingNode=function(){var a,d,c;arguments.length===2?(a=arguments[0],c=arguments[1],this.engine.callbacksBackend.observeNode(a,c,function(){})):arguments.length===3&&(a=arguments[0],d=arguments[1],c=arguments[2],this.engine.callbacksBackend.observeNode(a,d,c,function(){}))};I.Store.prototype.stopObservingNode=
function(a){this.engine.callbacksBackend.stopObservingNode(a)};I.Store.prototype.startObservingQuery=function(a,d,c){c!=null?this.engine.callbacksBackend.observeQuery(a,d,c):this.engine.callbacksBackend.observeQuery(a,d,function(){})};I.Store.prototype.stopObservingQuery=function(a){this.engine.callbacksBackend.stopObservingQuery(a)};I.Store.prototype.subscribe=function(a,d,c,e,f){var i=this,g=function(a,c){for(var d=[],e={blanks:{},outCache:{}},g=[],h=0;h<c.length;h++){var w=c[h],C=r.buildRDFResource(w.subject,
g,i.engine,e),E=r.buildRDFResource(w.predicate,g,i.engine,e),w=r.buildRDFResource(w.object,g,i.engine,e);C!=null&&E!=null&&w!=null&&(w=new r.Triple(C,E,w),d.push(w))}f(a,d)};this.functionMap[f]=g;this.engine.callbacksBackend.subscribe(a,d,c,e,g,function(){})};I.Store.prototype.unsubscribe=function(a){this.engine.callbacksBackend.unsubscribe(this.functionMap[a]);delete this.functionMap[a]};I.Store.prototype.setPrefix=function(a,d){this.rdf.setPrefix(a,d)};I.Store.prototype.setDefaultPrefix=function(a){this.rdf.setDefaultPrefix(a)};
I.Store.prototype.insert=function(){var a,d,c;if(arguments.length===1)d=arguments[0];else if(arguments.length===2)a=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),d=arguments[0],c=arguments[1]||function(){};else if(arguments.length===3)d=arguments[0],a=this.rdf.createNamedNode(arguments[1]),c=arguments[2]||function(){};else throw"The triples to insert, an optional graph and callback must be provided";var e="",f=this;d.forEach(function(a){e=e+f._nodeToQuery(a.subject)+f._nodeToQuery(a.predicate)+
f._nodeToQuery(a.object)+"."});e=a!=null?"INSERT DATA { GRAPH "+this._nodeToQuery(a)+" { "+e+" } }":"INSERT DATA { "+this._nodeToQuery(a)+" { "+e+" }";this.engine.execute(e,c)};I.Store.prototype._nodeToQuery=function(a){if(a.interfaceName==="NamedNode"){var d=this.rdf.resolve(a.valueOf());return d!=null?"<"+d+">":"<"+a.valueOf()+">"}else{if(a.interfaceName!=="")if(a.lang!=null)return'"'+a.valueOf()+'"@'+a.lang;else if(a.datatype!=null)return'"'+a.valueOf()+'"^^<'+a.datatype+">";return a.toString()}};
I.Store.prototype["delete"]=function(){var a,d,c;if(arguments.length===1)d=arguments[0];else if(arguments.length===2)a=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),d=arguments[0],c=arguments[1]||function(){};else if(arguments.length===3)d=arguments[0],a=this.rdf.createNamedNode(arguments[1]),c=arguments[2]||function(){};else throw"The triples to delete, an optional graph and callback must be provided";var e="",f=this;d.forEach(function(a){e=e+f._nodeToQuery(a.subject)+f._nodeToQuery(a.predicate)+
f._nodeToQuery(a.object)+"."});e=a!=null?"DELETE DATA { GRAPH "+this._nodeToQuery(a)+" { "+e+" } }":"DELETE DATA { "+this._nodeToQuery(a)+" { "+e+" }";this.engine.execute(e,c)};I.Store.prototype.clear=function(){var a,d;if(arguments.length===0)a=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),d=function(){};else if(arguments.length===1)a=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),d=arguments[0]||function(){};else if(arguments.length===2)a=this.rdf.createNamedNode(arguments[0]),
d=arguments[1]||function(){};else throw"The optional graph and a callback must be provided";this.engine.execute("CLEAR GRAPH "+this._nodeToQuery(a),d)};I.Store.prototype.setBatchLoadEvents=function(a){this.engine.eventsOnBatchLoad=a};I.Store.prototype.registerDefaultNamespace=function(a,d){this.rdf.prefixes.set(a,d);this.engine.registerDefaultNamespace(a,d)};I.Store.prototype.registerDefaultProfileNamespaces=function(){var a=this.rdf.prefixes.values(),d;for(d in a)this.registerDefaultNamespace(d,
a[d])};I.Store.prototype.load=function(){var a,d,c,e;if(arguments.length===3)c=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),a=arguments[0],d=arguments[1],e=arguments[2]||function(){};else if(arguments.length===4)a=arguments[0],d=arguments[1],c=this.rdf.createNamedNode(arguments[2]),e=arguments[3]||function(){};else if(arguments.length===2)throw"The mediaType of the parser, the data a callback and an optional graph must be provided";if(a==="remote")d=this.rdf.createNamedNode(d),this.engine.execute("LOAD <"+
d.valueOf()+"> INTO GRAPH <"+c.valueOf()+">",e);else if(d&&typeof d==="string"&&d.indexOf("file://")===0){a=this.engine.rdfLoader.parsers[a];var f=this;this.engine.rdfLoader.loadFromFile(a,{token:"uri",value:c.valueOf()},d,function(a,c){a?f.engine.batchLoad(c,e):e(a,c)})}else a=this.engine.rdfLoader.parsers[a],f=this,this.engine.rdfLoader.tryToParse(a,{token:"uri",value:c.valueOf()},d,function(a,c){a?f.engine.batchLoad(c,e):e(a,c)})};I.Store.prototype.registerParser=function(a,d){this.engine.rdfLoader.registerParser(a,
d)};I.Store.prototype.registeredGraphs=function(a){if(this.isMongodb)this.engine.registeredGraphs(!0,function(c){for(var d=[],e=0;e<c.length;e++){var f=new r.NamedNode(c[e]);d.push(f)}return a(!0,d)});else{for(var d=this.engine.lexicon.registeredGraphs(!0),c=[],e=0;e<d.length;e++){var f=new r.NamedNode(d[e]);c.push(f)}return a(!0,c)}};I.Store.prototype._nodeToQuery=function(a){if(a.interfaceName==="NamedNode"){var d=this.rdf.resolve(a.valueOf());return d!=null?"<"+d+">":"<"+a.valueOf()+">"}else return a.toString()};
I.Store.prototype.getNetworkTransport=function(){return T};I.Store.prototype.setNetworkTransport=function(a){T=a};I.Store.prototype.close=function(a){a==null&&(a=function(){});this.engine.close?this.engine.close(a):a()};RDFStoreWorker={observingCallbacks:{},workerCallbacksCounter:0,workerCallbacks:{}};RDFStoreWorker.registerCallback=function(a){var d=""+RDFStoreWorker.workerCallbacksCounter;RDFStoreWorker.workerCallbacksCounter++;RDFStoreWorker.workerCallbacks[d]=a;return d};RDFStoreWorker.handleCreate=
function(a,d){typeof T!="undefined"&&T!=null&&(T={load:function(a,c,d){var g=RDFStoreWorker.registerCallback(function(a){d.apply(d,a)});postMessage({fn:"workerRequest:NetworkTransport:load",callback:g,arguments:[a,c]})},loadFromFile:function(){}});var c=[a];c.push(function(a){RDFStoreWorker.store=a;postMessage({callback:d,result:"created",success:!0})});I.create.apply(I,c)};RDFStoreWorker.receive=function(a){var d=a.data||a;if(d.fn==="workerRequestResponse"){var c=d.callback,e=RDFStoreWorker.workerCallbacks[c];
e!=null&&(delete RDFStoreWorker.workerCallbacks[c],e(d.results))}else if(d.fn==="create"&&d.args!=null)RDFStoreWorker.handleCreate(d.args,d.callback);else if(d.fn==="setBatchLoadEvents")RDFStoreWorker.store[d.fn].apply(RDFStoreWorker.store,d.args);else if(d.fn==="registerDefaultNamespace")RDFStoreWorker.store[d.fn].apply(RDFStoreWorker.store,d.args);else if(d.fn==="registerDefaultProfileNamespaces")RDFStoreWorker.store[d.fn].apply(RDFStoreWorker.store,d.args);else if((d.fn==="execute"||d.fn==="executeWithEnvironment"||
d.fn==="graph"||d.fn==="node"||d.fn==="clear"||d.fn==="load")&&d.args!=null){d.args.push(function(a,c){d.callback!=null&&postMessage({callback:d.callback,result:c,success:a})});try{RDFStoreWorker.store[d.fn].apply(RDFStoreWorker.store,d.args)}catch(f){console.log("Error executing method through connection"),console.log(f)}}else if((d.fn==="insert"||d.fn==="delete")&&d.args!=null)try{d.args.push(function(a,c){d.callback!=null&&postMessage({callback:d.callback,result:c,success:a})});e=d.args[0];for(a=
0;a<e.triples.length;a++)c=e.triples[a],e.triples[a]=new r.Triple(RDFStoreWorker.adaptJSInterface(c.subject),RDFStoreWorker.adaptJSInterface(c.predicate),RDFStoreWorker.adaptJSInterface(c.object));d.args[1].interfaceName!=null&&(d.args[1]=RDFStoreWorker.adaptJSInterface(d.args[1]));d.args[0]=RDFStoreWorker.store.rdf.createGraph(e.triples);RDFStoreWorker.store[d.fn].apply(RDFStoreWorker.store,d.args)}catch(h){console.log("Error executing method through connection"),console.log(h)}else d.fn==="rdf/setPrefix"&&
d.args!=null?RDFStoreWorker.store.rdf.setPrefix(d.args[0],d.args[1]):d.fn==="rdf/setDefaultPrefix"&&d.args!=null?RDFStoreWorker.store.rdf.setDefaultPrefix(d.args[0]):d.fn==="startObservingQuery"&&d.args!=null?(c=function(a,c){postMessage({callback:d.callback[0],result:c,success:a})},RDFStoreWorker.observingCallbacks[d.args[0]]=c,d.args.push(c),d.args.push(function(a,c){d.callback&&d.callback[1]!=null&&postMessage({callback:d.callback[1],result:c,success:a})}),RDFStoreWorker.store[d.fn].apply(RDFStoreWorker.store,
d.args)):d.fn==="stopObservingQuery"?((c=RDFStoreWorker.observingCallbacks[d.args[0]])&&RDFStoreWorker.store[d.fn].apply(RDFStoreWorker.store,[c]),delete RDFStoreWorker.observingCallbacks[d.args[0]]):d.fn==="startObservingNode"&&d.args!=null?(c=function(a){postMessage({callback:d.callback,result:a})},RDFStoreWorker.observingCallbacks[d.callback]=c,d.args.push(c),RDFStoreWorker.store[d.fn].apply(RDFStoreWorker.store,d.args)):d.fn==="stopObservingNode"&&d.args!=null?((c=RDFStoreWorker.observingCallbacks[d.args[0]])&&
RDFStoreWorker.store[d.fn].apply(RDFStoreWorker.store,[c]),delete RDFStoreWorker.observingCallbacks[d.args[0]]):d.fn==="subscribe"&&d.args!=null?(c=function(a,c){postMessage({callback:d.callback,event:a,result:c})},RDFStoreWorker.observingCallbacks[d.callback]=c,d.args.push(c),RDFStoreWorker.store[d.fn].apply(RDFStoreWorker.store,d.args)):d.fn==="stopObservingNode"&&d.args!=null?((c=RDFStoreWorker.observingCallbacks[d.args[0]])&&RDFStoreWorker.store[d.fn].apply(RDFStoreWorker.store,[c]),delete RDFStoreWorker.observingCallbacks[d.args[0]]):
d.fn==="registeredGraphs"&&d.args!=null&&RDFStoreWorker.store[d.fn].apply(RDFStoreWorker.store,[function(a,c){d.callback!=null&&postMessage({callback:d.callback,result:c,success:a})}])};RDFStoreWorker.adaptJSInterface=function(a){if(a.interfaceName==="BlankNode")return new r.BlankNode(a.bnodeId);else if(a.interfaceName==="Literal")return new r.Literal(a.nominalValue,a.language,a.datatype);else if(a.interfaceName==="NamedNode")return new r.NamedNode(a.nominalValue)};onmessage=RDFStoreWorker.receive;
try{window.rdfstore=I,window.sparql=va}catch(Gc){}})();
